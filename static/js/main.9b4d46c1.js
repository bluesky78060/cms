(()=>{"use strict";var e={761:(e,t,s)=>{var n=s(198),r=s(296),a=s(106),l=s(552),i=s(555);const d="handles",o="dirHandle";function c(){return"undefined"!==typeof window&&"showDirectoryPicker"in window}function x(){return new Promise((e,t)=>{const s=indexedDB.open("cms-fs",1);s.onupgradeneeded=()=>{const e=s.result;e.objectStoreNames.contains(d)||e.createObjectStore(d)},s.onsuccess=()=>e(s.result),s.onerror=()=>t(s.error)})}async function m(){if(!c())return null;try{return await async function(e){const t=await x();return new Promise((s,n)=>{const r=t.transaction(d,"readonly").objectStore(d).get(e);r.onsuccess=()=>s(r.result||null),r.onerror=()=>n(r.error)})}(o)||null}catch(e){return null}}async function p(e){if(!c())return!1;try{return await async function(e,t){const s=await x();return new Promise((n,r)=>{const a=s.transaction(d,"readwrite").objectStore(d).put(t,e);a.onsuccess=()=>n(),a.onerror=()=>r(a.error)})}(o,e),!0}catch(t){return!1}}async function u(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"readwrite";return!!e&&("granted"===await e.queryPermission({mode:t})||"granted"===await e.requestPermission({mode:t}))}async function h(e,t){return await e.getFileHandle(t,{create:!0})}async function g(e,t,s){try{if(e||(e=await m()),!e)return!1;if(!await u(e,"readwrite"))return!1;const n=await h(e,"".concat(t,".json")),r=await n.createWritable();return await r.write(new Blob([JSON.stringify(s,null,2)],{type:"application/json"})),await r.close(),!0}catch(n){return!1}}const b={isSupported:c,getSavedDirectoryHandle:m,saveDirectoryHandle:p,chooseDirectory:async function(){if(!c())return null;try{const e=await window.showDirectoryPicker({id:"cms-data"});return await u(e,"readwrite")?(await p(e),e):null}catch(e){return null}},readKey:async function(e,t){try{if(e||(e=await m()),!e)return null;if(!await u(e,"read"))return null;const s=await h(e,"".concat(t,".json")),n=await s.getFile(),r=await n.text();return r?JSON.parse(r):null}catch(s){return null}},writeKey:g,writeKeyDirect:async function(e,t){const s=await m();return!!s&&await g(s,e,t)}},f={getItem(e,t){try{if("undefined"!==typeof window&&window.cms&&"function"===typeof window.cms.storageGetSync){const s=window.cms.storageGetSync(e);return null==s?t:s}}catch(s){}try{const s=localStorage.getItem(e);return s?JSON.parse(s):t}catch(s){return t}},setItem(e,t){try{if("undefined"!==typeof window&&window.cms&&"function"===typeof window.cms.storageSet)return void window.cms.storageSet(e,t)}catch(s){}try{localStorage.setItem(e,JSON.stringify(t))}catch(s){}b.isSupported()&&b.writeKeyDirect(e,t).catch(()=>{})},async chooseBrowserDirectory(){if(!b.isSupported())return!1;return!!await b.chooseDirectory()},async getBrowserDirectoryInfo(){if(!b.isSupported())return null;const e=await b.getSavedDirectoryHandle();return e?{name:e.name}:null}};var j=s(157);let y=null,v=null;function N(e){return Array.isArray(e)?e:[]}async function w(e){try{const s=function(e){const{companyInfo:t={},clients:s=[],workItems:n=[],invoices:r=[],estimates:a=[],units:l=[],categories:i=[]}=e||{},d=j.Wp.book_new(),o=[t],c=j.Wp.json_to_sheet(o);j.Wp.book_append_sheet(d,c,"Company");const x=j.Wp.json_to_sheet(N(s));j.Wp.book_append_sheet(d,x,"Clients");const m=j.Wp.json_to_sheet(N(n));j.Wp.book_append_sheet(d,m,"WorkItems");const p=j.Wp.json_to_sheet(N(r));j.Wp.book_append_sheet(d,p,"Invoices");const u=j.Wp.json_to_sheet(N(a));j.Wp.book_append_sheet(d,u,"Estimates");const h=j.Wp.json_to_sheet(N(l).map(e=>({unit:e})));j.Wp.book_append_sheet(d,h,"Units");const g=j.Wp.json_to_sheet(N(i).map(e=>({category:e})));return j.Wp.book_append_sheet(d,g,"Categories"),d}(e),n=(t=s,j.M9(t,{bookType:"xlsx",type:"array"})),r=await async function(e){if("undefined"===typeof window)return!1;const t=window.cms;if(!t||"function"!==typeof t.writeXlsx)return!1;try{const s=new Uint8Array(e);return await t.writeXlsx(s,"latest.xlsx"),!0}catch(s){return!1}}(n);if(r)return!0;const a=await async function(e){try{if(!b.isSupported())return!1;const t=await b.getSavedDirectoryHandle();if(!t)return!1;const s=await t.getFileHandle("latest.xlsx",{create:!0}),n=await s.createWritable();return await n.write(new Blob([e],{type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"})),await n.close(),!0}catch(t){return!1}}(n);return a}catch(s){return!1}var t}var k=s(582);const S=(0,n.createContext)(),I=()=>{const e=(0,n.useContext)(S);if(!e)throw new Error("useApp must be used within an AppProvider");return e},A="constructionApp_companyInfo",C="constructionApp_clients",P="constructionApp_workItems",_="constructionApp_invoices",E="constructionApp_estimates",z="constructionApp_units",R="constructionApp_categories",U="constructionApp_stampImage",q=(e,t)=>f.getItem(e,t),D=(e,t)=>f.setItem(e,t),W=e=>{let{children:t}=e;const s={name:"\ud55c\uad6d\uac74\uc124",businessNumber:"123-45-67890",address:"\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \ud14c\ud5e4\ub780\ub85c 123",phone:"02-1234-5678",email:"info@hangeonconstruction.com",representative:"\ud64d\uae38\ub3d9",bankAccount:"\uc2e0\ud55c\uc740\ud589 110-123-456789",accountHolder:"\ud55c\uad6d\uac74\uc124(\uc8fc)"},[r,a]=(0,n.useState)(()=>q(A,s)),l=[{id:1,name:"\uae40\ucca0\uc218",phone:"010-1234-5678",email:"kim@email.com",address:"\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \ud14c\ud5e4\ub780\ub85c 123",workplaces:[{id:1,name:"\uc2e0\ucd95 \uc8fc\ud0dd",address:"\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \uc5ed\uc0bc\ub3d9 123-45",description:"\ub2e8\ub3c5\uc8fc\ud0dd \uc2e0\ucd95 \ud604\uc7a5"},{id:2,name:"\ucc28\uace0 \uac74\uc124",address:"\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \uc5ed\uc0bc\ub3d9 123-45",description:"\uae30\uc874 \uc8fc\ud0dd \ubd80\uc9c0 \ub0b4 \ucc28\uace0 \uac74\uc124"}],projects:["\ub2e8\ub3c5\uc8fc\ud0dd \uc2e0\ucd95"],totalBilled:12e6,outstanding:35e5,notes:"\uc131\uc2e4\ud55c \uace0\uac1d, \ucd94\ucc9c \uac00\ub2a5"},{id:2,name:"\ubc15\uc601\ud76c",phone:"010-2345-6789",email:"park@email.com",address:"\uc11c\uc6b8\uc2dc \uc11c\ucd08\uad6c \uc11c\ucd08\ub3d9 456",workplaces:[{id:1,name:"\uc544\ud30c\ud2b8 \ub9ac\ubaa8\ub378\ub9c1",address:"\uc11c\uc6b8\uc2dc \uc11c\ucd08\uad6c \ubc18\ud3ec\ub3d9 \uc544\ud30c\ud2b8 101\ub3d9 503\ud638",description:"\uc544\ud30c\ud2b8 \ub0b4\ubd80 \uc804\uccb4 \ub9ac\ubaa8\ub378\ub9c1"}],projects:["\uc544\ud30c\ud2b8 \ub9ac\ubaa8\ub378\ub9c1"],totalBilled:52e5,outstanding:12e5,notes:"\ub514\ud14c\uc77c\uc5d0 \ubbfc\uac10\ud568"},{id:3,name:"\uc774\ubbfc\ud638",phone:"010-3456-7890",email:"lee@email.com",address:"\uc11c\uc6b8\uc2dc \ub9c8\ud3ec\uad6c \ud64d\ub300\uc785\uad6c\ub85c 789",workplaces:[{id:1,name:"\uc0c1\uac00 1\uce35",address:"\uc11c\uc6b8\uc2dc \ub9c8\ud3ec\uad6c \ud64d\ub300\uc785\uad6c \uc0c1\uac00 1\uce35",description:"\uce74\ud398 \uac1c\uc5c5\uc744 \uc704\ud55c \ub0b4\ubd80 \uacf5\uc0ac"},{id:2,name:"\uc0c1\uac00 2\uce35",address:"\uc11c\uc6b8\uc2dc \ub9c8\ud3ec\uad6c \ud64d\ub300\uc785\uad6c \uc0c1\uac00 2\uce35",description:"\uc0ac\ubb34\uc2e4 \uc778\ud14c\ub9ac\uc5b4 \uacf5\uc0ac"}],projects:["\uc0c1\uac00 \ub0b4\ubd80\uacf5\uc0ac"],totalBilled:78e5,outstanding:26e5,notes:"\ube60\ub978 \uc9c4\ud589 \uc120\ud638"},{id:4,name:"\uc815\uc218\uc9c4",phone:"010-4567-8901",email:"jung@email.com",address:"\uacbd\uae30\ub3c4 \uc131\ub0a8\uc2dc \ubd84\ub2f9\uad6c \uc815\uc790\ub3d9 321",workplaces:[{id:1,name:"\ud654\uc7a5\uc2e4 \ub9ac\ubaa8\ub378\ub9c1",address:"\uacbd\uae30\ub3c4 \uc131\ub0a8\uc2dc \ubd84\ub2f9\uad6c \uc815\uc790\ub3d9 \uc544\ud30c\ud2b8 15\ub3d9 702\ud638",description:"\uc548\ubc29 \ud654\uc7a5\uc2e4 \uc804\uccb4 \ub9ac\ubaa8\ub378\ub9c1"}],projects:["\ud654\uc7a5\uc2e4 \ub9ac\ubaa8\ub378\ub9c1"],totalBilled:15e5,outstanding:0,notes:"\uaf3c\uaf3c\ud558\uace0 \uc2e0\uc911\ud568"}],[d,o]=(0,n.useState)(()=>q(C,l)),c=[{id:1,clientId:1,clientName:"\uae40\ucca0\uc218",workplaceId:1,workplaceName:"\uc2e0\ucd95 \uc8fc\ud0dd",name:"\uae30\ucd08\uacf5\uc0ac",category:"\ud1a0\ubaa9\uacf5\uc0ac",defaultPrice:3e6,quantity:1,unit:"\uc2dd",description:"\uac74\ubb3c \uae30\ucd08 \ubc0f \uc9c0\ubc18 \uc791\uc5c5",projectName:"\ub2e8\ub3c5\uc8fc\ud0dd \uc2e0\ucd95",status:"\uc644\ub8cc",date:"2024-09-01",notes:"\ucf58\ud06c\ub9ac\ud2b8 \uac15\ub3c4 \ud655\uc778 \ud544\uc694"},{id:2,clientId:1,clientName:"\uae40\ucca0\uc218",workplaceId:1,workplaceName:"\uc2e0\ucd95 \uc8fc\ud0dd",name:"\uace8\uc870\uacf5\uc0ac",category:"\uad6c\uc870\uacf5\uc0ac",defaultPrice:4e6,quantity:1,unit:"\uc2dd",description:"\ucca0\uace8 \ubc0f \ucca0\uadfc\ucf58\ud06c\ub9ac\ud2b8 \uace8\uc870 \uc791\uc5c5",projectName:"\ub2e8\ub3c5\uc8fc\ud0dd \uc2e0\ucd95",status:"\uc644\ub8cc",date:"2024-08-28",notes:"\ucca0\uadfc \uac04\uaca9 \uc801\uc815\uc131 \uac80\ud1a0 \ud544\uc694"},{id:3,clientId:2,clientName:"\ubc15\uc601\ud76c",workplaceId:1,workplaceName:"\uc544\ud30c\ud2b8 \ub9ac\ubaa8\ub378\ub9c1",name:"\ubcbd\uccb4 \ucca0\uac70",category:"\ucca0\uac70\uacf5\uc0ac",defaultPrice:5e4,quantity:25,unit:"\u33a1",description:"\uae30\uc874 \ubcbd\uccb4 \ucca0\uac70 \ubc0f \ud3d0\uae30\ubb3c \ucc98\ub9ac",projectName:"\uc544\ud30c\ud2b8 \ub9ac\ubaa8\ub378\ub9c1",status:"\uc644\ub8cc",date:"2024-08-25",notes:"\uc18c\uc74c \ubc29\uc9c0\ub97c \uc704\ud574 \uc624\uc804 \uc791\uc5c5 \uad8c\uc7a5"},{id:4,clientId:2,clientName:"\ubc15\uc601\ud76c",workplaceId:1,workplaceName:"\uc544\ud30c\ud2b8 \ub9ac\ubaa8\ub378\ub9c1",name:"\ubc14\ub2e5 \uc2dc\uacf5",category:"\ub9c8\uac10\uacf5\uc0ac",defaultPrice:12e5,quantity:1,unit:"\uc2dd",description:"\ubc14\ub2e5\uc7ac \uc124\uce58 \ubc0f \ub9c8\uac10 \uc791\uc5c5",projectName:"\uc544\ud30c\ud2b8 \ub9ac\ubaa8\ub378\ub9c1",status:"\uc644\ub8cc",date:"2024-09-02",notes:"\ud559\ucd9c \ubc29\uc9c0\ub97c \uc704\ud55c \ub2e8\uc5f4 \ucc98\ub9ac \ud544\uc694"},{id:5,clientId:3,clientName:"\uc774\ubbfc\ud638",workplaceId:1,workplaceName:"\uc0c1\uac00 1\uce35",name:"\ub0b4\ubd80 \uce78\ub9c9\uc774",category:"\ub0b4\ubd80\uacf5\uc0ac",defaultPrice:12e4,quantity:30,unit:"\u33a1",description:"\ub0b4\ubd80 \uce78\ub9c9\uc774\ubcbd \uc124\uce58",projectName:"\uc0c1\uac00 \ub0b4\ubd80\uacf5\uc0ac",status:"\uc9c4\ud589\uc911",date:"2024-08-20",notes:"\uc18c\ubc29 \uaddc\uc815 \uc900\uc218 \ud655\uc778 \ud544\uc694"},{id:6,clientId:3,clientName:"\uc774\ubbfc\ud638",workplaceId:2,workplaceName:"\uc0c1\uac00 2\uce35",name:"\uc804\uae30\uacf5\uc0ac",category:"\uc124\ube44\uacf5\uc0ac",defaultPrice:15e5,quantity:1,unit:"\uc2dd",description:"\uc804\uae30 \ubc30\uc120 \ubc0f \uc870\uba85 \uc124\uce58",projectName:"\uc0c1\uac00 \ub0b4\ubd80\uacf5\uc0ac",status:"\uc608\uc815",date:"2024-09-10",notes:"\uc804\uc555 \uc6a9\ub7c9 \uc0ac\uc804 \ud655\uc778 \ud544\uc694"},{id:7,clientId:4,clientName:"\uc815\uc218\uc9c4",workplaceId:1,workplaceName:"\ud654\uc7a5\uc2e4 \ub9ac\ubaa8\ub378\ub9c1",name:"\ud654\uc7a5\uc2e4 \ucca0\uac70",category:"\ucca0\uac70\uacf5\uc0ac",defaultPrice:5e5,quantity:1,unit:"\uc2dd",description:"\uae30\uc874 \ud654\uc7a5\uc2e4 \ucca0\uac70",projectName:"\ud654\uc7a5\uc2e4 \ub9ac\ubaa8\ub378\ub9c1",status:"\uc644\ub8cc",date:"2024-08-15",notes:"\ubc29\uc218 \ucc98\ub9ac \uc0c1\ud0dc \ud655\uc778 \ud544\uc694"},{id:8,clientId:4,clientName:"\uc815\uc218\uc9c4",workplaceId:1,workplaceName:"\ud654\uc7a5\uc2e4 \ub9ac\ubaa8\ub378\ub9c1",name:"\ud654\uc7a5\uc2e4 \uc124\uce58",category:"\uc124\ube44\uacf5\uc0ac",defaultPrice:1e6,quantity:1,unit:"\uc2dd",description:"\uc0c8\ub85c\uc6b4 \ud654\uc7a5\uc2e4 \uc124\uce58 \ubc0f \ubc30\uad00",projectName:"\ud654\uc7a5\uc2e4 \ub9ac\ubaa8\ub378\ub9c1",status:"\uc644\ub8cc",date:"2024-08-22",notes:"\uae09\uc218 \uc555\ub825 \ud14c\uc2a4\ud2b8 \uc644\ub8cc"}],[x,m]=(0,n.useState)(()=>q(P,c)),p=[{id:"INV-2024-001",client:"\uae40\ucca0\uc218",project:"\ub2e8\ub3c5\uc8fc\ud0dd \uc2e0\ucd95",workplaceAddress:"\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \uc5ed\uc0bc\ub3d9 123-45",amount:85e5,status:"\ubc1c\uc1a1\ub428",date:"2024-09-01",dueDate:"2024-09-15",workItems:[{name:"\uae30\ucd08\uacf5\uc0ac",quantity:1,unitPrice:3e6,total:3e6,description:"\uac74\ubb3c \uae30\ucd08 \ubc0f \uc9c0\ubc18 \uc791\uc5c5",category:"\ud1a0\ubaa9\uacf5\uc0ac",notes:"\ucf58\ud06c\ub9ac\ud2b8 \uac15\ub3c4 \ud655\uc778 \ud544\uc694"},{name:"\uace8\uc870\uacf5\uc0ac",quantity:1,unitPrice:4e6,total:4e6,description:"\ucca0\uace8 \ubc0f \ucca0\uadfc\ucf58\ud06c\ub9ac\ud2b8 \uace8\uc870 \uc791\uc5c5",category:"\uad6c\uc870\uacf5\uc0ac",notes:"\ucca0\uadfc \uac04\uaca9 \uc801\uc815\uc131 \uac80\ud1a0 \ud544\uc694"},{name:"\ubd80\ub300\ube44\uc6a9",quantity:1,unitPrice:15e5,total:15e5,description:"\uc790\uc7ac\uc6b4\ubc18 \ubc0f \uae30\ud0c0 \ubd80\ub300\ube44\uc6a9",category:"\uae30\ud0c0",notes:"\uc6b4\ubc18 \ucc28\ub7c9 \uc811\uadfc\uc131 \ud655\uc778"}]},{id:"INV-2024-002",client:"\ubc15\uc601\ud76c",project:"\uc544\ud30c\ud2b8 \ub9ac\ubaa8\ub378\ub9c1",workplaceAddress:"\uc11c\uc6b8\uc2dc \uc11c\ucd08\uad6c \ubc18\ud3ec\ub3d9 \uc544\ud30c\ud2b8 101\ub3d9 503\ud638",amount:32e5,status:"\uacb0\uc81c\uc644\ub8cc",date:"2024-08-28",dueDate:"2024-09-12",workItems:[{name:"\ubcbd\uccb4 \ucca0\uac70",quantity:25,unitPrice:5e4,total:125e4,description:"\uae30\uc874 \ubcbd\uccb4 \ucca0\uac70 \ubc0f \ud3d0\uae30\ubb3c \ucc98\ub9ac",category:"\ucca0\uac70\uacf5\uc0ac",notes:"\uc18c\uc74c \ubc29\uc9c0\ub97c \uc704\ud574 \uc624\uc804 \uc791\uc5c5 \uad8c\uc7a5"},{name:"\ubc14\ub2e5 \uc2dc\uacf5",quantity:1,unitPrice:12e5,total:12e5,description:"\ubc14\ub2e5\uc7ac \uc124\uce58 \ubc0f \ub9c8\uac10 \uc791\uc5c5",category:"\ub9c8\uac10\uacf5\uc0ac",notes:"\ud559\ucd9c \ubc29\uc9c0\ub97c \uc704\ud55c \ub2e8\uc5f4 \ucc98\ub9ac \ud544\uc694"},{name:"\ub3c4\ubc30 \uc791\uc5c5",quantity:1,unitPrice:75e4,total:75e4,description:"\uc804\uccb4 \ubcbd\uba74 \ub3c4\ubc30",category:"\ub9c8\uac10\uacf5\uc0ac",notes:"\uc2b5\ub3c4 \uc870\uc808 \ud6c4 \uc2dc\uacf5"}]},{id:"INV-2024-003",client:"\uc774\ubbfc\ud638",project:"\uc0c1\uac00 \ub0b4\ubd80\uacf5\uc0ac",workplaceAddress:"\uc11c\uc6b8\uc2dc \ub9c8\ud3ec\uad6c \ud64d\ub300\uc785\uad6c \uc0c1\uac00 1\uce35",amount:58e5,status:"\ubbf8\uacb0\uc81c",date:"2024-08-25",dueDate:"2024-09-08",workItems:[{name:"\ub0b4\ubd80 \uce78\ub9c9\uc774",quantity:30,unitPrice:12e4,total:36e5,description:"\ub0b4\ubd80 \uce78\ub9c9\uc774\ubcbd \uc124\uce58",category:"\ub0b4\ubd80\uacf5\uc0ac",notes:"\uc18c\ubc29 \uaddc\uc815 \uc900\uc218 \ud655\uc778 \ud544\uc694"},{name:"\uc804\uae30\uacf5\uc0ac",quantity:1,unitPrice:15e5,total:15e5,description:"\uc804\uae30 \ubc30\uc120 \ubc0f \uc870\uba85 \uc124\uce58",category:"\uc124\ube44\uacf5\uc0ac",notes:"\uc804\uc555 \uc6a9\ub7c9 \uc0ac\uc804 \ud655\uc778 \ud544\uc694"},{name:"\ub9c8\uac10\uc7ac \uc124\uce58",quantity:1,unitPrice:7e5,total:7e5,description:"\ucc9c\uc7a5 \ubc0f \ubcbd\uba74 \ub9c8\uac10\uc7ac \uc124\uce58",category:"\ub9c8\uac10\uacf5\uc0ac",notes:"\ubc29\ud654 \uc790\uc7ac \uc0ac\uc6a9 \ud544\uc218"}]},{id:"INV-2024-004",client:"\uc815\uc218\uc9c4",project:"\ud654\uc7a5\uc2e4 \ub9ac\ubaa8\ub378\ub9c1",workplaceAddress:"\uacbd\uae30\ub3c4 \uc131\ub0a8\uc2dc \ubd84\ub2f9\uad6c \uc815\uc790\ub3d9 \uc544\ud30c\ud2b8 15\ub3d9 702\ud638",amount:15e5,status:"\ubc1c\uc1a1\ub300\uae30",date:"2024-08-22",dueDate:"2024-09-05",workItems:[{name:"\ud654\uc7a5\uc2e4 \ucca0\uac70",quantity:1,unitPrice:5e5,total:5e5,description:"\uae30\uc874 \ud654\uc7a5\uc2e4 \ucca0\uac70",category:"\ucca0\uac70\uacf5\uc0ac",notes:"\ubc29\uc218 \ucc98\ub9ac \uc0c1\ud0dc \ud655\uc778 \ud544\uc694"},{name:"\ud654\uc7a5\uc2e4 \uc124\uce58",quantity:1,unitPrice:1e6,total:1e6,description:"\uc0c8\ub85c\uc6b4 \ud654\uc7a5\uc2e4 \uc124\uce58 \ubc0f \ubc30\uad00",category:"\uc124\ube44\uacf5\uc0ac",notes:"\uae09\uc218 \uc555\ub825 \ud14c\uc2a4\ud2b8 \uc644\ub8cc"}]}],[u,h]=(0,n.useState)(()=>q(_,p)),g=[{id:"EST-2024-001",clientId:1,clientName:"\uae40\ucca0\uc218",workplaceId:1,workplaceName:"\uc2e0\ucd95 \uc8fc\ud0dd",workplaceAddress:"\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \uc5ed\uc0bc\ub3d9 123-45",projectName:"\ub2e8\ub3c5\uc8fc\ud0dd \uc2e0\ucd95",title:"\ub2e8\ub3c5\uc8fc\ud0dd \uc2e0\ucd95 \uacf5\uc0ac \uacac\uc801\uc11c",date:"2024-08-15",validUntil:"2024-09-15",status:"\uac80\ud1a0\uc911",totalAmount:85e6,items:[{id:1,category:"\ud1a0\ubaa9\uacf5\uc0ac",name:"\uae30\ucd08\uacf5\uc0ac",description:"\uac74\ubb3c \uae30\ucd08 \ubc0f \uc9c0\ubc18 \uc791\uc5c5",quantity:1,unit:"\uc2dd",unitPrice:3e7,total:3e7,notes:"\ucf58\ud06c\ub9ac\ud2b8 \uac15\ub3c4 \ud655\uc778 \ud544\uc694"},{id:2,category:"\uad6c\uc870\uacf5\uc0ac",name:"\uace8\uc870\uacf5\uc0ac",description:"\ucca0\uace8 \ubc0f \ucca0\uadfc\ucf58\ud06c\ub9ac\ud2b8 \uace8\uc870 \uc791\uc5c5",quantity:1,unit:"\uc2dd",unitPrice:4e7,total:4e7,notes:"\ucca0\uadfc \uac04\uaca9 \uc801\uc815\uc131 \uac80\ud1a0 \ud544\uc694"},{id:3,category:"\ub9c8\uac10\uacf5\uc0ac",name:"\ub0b4\uc678\ubd80 \ub9c8\uac10",description:"\ub0b4\ubd80 \ubc0f \uc678\ubd80 \ub9c8\uac10\uc7ac \uc2dc\uacf5",quantity:1,unit:"\uc2dd",unitPrice:15e6,total:15e6,notes:"\uace0\uae09 \ub9c8\uac10\uc7ac \uc801\uc6a9"}],notes:"\ubd80\uac00\uc138 \ubcc4\ub3c4, \uc124\uacc4 \ubcc0\uacbd \uc2dc \ucd94\uac00 \uacac\uc801 \ud544\uc694"},{id:"EST-2024-002",clientId:2,clientName:"\ubc15\uc601\ud76c",workplaceId:1,workplaceName:"\uc544\ud30c\ud2b8 \ub9ac\ubaa8\ub378\ub9c1",workplaceAddress:"\uc11c\uc6b8\uc2dc \uc11c\ucd08\uad6c \ubc18\ud3ec\ub3d9 \uc544\ud30c\ud2b8 101\ub3d9 503\ud638",projectName:"\uc544\ud30c\ud2b8 \ub9ac\ubaa8\ub378\ub9c1",title:"\uc544\ud30c\ud2b8 \uc804\uccb4 \ub9ac\ubaa8\ub378\ub9c1 \uacac\uc801\uc11c",date:"2024-08-10",validUntil:"2024-09-10",status:"\uc2b9\uc778\ub428",totalAmount:32e6,items:[{id:1,category:"\ucca0\uac70\uacf5\uc0ac",name:"\ubcbd\uccb4 \ucca0\uac70",description:"\uae30\uc874 \ubcbd\uccb4 \ucca0\uac70 \ubc0f \ud3d0\uae30\ubb3c \ucc98\ub9ac",quantity:25,unit:"\u33a1",unitPrice:5e5,total:125e5,notes:"\uc18c\uc74c \ubc29\uc9c0\ub97c \uc704\ud574 \uc624\uc804 \uc791\uc5c5 \uad8c\uc7a5"},{id:2,category:"\ub9c8\uac10\uacf5\uc0ac",name:"\ubc14\ub2e5 \ubc0f \ubcbd\uba74 \uc2dc\uacf5",description:"\ubc14\ub2e5\uc7ac \uc124\uce58 \ubc0f \ubcbd\uba74 \ub9c8\uac10 \uc791\uc5c5",quantity:1,unit:"\uc2dd",unitPrice:195e5,total:195e5,notes:"\uc2b5\ub3c4 \uc870\uc808 \ud6c4 \uc2dc\uacf5"}],notes:"\uacf5\uc0ac \uae30\uac04 \uc57d 30\uc77c \uc608\uc0c1"}],[b,f]=(0,n.useState)(()=>q(E,g)),j=["\uc2dd","\u33a1","\uac1c","\ud1a4","m","kg","\ud68c","\uc77c"],N=["\ud1a0\ubaa9\uacf5\uc0ac","\uad6c\uc870\uacf5\uc0ac","\ucca0\uac70\uacf5\uc0ac","\ub9c8\uac10\uacf5\uc0ac","\uc124\ube44\uacf5\uc0ac","\ub0b4\ubd80\uacf5\uc0ac","\uae30\ud0c0"],[I,W]=(0,n.useState)(()=>q(z,j)),[L,B]=(0,n.useState)(()=>q(R,N)),[O,T]=(0,n.useState)(()=>q(U,null));(0,n.useEffect)(()=>{D(A,r)},[r]),(0,n.useEffect)(()=>{D(C,d)},[d]),(0,n.useEffect)(()=>{D(P,x)},[x]),(0,n.useEffect)(()=>{D(_,u)},[u]),(0,n.useEffect)(()=>{D(E,b)},[b]),(0,n.useEffect)(()=>{D(z,I)},[I]),(0,n.useEffect)(()=>{D(R,L)},[L]),(0,n.useEffect)(()=>{D(U,O)},[O]),(0,n.useEffect)(()=>{!function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3;v=e,y&&clearTimeout(y),y=setTimeout(()=>{w(v)},t)}({companyInfo:r,clients:d,workItems:x,invoices:u,estimates:b,units:I,categories:L},1e3)},[r,d,x,u,b,I,L]);const M={companyInfo:r,setCompanyInfo:a,clients:d,setClients:o,workItems:x,setWorkItems:m,invoices:u,setInvoices:h,estimates:b,setEstimates:f,units:I,setUnits:W,categories:L,setCategories:B,stampImage:O,setStampImage:T,getCompletedWorkItems:()=>x.filter(e=>"\uc644\ub8cc"===e.status),getCompletedWorkItemsByClient:e=>x.filter(t=>t.clientId===e&&"\uc644\ub8cc"===t.status),addWorkItemToInvoice:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;const n=null!==t?t:e.quantity||1,r=s||e.defaultPrice,a=parseInt(e.laborPersons||0,10)||0,l=parseInt(e.laborUnitRate||0,10)||0,i=parseInt(e.laborPersonsGeneral||0,10)||0,d=parseInt(e.laborUnitRateGeneral||0,10)||0,o=a*l+i*d;return{name:e.name,quantity:n,unit:e.unit,unitPrice:r,total:n*r+o,laborPersons:a,laborUnitRate:l,laborPersonsGeneral:i,laborUnitRateGeneral:d,description:e.description,category:e.category,date:e.date||"",notes:e.notes||""}},convertEstimateToWorkItems:e=>{const t=b.find(t=>t.id===e);if(!t)return[];const s=t.items.map((e,s)=>({id:Math.max(...x.map(e=>e.id))+s+1,clientId:t.clientId,clientName:t.clientName,workplaceId:t.workplaceId,workplaceName:t.workplaceName,projectName:t.projectName,name:e.name,category:e.category,defaultPrice:e.unitPrice,quantity:e.quantity,unit:e.unit,description:e.description,status:"\uc608\uc815",date:(new Date).toISOString().split("T")[0],notes:e.notes||""}));return m(e=>[...e,...s]),f(t=>t.map(t=>t.id===e?(0,i.A)((0,i.A)({},t),{},{status:"\uc791\uc5c5 \uc804\ud658\ub428"}):t)),s}};return(0,k.jsx)(S.Provider,{value:M,children:t})};var L=s(109);const B=(0,n.createContext)(),O=()=>{const e=(0,n.useContext)(B);if(!e)throw new Error("useUser must be used within a UserProvider");return e},T=e=>{let{children:t}=e;const[s,r]=(0,n.useState)(null),[a,l]=(0,n.useState)(!1);(0,n.useEffect)(()=>{const e=[{id:1,username:"admin",password:"admin123",name:"\uad00\ub9ac\uc790",role:"admin"},{id:2,username:"manager",password:"manager123",name:"\ub9e4\ub2c8\uc800",role:"manager"},{id:3,username:"user",password:"user123",name:"\uc0ac\uc6a9\uc790",role:"user"}];localStorage.getItem("CMS_USERS")||localStorage.setItem("CMS_USERS",JSON.stringify(e));const t=sessionStorage.getItem("CURRENT_USER");t?(r(JSON.parse(t)),l(!0)):localStorage.removeItem("CURRENT_USER")},[]);const d=()=>{r(null),l(!1);try{sessionStorage.removeItem("CURRENT_USER")}catch(e){}try{localStorage.removeItem("CURRENT_USER")}catch(e){}try{localStorage.setItem("CMS_LOGOUT",String(Date.now())),localStorage.removeItem("CMS_LOGOUT")}catch(e){}},o=()=>JSON.parse(localStorage.getItem("CMS_USERS")||"[]"),c={currentUser:s,isLoggedIn:a,login:(e,t)=>{const s=JSON.parse(localStorage.getItem("CMS_USERS")||"[]").find(s=>s.username===e&&s.password===t);return s?(r(s),l(!0),sessionStorage.setItem("CURRENT_USER",JSON.stringify(s)),{success:!0,user:s}):{success:!1,error:"\uc544\uc774\ub514 \ub610\ub294 \ube44\ubc00\ubc88\ud638\uac00 \uc62c\ubc14\ub974\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."}},logout:d,getUserStorageKey:(e,t)=>"USER_".concat(e,"_").concat(t),getAllUsers:o,addUser:e=>{const t=o(),s=(0,i.A)((0,i.A)({},e),{},{id:Math.max(0,...t.map(e=>e.id))+1});return t.find(t=>t.username===e.username)?{success:!1,error:"\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc544\uc774\ub514\uc785\ub2c8\ub2e4."}:(t.push(s),localStorage.setItem("CMS_USERS",JSON.stringify(t)),{success:!0,user:s})},updateUser:(e,t)=>{const n=o(),a=n.findIndex(t=>t.id===e);if(-1===a)return{success:!1,error:"\uc0ac\uc6a9\uc790\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."};if(n.find(s=>s.username===t.username&&s.id!==e))return{success:!1,error:"\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uc544\uc774\ub514\uc785\ub2c8\ub2e4."};if(n[a]=(0,i.A)((0,i.A)({},n[a]),t),localStorage.setItem("CMS_USERS",JSON.stringify(n)),s&&s.id===e){const e=n[a];r(e),localStorage.setItem("CURRENT_USER",JSON.stringify(e))}return{success:!0,user:n[a]}},deleteUser:e=>{const t=o(),n=t.filter(t=>t.id!==e);return t.length===n.length?{success:!1,error:"\uc0ac\uc6a9\uc790\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."}:(localStorage.setItem("CMS_USERS",JSON.stringify(n)),s&&s.id===e&&d(),{success:!0})},isAdmin:()=>s&&"admin"===s.role};return(0,n.useEffect)(()=>{if(!a)return;let e;const t=()=>{clearTimeout(e),e=setTimeout(()=>{d()},36e5)},s=["mousemove","mousedown","keydown","scroll","touchstart"];return s.forEach(e=>window.addEventListener(e,t,{passive:!0})),t(),()=>{clearTimeout(e),s.forEach(e=>window.removeEventListener(e,t))}},[a]),(0,n.useEffect)(()=>{const e=e=>{if("CMS_LOGOUT"===e.key){r(null),l(!1);try{sessionStorage.removeItem("CURRENT_USER")}catch(t){}try{localStorage.removeItem("CURRENT_USER")}catch(t){}}};return window.addEventListener("storage",e),()=>window.removeEventListener("storage",e)},[]),(0,k.jsx)(B.Provider,{value:c,children:t})},M=()=>{const[e,t]=(0,n.useState)(""),[s,r]=(0,n.useState)(""),[a,l]=(0,n.useState)(""),[i,d]=(0,n.useState)(!1),{login:o}=O(),c=(0,L.Zp)();return(0,k.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:(0,k.jsxs)("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8",children:[(0,k.jsxs)("div",{className:"text-center mb-8",children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uac74\uc124 \uad00\ub9ac \uc2dc\uc2a4\ud15c"}),(0,k.jsx)("p",{className:"text-gray-600",children:"\ub85c\uadf8\uc778\ud558\uc5ec \uc2dc\uc791\ud558\uc138\uc694"})]}),(0,k.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),d(!0),l(""),!e||!s)return l("\uc544\uc774\ub514\uc640 \ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."),void d(!1);const n=o(e,s);n.success?n.user&&"admin"===n.user.role&&c("/admin"):l(n.error),d(!1)},className:"space-y-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc544\uc774\ub514"}),(0,k.jsx)("input",{id:"username",type:"text",value:e,onChange:e=>t(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\uc544\uc774\ub514\ub97c \uc785\ub825\ud558\uc138\uc694"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"\ube44\ubc00\ubc88\ud638"}),(0,k.jsx)("input",{id:"password",type:"password",value:s,onChange:e=>r(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694"})]}),a&&(0,k.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,k.jsx)("p",{className:"text-red-700 text-sm",children:a})}),(0,k.jsx)("button",{type:"submit",disabled:i,className:"w-full bg-blue-600 text-white py-2 px-4 rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:i?"\ub85c\uadf8\uc778 \uc911...":"\ub85c\uadf8\uc778"})]}),(0,k.jsxs)("div",{className:"mt-6 text-xs text-gray-500 text-center",children:[(0,k.jsx)("p",{children:"\uac74\uc124 \uad00\ub9ac \uc2dc\uc2a4\ud15c v1.0"}),(0,k.jsx)("p",{children:"\xa9 2025 Construction Management System"})]})]})})};var F=s(941),Y=s(386),H=s(773),K=s(623),G=s(747),J=s(22),V=s(792),X=s(940),Z=s(970);const Q=function(){const e=(0,L.zy)(),{currentUser:t,isAdmin:s,logout:r}=O(),[l,i]=(0,n.useState)(!1),d=(0,n.useRef)(null);(0,n.useEffect)(()=>{const e=e=>{d.current&&!d.current.contains(e.target)&&i(!1)},t=e=>{"Escape"===e.key&&i(!1)};return document.addEventListener("mousedown",e),document.addEventListener("keydown",t),()=>{document.removeEventListener("mousedown",e),document.removeEventListener("keydown",t)}},[]);const o=t=>e.pathname===t;return(0,k.jsx)("nav",{className:"bg-blue-600 text-white shadow-lg",children:(0,k.jsx)("div",{className:"max-w-screen-2xl mx-auto pl-0.5 pr-0.5",children:(0,k.jsxs)("div",{className:"flex items-center justify-between h-20",children:[(0,k.jsx)("div",{className:"flex items-center ml-0.5",children:s()?(0,k.jsxs)("div",{className:"text-xl font-bold flex items-center space-x-2 cursor-default select-none",children:[(0,k.jsx)(F.A,{className:"h-8 w-8"}),(0,k.jsx)("span",{children:"\uac74\ucd95 \uacac\uc801/\uccad\uad6c \uc2dc\uc2a4\ud15c"})]}):(0,k.jsxs)(a.N_,{to:"/",className:"text-xl font-bold flex items-center space-x-2",children:[(0,k.jsx)(F.A,{className:"h-8 w-8"}),(0,k.jsx)("span",{children:"\uac74\ucd95 \uacac\uc801/\uccad\uad6c \uc2dc\uc2a4\ud15c"})]})}),(0,k.jsx)("div",{className:"hidden md:block",children:s()?(0,k.jsx)("div",{className:"ml-6 md:ml-8 lg:ml-10"}):(0,k.jsxs)("div",{className:"ml-2 md:ml-4 lg:ml-6 flex items-baseline space-x-3 md:space-x-4 lg:space-x-6",children:[(0,k.jsxs)(a.N_,{to:"/",className:"px-2 md:px-3 py-2 rounded-md text-xs md:text-sm font-medium flex items-center space-x-1 ".concat(o("/")?"bg-blue-700 text-white":"text-blue-100 hover:bg-blue-500 hover:text-white"),children:[(0,k.jsx)(Y.A,{className:"h-5 w-5"}),(0,k.jsx)("span",{children:"\ub300\uc2dc\ubcf4\ub4dc"})]}),(0,k.jsxs)(a.N_,{to:"/estimates",className:"px-2 md:px-3 py-2 rounded-md text-xs md:text-sm font-medium flex items-center space-x-1 ".concat(o("/estimates")?"bg-blue-700 text-white":"text-blue-100 hover:bg-blue-500 hover:text-white"),children:[(0,k.jsx)(H.A,{className:"h-5 w-5"}),(0,k.jsx)("span",{children:"\uacac\uc801\uc11c \uad00\ub9ac"})]}),(0,k.jsxs)(a.N_,{to:"/invoices",className:"px-2 md:px-3 py-2 rounded-md text-xs md:text-sm font-medium flex items-center space-x-1 ".concat(o("/invoices")?"bg-blue-700 text-white":"text-blue-100 hover:bg-blue-500 hover:text-white"),children:[(0,k.jsx)(K.A,{className:"h-5 w-5"}),(0,k.jsx)("span",{children:"\uccad\uad6c\uc11c \uad00\ub9ac"})]}),(0,k.jsxs)(a.N_,{to:"/clients",className:"px-2 md:px-3 py-2 rounded-md text-xs md:text-sm font-medium flex items-center space-x-1 ".concat(o("/clients")?"bg-blue-700 text-white":"text-blue-100 hover:bg-blue-500 hover:text-white"),children:[(0,k.jsx)(G.A,{className:"h-5 w-5"}),(0,k.jsx)("span",{children:"\uac74\ucd95\uc8fc \uad00\ub9ac"})]}),(0,k.jsxs)(a.N_,{to:"/work-items",className:"px-2 md:px-3 py-2 rounded-md text-xs md:text-sm font-medium flex items-center space-x-1 ".concat(o("/work-items")?"bg-blue-700 text-white":"text-blue-100 hover:bg-blue-500 hover:text-white"),children:[(0,k.jsx)(J.A,{className:"h-5 w-5"}),(0,k.jsx)("span",{children:"\uc791\uc5c5 \ud56d\ubaa9 \uad00\ub9ac"})]}),(0,k.jsxs)(a.N_,{to:"/company-info",className:"px-2 md:px-3 py-2 rounded-md text-xs md:text-sm font-medium flex items-center space-x-1 ".concat(o("/company-info")?"bg-blue-700 text-white":"text-blue-100 hover:bg-blue-500 hover:text-white"),children:[(0,k.jsx)(V.A,{className:"h-5 w-5"}),(0,k.jsx)("span",{children:"\ud658\uacbd\uc124\uc815"})]})]})}),(0,k.jsxs)("div",{className:"relative mr-0.5",ref:d,children:[(0,k.jsx)("button",{onClick:()=>i(!l),className:"flex items-center space-x-2 px-3 py-2 rounded-md text-blue-100 hover:bg-blue-500 hover:text-white",children:s()?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(X.A,{className:"h-5 w-5","aria-label":"\uad00\ub9ac\uc790"}),(0,k.jsx)("span",{children:"\uad00\ub9ac\uc790"})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(Z.A,{className:"h-5 w-5","aria-label":"\uc0ac\uc6a9\uc790"}),(0,k.jsx)("span",{children:(null===t||void 0===t?void 0:t.name)||(null===t||void 0===t?void 0:t.username)})]})}),l&&(0,k.jsx)("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-md shadow-lg z-50 border border-gray-200",children:(0,k.jsxs)("div",{className:"py-2",children:[(0,k.jsxs)("div",{className:"px-4 pb-2 text-sm text-gray-700 border-b border-gray-100",children:[(0,k.jsx)("p",{className:"font-medium",children:null===t||void 0===t?void 0:t.name}),(0,k.jsx)("p",{className:"text-gray-500",children:null===t||void 0===t?void 0:t.username}),(0,k.jsxs)("p",{className:"text-xs text-gray-400 mt-1",children:["\uc5ed\ud560: ","admin"===(null===t||void 0===t?void 0:t.role)?"\uad00\ub9ac\uc790":"manager"===(null===t||void 0===t?void 0:t.role)?"\ub9e4\ub2c8\uc800":"\uc0ac\uc6a9\uc790"]})]}),(0,k.jsx)("button",{onClick:()=>{i(!1),r()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-gray-50",children:"\ub85c\uadf8\uc544\uc6c3"})]})})]})]})})})};const $=function(){const{invoices:e,clients:t,companyInfo:s,workItems:r,estimates:l,units:i,categories:d,stampImage:o,setCompanyInfo:c,setClients:x,setWorkItems:m,setInvoices:p,setEstimates:u,setUnits:h,setCategories:g,setStampImage:b}=I(),f=(0,n.useRef)(null),j=e=>"\u20a9".concat((e||0).toLocaleString()),y=(0,n.useMemo)(()=>(e||[]).slice().sort((e,t)=>(t.date||"").localeCompare(e.date||"")).slice(0,5),[e]),v=(0,n.useMemo)(()=>(e||[]).reduce((e,t)=>e+(t.amount||0),0),[e]),N=(0,n.useMemo)(()=>(e||[]).filter(e=>"\uacb0\uc81c\uc644\ub8cc"===e.status).reduce((e,t)=>e+(t.amount||0),0),[e]),w=v-N,S=[{title:"\uc804\uccb4 \uccad\uad6c\uc561",value:j(v),color:"bg-blue-500",icon:"\ud83d\udcc4"},{title:"\ubbf8\uc218\uae08(\uc694\uc57d)",value:j(w),color:"bg-orange-500",icon:"\ud83d\udcb0"},{title:"\uacb0\uc81c\uc644\ub8cc",value:j(N),color:"bg-green-500",icon:"\u2705"},{title:"\ub4f1\ub85d\ub41c \uac74\ucd95\uc8fc",value:String((t||[]).length),color:"bg-purple-500",icon:"\ud83d\udc65",href:"/clients"}];return(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"mb-8 flex items-start justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\ub300\uc2dc\ubcf4\ub4dc"}),(0,k.jsx)("p",{className:"text-gray-600",children:"\uccad\uad6c\uc11c \ubc1c\ud589 \ud604\ud669\uc744 \ud55c\ub208\uc5d0 \ud655\uc778\ud558\uc138\uc694"})]}),(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("button",{onClick:()=>{const n={meta:{exportedAt:(new Date).toISOString(),app:"Construction Management System"},companyInfo:s,clients:t,workItems:r,invoices:e,estimates:l,units:i,categories:d,stampImage:o},a=new Blob([JSON.stringify(n,null,2)],{type:"application/json;charset=utf-8"}),c=URL.createObjectURL(a),x=document.createElement("a"),m=(new Date).toISOString().replace(/[:.]/g,"-");x.href=c,x.download="cms-backup-".concat(m,".json"),x.click(),URL.revokeObjectURL(c)},className:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium px-4 py-2 rounded-md",title:"\ubaa8\ub4e0 \ub370\uc774\ud130\ub97c JSON\uc73c\ub85c \uc800\uc7a5",children:"\ud83d\udcbe \ubc31\uc5c5"}),(0,k.jsx)("input",{ref:f,type:"file",accept:"application/json",onChange:async e=>{var t;const s=null===(t=e.target.files)||void 0===t?void 0:t[0];if(s)try{const e=await s.text(),t=JSON.parse(e);t.companyInfo&&c(t.companyInfo),Array.isArray(t.clients)&&x(t.clients),Array.isArray(t.workItems)&&m(t.workItems),Array.isArray(t.invoices)&&p(t.invoices),Array.isArray(t.estimates)&&u(t.estimates),Array.isArray(t.units)&&h(t.units),Array.isArray(t.categories)&&g(t.categories),void 0!==t.stampImage&&b(t.stampImage),alert("\ub370\uc774\ud130 \ubcf5\uc6d0\uc774 \uc644\ub8cc\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(n){console.error("\ubcf5\uc6d0 \uc624\ub958:",n),alert("\ubcf5\uc6d0 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4. \uc62c\ubc14\ub978 \ubc31\uc5c5 \ud30c\uc77c\uc778\uc9c0 \ud655\uc778\ud558\uc138\uc694.")}finally{f.current&&(f.current.value="")}},className:"hidden"}),(0,k.jsx)("button",{onClick:()=>{var e;return null===(e=f.current)||void 0===e?void 0:e.click()},className:"bg-gray-200 hover:bg-gray-300 text-gray-700 font-medium px-4 py-2 rounded-md",title:"\ubc31\uc5c5 JSON\uc5d0\uc11c \ubcf5\uc6d0",children:"\u267b\ufe0f \ubcf5\uc6d0"})]})]}),(0,k.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:S.map((e,t)=>{const s="\uc804\uccb4 \uccad\uad6c\uc561"===e.title||"\uacb0\uc81c\uc644\ub8cc"===e.title||"\ubbf8\uc218\uae08(\uc694\uc57d)"===e.title||"\ub4f1\ub85d\ub41c \uac74\ucd95\uc8fc"===e.title?"text-xl":"text-3xl",n=(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6 hover:shadow-md transition-shadow",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:e.title}),(0,k.jsx)("p",{className:"".concat(s," font-bold text-gray-900"),children:e.value})]}),(0,k.jsx)("div",{className:"".concat(e.color," rounded-full p-3 text-white text-2xl"),children:e.icon})]})});return(0,k.jsx)("div",{className:"rounded-lg",children:e.href?(0,k.jsx)(a.N_,{to:e.href,"aria-label":"".concat(e.title," \uc790\uc138\ud788 \ubcf4\uae30"),className:"block focus:outline-none focus:ring-2 focus:ring-primary-500 rounded-lg",children:n}):n},t)})}),(0,k.jsx)("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 text-yellow-800 rounded-md px-4 py-3",children:"\uc791\uc5c5 \uc885\ub8cc \uc2dc \uc0c1\ub2e8\uc758 \u2018\ubc31\uc5c5\u2019 \ubc84\ud2bc\uc744 \ub20c\ub7ec \ub370\uc774\ud130\ub97c \ubcf4\uad00\ud558\uc138\uc694. \ubcf5\uc6d0\uc774 \ud544\uc694\ud55c \uacbd\uc6b0 \u2018\ubcf5\uc6d0\u2019 \ubc84\ud2bc\uc744 \ud1b5\ud574 \ubc31\uc5c5 \ud30c\uc77c\uc744 \uc120\ud0dd\ud558\uba74 \ub429\ub2c8\ub2e4."}),(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,k.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\ucd5c\uadfc \uccad\uad6c\uc11c"})}),(0,k.jsx)("div",{className:"p-6",children:(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"min-w-full",children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{className:"border-b border-gray-200",children:[(0,k.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"\uac74\ucd95\uc8fc"}),(0,k.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"\ud504\ub85c\uc81d\ud2b8"}),(0,k.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"\uae08\uc561"}),(0,k.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"\uc0c1\ud0dc"}),(0,k.jsx)("th",{className:"text-left py-2 text-sm font-medium text-gray-600",children:"\ub0a0\uc9dc"})]})}),(0,k.jsx)("tbody",{children:y.map(e=>(0,k.jsxs)("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[(0,k.jsx)("td",{className:"py-3 text-sm text-gray-900",children:e.client}),(0,k.jsx)("td",{className:"py-3 text-sm text-gray-900",children:e.project}),(0,k.jsx)("td",{className:"py-3 text-sm font-medium text-gray-900",children:j(e.amount)}),(0,k.jsx)("td",{className:"py-3",children:(0,k.jsx)("span",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("\uacb0\uc81c\uc644\ub8cc"===e.status?"bg-green-100 text-green-800":"\ubc1c\uc1a1\ub428"===e.status?"bg-blue-100 text-blue-800":"\ubbf8\uacb0\uc81c"===e.status?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"),children:e.status})}),(0,k.jsx)("td",{className:"py-3 text-sm text-gray-600",children:e.date})]},e.id))})]})})})]})]})},ee=e=>{if(0===e)return"\uc601";const t=["","\uc77c","\uc774","\uc0bc","\uc0ac","\uc624","\uc721","\uce60","\ud314","\uad6c"],s=["","\uc2ed","\ubc31","\ucc9c"],n=["","\ub9cc","\uc5b5","\uc870"],r=e=>{let n="";const r=e.toString().split("").map(Number);for(let a=0;a<r.length;a++){const e=r[a],l=r.length-1-a;0!==e&&(1===e&&1===l&&r.length>1?n+=s[l]:n+=t[e]+s[l])}return n};let a="",l=[],i=Math.abs(e);for(;i>0;)l.unshift(i%1e4),i=Math.floor(i/1e4);for(let d=0;d<l.length;d++){const e=l[d];if(0===e)continue;a+=r(e)+n[l.length-1-d]}return(e<0?"\ub9c8\uc774\ub108\uc2a4 ":"")+a},te=e=>{const t=e.map(e=>({ID:e.id,"\uc774\ub984":e.name,"\uc804\ud654\ubc88\ud638":e.phone,"\uc774\uba54\uc77c":e.email,"\uc8fc\uc18c":e.address,"\ud504\ub85c\uc81d\ud2b8":e.projects.join(", "),"\ucd1d \uccad\uad6c\uae08\uc561":e.totalBilled,"\ubbf8\uc218\uae08":e.outstanding,"\ube44\uace0":e.notes})),s=j.Wp.json_to_sheet(t),n=j.Wp.book_new();j.Wp.book_append_sheet(n,s,"\uac74\ucd95\uc8fc \ubaa9\ub85d"),s["!cols"]=[{width:8},{width:15},{width:15},{width:25},{width:30},{width:20},{width:15},{width:15},{width:30}],j._h(n,"\uac74\ucd95\uc8fc_\ubaa9\ub85d.xlsx")},se=e=>{const t=e.map(e=>({ID:e.id,"\uac74\ucd95\uc8fc":e.clientName,"\uc791\uc5c5\uc7a5":e.workplaceName,"\ud504\ub85c\uc81d\ud2b8":e.projectName,"\ub0b4\uc6a9":e.name,"\uce74\ud14c\uace0\ub9ac":e.category,"\uae30\ubcf8\ub2e8\uac00":e.defaultPrice,"\uc218\ub7c9":e.quantity||1,"\ub2e8\uc704":e.unit,"\ucd1d\uae08\uc561":(e.defaultPrice||0)*(e.quantity||1),"\uc778\ubd80\uc778\uc6d0":e.laborPersons||"","\uc778\ubd80\ub2e8\uac00":e.laborUnitRate||"","\uc778\ubd80\ube44":(parseInt(e.laborPersons||0,10)||0)*(parseInt(e.laborUnitRate||0,10)||0),"\ucd1d\uae08\uc561(\uc778\ubd80\ud3ec\ud568)":(e.defaultPrice||0)*(e.quantity||1)+(parseInt(e.laborPersons||0,10)||0)*(parseInt(e.laborUnitRate||0,10)||0),"\uc138\ubd80\uc791\uc5c5":e.description,"\uc0c1\ud0dc":e.status,"\ub0a0\uc9dc":e.date,"\ube44\uace0":e.notes})),s=j.Wp.json_to_sheet(t),n=j.Wp.book_new();j.Wp.book_append_sheet(n,s,"\uc791\uc5c5 \ud56d\ubaa9"),s["!cols"]=[{width:8},{width:12},{width:20},{width:15},{width:15},{width:12},{width:15},{width:8},{width:8},{width:15},{width:10},{width:15},{width:15},{width:18},{width:30},{width:10},{width:12},{width:25}],j._h(n,"\uc791\uc5c5_\ud56d\ubaa9.xlsx")},ne=e=>{const t=e.map(e=>({"\uccad\uad6c\uc11c\ubc88\ud638":e.id,"\uac74\ucd95\uc8fc":e.client,"\ud504\ub85c\uc81d\ud2b8":e.project,"\uc791\uc5c5\uc7a5\uc8fc\uc18c":e.workplaceAddress,"\uccad\uad6c\uae08\uc561":e.amount,"\uc0c1\ud0dc":e.status,"\ubc1c\ud589\uc77c":e.date,"\uc9c0\ubd88\uae30\ud55c":e.dueDate,"\uc791\uc5c5\ud56d\ubaa9\uc218":e.workItems.length})),s=j.Wp.json_to_sheet(t),n=j.Wp.book_new();j.Wp.book_append_sheet(n,s,"\uccad\uad6c\uc11c \ubaa9\ub85d"),s["!cols"]=[{width:15},{width:12},{width:15},{width:35},{width:15},{width:12},{width:12},{width:12},{width:12}],j._h(n,"\uccad\uad6c\uc11c_\ubaa9\ub85d.xlsx")},re=e=>{const t=e.map(e=>({"\uacac\uc801\uc11c\ubc88\ud638":e.id,"\uac74\ucd95\uc8fc":e.clientName,"\ud504\ub85c\uc81d\ud2b8":e.projectName,"\uc791\uc5c5\uc7a5\uc8fc\uc18c":e.workplaceAddress,"\uacac\uc801\uae08\uc561":e.totalAmount,"\uc0c1\ud0dc":e.status,"\ubc1c\ud589\uc77c":e.date,"\uc720\ud6a8\uae30\ud55c":e.validUntil,"\uc791\uc5c5\ud56d\ubaa9\uc218":e.items?e.items.length:0})),s=j.Wp.json_to_sheet(t),n=j.Wp.book_new();j.Wp.book_append_sheet(n,s,"\uacac\uc801\uc11c \ubaa9\ub85d"),s["!cols"]=[{width:15},{width:12},{width:15},{width:35},{width:15},{width:12},{width:12},{width:12},{width:12}],j._h(n,"\uacac\uc801\uc11c_\ubaa9\ub85d.xlsx")},ae={clients:e=>new Promise((t,s)=>{const n=new FileReader;n.onload=e=>{try{const s=new Uint8Array(e.target.result),n=j.LF(s,{type:"array"}),r=n.Sheets[n.SheetNames[0]],a=j.Wp.sheet_to_json(r).map((e,t)=>({id:e.ID||t+1,name:e["\uc774\ub984"]||"",phone:e["\uc804\ud654\ubc88\ud638"]||"",email:e["\uc774\uba54\uc77c"]||"",address:e["\uc8fc\uc18c"]||"",projects:e["\ud504\ub85c\uc81d\ud2b8"]?e["\ud504\ub85c\uc81d\ud2b8"].split(", "):[],totalBilled:e["\ucd1d \uccad\uad6c\uae08\uc561"]||0,outstanding:e["\ubbf8\uc218\uae08"]||0,notes:e["\ube44\uace0"]||"",workplaces:[]}));t(a)}catch(n){s(n)}},n.readAsArrayBuffer(e)}),workItems:e=>new Promise((t,s)=>{const n=new FileReader;n.onload=e=>{try{const s=new Uint8Array(e.target.result),n=j.LF(s,{type:"array"}),r=n.Sheets[n.SheetNames[0]],a=j.Wp.sheet_to_json(r).map((e,t)=>{var s,n,r,a;return{id:e.ID||t+1,clientId:e["\uac74\ucd95\uc8fcID"]||1,clientName:e["\uac74\ucd95\uc8fc"]||"",workplaceId:e["\uc791\uc5c5\uc7a5ID"]||1,workplaceName:e["\uc791\uc5c5\uc7a5"]||"",projectName:e["\ud504\ub85c\uc81d\ud2b8"]||"",name:e["\ub0b4\uc6a9"]||"",category:e["\uce74\ud14c\uace0\ub9ac"]||"",defaultPrice:e["\uae30\ubcf8\ub2e8\uac00"]||0,quantity:e["\uc218\ub7c9"]||1,unit:e["\ub2e8\uc704"]||"",description:e["\uc138\ubd80\uc791\uc5c5"]||"",status:e["\uc0c1\ud0dc"]||"\uc608\uc815",date:e["\ub0a0\uc9dc"]||(new Date).toISOString().split("T")[0],notes:e["\ube44\uace0"]||"",laborPersons:null!==(s=null!==(n=e["\uc778\ubd80\uc778\uc6d0"])&&void 0!==n?n:e.LaborPersons)&&void 0!==s?s:"",laborUnitRate:null!==(r=null!==(a=e["\uc778\ubd80\ub2e8\uac00"])&&void 0!==a?a:e.LaborUnitRate)&&void 0!==r?r:""}});t(a)}catch(n){s(n)}},n.readAsArrayBuffer(e)}),estimates:e=>new Promise((t,s)=>{const n=new FileReader;n.onload=e=>{try{const s=new Uint8Array(e.target.result),n=j.LF(s,{type:"array"}),r=n.Sheets[n.SheetNames[0]],a=j.Wp.sheet_to_json(r).map((e,t)=>({id:e["\uacac\uc801\uc11c\ubc88\ud638"]||"EST-".concat(Date.now(),"-").concat(t+1),clientName:e["\uac74\ucd95\uc8fc"]||"",projectName:e["\ud504\ub85c\uc81d\ud2b8"]||"",workplaceAddress:e["\uc791\uc5c5\uc7a5\uc8fc\uc18c"]||"",totalAmount:e["\uacac\uc801\uae08\uc561"]||0,status:e["\uc0c1\ud0dc"]||"\uc791\uc131\uc911",date:e["\ubc1c\ud589\uc77c"]||(new Date).toISOString().split("T")[0],validUntil:e["\uc720\ud6a8\uae30\ud55c"]||"",items:[],notes:e["\ube44\uace0"]||""}));t(a)}catch(n){s(n)}},n.readAsArrayBuffer(e)})},le=()=>{const e=j.Wp.json_to_sheet([{ID:1,"\uc774\ub984":"\uc608\uc2dc\uac74\ucd95\uc8fc","\uc804\ud654\ubc88\ud638":"010-1234-5678","\uc774\uba54\uc77c":"example@email.com","\uc8fc\uc18c":"\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \ud14c\ud5e4\ub780\ub85c 123","\ud504\ub85c\uc81d\ud2b8":"\uc8fc\ud0dd \uc2e0\ucd95, \ub9ac\ubaa8\ub378\ub9c1","\ucd1d \uccad\uad6c\uae08\uc561":15e6,"\ubbf8\uc218\uae08":5e6,"\ube44\uace0":"\uc6b0\uc218 \uace0\uac1d"}]),t=j.Wp.book_new();j.Wp.book_append_sheet(t,e,"\uac74\ucd95\uc8fc \ud15c\ud50c\ub9bf"),e["!cols"]=[{width:8},{width:15},{width:15},{width:25},{width:30},{width:20},{width:15},{width:15},{width:30}],j._h(t,"\uac74\ucd95\uc8fc_\ud15c\ud50c\ub9bf.xlsx")},ie=()=>{const e=j.Wp.json_to_sheet([{ID:1,"\uac74\ucd95\uc8fcID":1,"\uac74\ucd95\uc8fc":"\uc608\uc2dc\uac74\ucd95\uc8fc","\uc791\uc5c5\uc7a5ID":1,"\uc791\uc5c5\uc7a5":"\uc2e0\ucd95 \ud604\uc7a5","\ud504\ub85c\uc81d\ud2b8":"\uc8fc\ud0dd \uc2e0\ucd95","\ub0b4\uc6a9":"\uae30\ucd08\uacf5\uc0ac","\uce74\ud14c\uace0\ub9ac":"\ud1a0\ubaa9\uacf5\uc0ac","\uae30\ubcf8\ub2e8\uac00":3e6,"\uc218\ub7c9":1,"\ub2e8\uc704":"\uc2dd","\ucd1d\uae08\uc561":3e6,"\uc778\ubd80\uc778\uc6d0":2,"\uc778\ubd80\ub2e8\uac00":2e5,"\uc778\ubd80\ube44":4e5,"\ucd1d\uae08\uc561(\uc778\ubd80\ud3ec\ud568)":34e5,"\uc138\ubd80\uc791\uc5c5":"\uac74\ubb3c \uae30\ucd08 \ubc0f \uc9c0\ubc18 \uc791\uc5c5","\uc0c1\ud0dc":"\uc644\ub8cc","\ub0a0\uc9dc":"2024-09-01","\ube44\uace0":"\ucf58\ud06c\ub9ac\ud2b8 \uac15\ub3c4 \ud655\uc778 \ud544\uc694"}]),t=j.Wp.book_new();j.Wp.book_append_sheet(t,e,"\uc791\uc5c5\ud56d\ubaa9 \ud15c\ud50c\ub9bf"),e["!cols"]=[{width:8},{width:10},{width:12},{width:10},{width:20},{width:15},{width:15},{width:12},{width:15},{width:8},{width:8},{width:15},{width:10},{width:15},{width:15},{width:18},{width:30},{width:10},{width:12},{width:25}],j._h(t,"\uc791\uc5c5\ud56d\ubaa9_\ud15c\ud50c\ub9bf.xlsx")},de=()=>{const e=j.Wp.json_to_sheet([{"\uacac\uc801\uc11c\ubc88\ud638":"EST-2024-001","\uac74\ucd95\uc8fc":"\uc608\uc2dc\uac74\ucd95\uc8fc","\ud504\ub85c\uc81d\ud2b8":"\uc8fc\ud0dd \uc2e0\ucd95","\uc791\uc5c5\uc7a5\uc8fc\uc18c":"\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \ud14c\ud5e4\ub780\ub85c 123","\uacac\uc801\uae08\uc561":5e7,"\uc0c1\ud0dc":"\uc791\uc131\uc911","\ubc1c\ud589\uc77c":"2024-09-01","\uc720\ud6a8\uae30\ud55c":"2024-10-01","\uc791\uc5c5\ud56d\ubaa9\uc218":5,"\ube44\uace0":"\ucd08\uae30 \uacac\uc801\uc11c"}]),t=j.Wp.book_new();j.Wp.book_append_sheet(t,e,"\uacac\uc801\uc11c \ud15c\ud50c\ub9bf"),e["!cols"]=[{width:15},{width:12},{width:15},{width:35},{width:15},{width:12},{width:12},{width:12},{width:12},{width:25}],j._h(t,"\uacac\uc801\uc11c_\ud15c\ud50c\ub9bf.xlsx")},oe=()=>{const e=j.Wp.json_to_sheet([{"\uccad\uad6c\uc11c\ubc88\ud638":"INV-2024-001","\uac74\ucd95\uc8fc":"\uc608\uc2dc\uac74\ucd95\uc8fc","\ud504\ub85c\uc81d\ud2b8":"\uc8fc\ud0dd \uc2e0\ucd95","\uc791\uc5c5\uc7a5\uc8fc\uc18c":"\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \ud14c\ud5e4\ub780\ub85c 123","\uccad\uad6c\uae08\uc561":1e7,"\uc0c1\ud0dc":"\ubc1c\uc1a1\ub428","\ubc1c\ud589\uc77c":"2024-09-01","\ub0a9\uae30\uc77c":"2024-09-15","\uc791\uc5c5\ud56d\ubaa9\uc218":3,"\ube44\uace0":"1\ucc28 \uccad\uad6c\uc11c"}]),t=j.Wp.book_new();j.Wp.book_append_sheet(t,e,"\uccad\uad6c\uc11c \ud15c\ud50c\ub9bf"),e["!cols"]=[{width:15},{width:12},{width:15},{width:35},{width:15},{width:12},{width:12},{width:12},{width:12},{width:25}],j._h(t,"\uccad\uad6c\uc11c_\ud15c\ud50c\ub9bf.xlsx")};const ce=function(){const{clients:e,invoices:t,setInvoices:s,companyInfo:r,workItems:a,stampImage:l,units:d}=I(),[o,c]=(0,n.useState)([]),[x,m]=(0,n.useState)(!1),[p,u]=(0,n.useState)(""),[h,g]=(0,n.useState)(""),b=(0,n.useMemo)(()=>{const s=(s=>{if(!p)return t;const n=parseInt(p),r=null===(s=e.find(e=>e.id===n))||void 0===s?void 0:s.name;return t.filter(e=>!(!e.clientId||e.clientId!==n)||!(!r||e.client!==r))})();return h?s.filter(e=>e.status===h):s},[t,p,h,e]),f=b.map(e=>e.id),j=o.length>0&&o.length===f.length,y=e=>e||0===e?e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","):"",[v]=(0,n.useState)([{id:1,name:"\uae30\ucd08\uacf5\uc0ac",category:"\ud1a0\ubaa9\uacf5\uc0ac",defaultPrice:3e6,unit:"\uc2dd",description:"\uac74\ubb3c \uae30\ucd08 \ubc0f \uc9c0\ubc18 \uc791\uc5c5"},{id:2,name:"\uace8\uc870\uacf5\uc0ac",category:"\uad6c\uc870\uacf5\uc0ac",defaultPrice:4e6,unit:"\uc2dd",description:"\ucca0\uace8 \ubc0f \ucca0\uadfc\ucf58\ud06c\ub9ac\ud2b8 \uace8\uc870 \uc791\uc5c5"},{id:3,name:"\ubcbd\uccb4 \ucca0\uac70",category:"\ucca0\uac70\uacf5\uc0ac",defaultPrice:8e5,unit:"\u33a1",description:"\uae30\uc874 \ubcbd\uccb4 \ucca0\uac70 \ubc0f \ud3d0\uae30\ubb3c \ucc98\ub9ac"},{id:4,name:"\ubc14\ub2e5 \uc2dc\uacf5",category:"\ub9c8\uac10\uacf5\uc0ac",defaultPrice:12e5,unit:"\u33a1",description:"\ubc14\ub2e5\uc7ac \uc124\uce58 \ubc0f \ub9c8\uac10 \uc791\uc5c5"},{id:5,name:"\ub0b4\ubd80 \uce78\ub9c9\uc774",category:"\ub0b4\ubd80\uacf5\uc0ac",defaultPrice:2e6,unit:"\u33a1",description:"\ub0b4\ubd80 \uce78\ub9c9\uc774\ubcbd \uc124\uce58"},{id:6,name:"\uc804\uae30\uacf5\uc0ac",category:"\uc124\ube44\uacf5\uc0ac",defaultPrice:15e5,unit:"\uc2dd",description:"\uc804\uae30 \ubc30\uc120 \ubc0f \uc870\uba85 \uc124\uce58"},{id:7,name:"\ud654\uc7a5\uc2e4 \ucca0\uac70",category:"\ucca0\uac70\uacf5\uc0ac",defaultPrice:5e5,unit:"\uc2dd",description:"\uae30\uc874 \ud654\uc7a5\uc2e4 \ucca0\uac70"},{id:8,name:"\ud654\uc7a5\uc2e4 \uc124\uce58",category:"\uc124\ube44\uacf5\uc0ac",defaultPrice:1e6,unit:"\uc2dd",description:"\uc0c8\ub85c\uc6b4 \ud654\uc7a5\uc2e4 \uc124\uce58 \ubc0f \ubc30\uad00"},{id:9,name:"\ub3c4\ubc30 \ubc0f \ud398\uc778\ud2b8",category:"\ub9c8\uac10\uacf5\uc0ac",defaultPrice:8e5,unit:"\u33a1",description:"\ubcbd\uba74 \ub3c4\ubc30 \ubc0f \ud398\uc778\ud2b8 \uc791\uc5c5"},{id:10,name:"\ud0c0\uc77c \uc2dc\uacf5",category:"\ub9c8\uac10\uacf5\uc0ac",defaultPrice:1e6,unit:"\u33a1",description:"\ubc14\ub2e5 \ubc0f \ubcbd\uba74 \ud0c0\uc77c \uc2dc\uacf5"}]),[N,w]=(0,n.useState)(!1),[S,A]=(0,n.useState)(null),[C,P]=(0,n.useState)(null),[_,E]=(0,n.useState)({clientId:"",client:"",workplaceId:"",project:"",workplaceAddress:"",workItems:[{name:"",quantity:1,unit:"",unitPrice:0,total:0,templateId:"",date:"",notes:""}]}),z=(0,n.useRef)();(0,n.useEffect)(()=>{if(C){const e=setTimeout(()=>{P(null),console.log("Auto-reset printInvoice state")},3e3);return()=>clearTimeout(e)}},[C]);const R=t=>{const{name:s,value:n}=t.target;E(t=>{const r=(0,i.A)((0,i.A)({},t),{},{[s]:n});if("clientId"===s){const t=e.find(e=>e.id===parseInt(n));r.client=(null===t||void 0===t?void 0:t.name)||"",r.workplaceId="",r.workplaceAddress=""}if("workplaceId"===s){const s=e.find(e=>e.id===parseInt(t.clientId)),a=null===s||void 0===s?void 0:s.workplaces.find(e=>e.id===parseInt(n));r.workplaceAddress=(null===a||void 0===a?void 0:a.address)||"",!r.project&&null!==a&&void 0!==a&&a.description&&(r.project=a.description)}return r})},U=(e,t,s)=>{const n=[..._.workItems];if("templateId"===t&&s){const t=v.find(e=>e.id===parseInt(s));if(t){n[e].name=t.name,n[e].templateId=parseInt(s),n[e].unit=t.unit||n[e].unit||"";const r=a.find(e=>e.name===t.name);r&&r.notes&&(n[e].notes=r.notes)}}else if("name"===t&&""===s)n[e].templateId="";else if("quantity"===t||"unitPrice"===t){const r=s.toString().replace(/[^\d]/g,""),a=parseInt(r)||0;n[e][t]=a}else n[e][t]=s;"quantity"!==t&&"unitPrice"!==t||(n[e].total=n[e].quantity*n[e].unitPrice),E(e=>(0,i.A)((0,i.A)({},e),{},{workItems:n}))},q=e=>e.reduce((e,t)=>e+t.total,0);return(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uccad\uad6c\uc11c \uad00\ub9ac"}),(0,k.jsx)("p",{className:"text-gray-600",children:"\uc791\uc5c5 \uc644\ub8cc \ud6c4 \uccad\uad6c\uc11c\ub97c \uc0dd\uc131\ud558\uace0 \uad00\ub9ac\ud558\uc138\uc694"})]}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[o.length>0&&(0,k.jsxs)("button",{onClick:()=>m(!0),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded flex items-center",title:"\uc120\ud0dd\ub41c \uccad\uad6c\uc11c \uc77c\uad04 \uc0ad\uc81c",children:["\ud83d\uddd1\ufe0f \uc120\ud0dd \uc0ad\uc81c(",o.length,")"]}),(0,k.jsx)("button",{onClick:()=>{oe()},className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"\ud83d\udcc1 \ud15c\ud50c\ub9bf \ub2e4\uc6b4\ub85c\ub4dc"}),(0,k.jsxs)("label",{className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded cursor-pointer",children:["\ud83d\udce4 Excel \uac00\uc838\uc624\uae30",(0,k.jsx)("input",{type:"file",accept:".xlsx,.xls",onChange:async e=>{const t=e.target.files[0];if(t)try{const n=await ae.invoices(t);s(e=>[...e,...n]),alert("".concat(n.length,"\uac1c\uc758 \uccad\uad6c\uc11c\ub97c \uac00\uc838\uc654\uc2b5\ub2c8\ub2e4.")),e.target.value=""}catch(n){console.error("Excel \uac00\uc838\uc624\uae30 \uc624\ub958:",n),alert("Excel \ud30c\uc77c \uac00\uc838\uc624\uae30\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4.")}},className:"hidden"})]}),(0,k.jsx)("button",{onClick:()=>{ne(t)},className:"bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded flex items-center",children:"\ud83d\udce5 Excel \ub0b4\ubcf4\ub0b4\uae30"}),(0,k.jsx)("button",{onClick:()=>w(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"+ \uc0c8 \uccad\uad6c\uc11c"})]})]}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-4 mb-4",children:(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"\uac74\ucd95\uc8fc"}),(0,k.jsxs)("select",{value:p,onChange:e=>u(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"15px"},children:[(0,k.jsx)("option",{value:"",children:"\uc804\uccb4 \uac74\ucd95\uc8fc"}),e.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,k.jsx)("label",{className:"text-sm font-medium text-gray-700 ml-4",children:"\uc0c1\ud0dc"}),(0,k.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",style:{fontSize:"15px"},disabled:!p,children:[(0,k.jsx)("option",{value:"",children:"\uc804\uccb4 \uc0c1\ud0dc"}),(0,k.jsx)("option",{value:"\ubc1c\uc1a1\ub300\uae30",children:"\ubc1c\uc1a1\ub300\uae30"}),(0,k.jsx)("option",{value:"\ubc1c\uc1a1\ub428",children:"\ubc1c\uc1a1\ub428"}),(0,k.jsx)("option",{value:"\ubbf8\uacb0\uc81c",children:"\ubbf8\uacb0\uc81c"}),(0,k.jsx)("option",{value:"\uacb0\uc81c\uc644\ub8cc",children:"\uacb0\uc81c\uc644\ub8cc"})]}),(p||h)&&(0,k.jsx)("button",{onClick:()=>{u(""),g("")},className:"text-xs text-blue-600 hover:text-blue-800",children:"\ud544\ud130 \ucd08\uae30\ud654"}),(0,k.jsxs)("div",{className:"text-sm text-gray-500 ml-auto",children:[b.length,"\uac1c \uccad\uad6c\uc11c"]})]})}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,k.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,k.jsx)("thead",{className:"bg-gray-50",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,k.jsx)("input",{type:"checkbox",className:"rounded border-gray-300",checked:j,onChange:e=>{return t=e.target.checked,c(t?f:[]);var t},title:"\uc804\uccb4 \uc120\ud0dd"})}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uccad\uad6c\uc11c \ubc88\ud638"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uac74\ucd95\uc8fc"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\ud504\ub85c\uc81d\ud2b8"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uae08\uc561"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc0c1\ud0dc"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\ubc1c\ud589\uc77c"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc791\uc5c5"})]})}),(0,k.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(t=>(0,k.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("input",{type:"checkbox",className:"rounded border-gray-300",checked:o.includes(t.id),onChange:e=>{return s=t.id,n=e.target.checked,c(e=>n?Array.from(new Set([...e,s])):e.filter(e=>e!==s));var s,n},title:"\ud56d\ubaa9 \uc120\ud0dd"})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.id})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("div",{className:"text-sm text-gray-900",children:t.client})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("div",{className:"text-sm text-gray-900",children:t.project})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[t.amount.toLocaleString(),"\uc6d0"]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("select",{className:"px-2 py-1 text-xs font-semibold rounded-full ".concat("\uacb0\uc81c\uc644\ub8cc"===t.status?"bg-green-100 text-green-800":"\ubc1c\uc1a1\ub428"===t.status?"bg-blue-100 text-blue-800":"\ubbf8\uacb0\uc81c"===t.status?"bg-orange-100 text-orange-800":"bg-yellow-100 text-yellow-800"," focus:outline-none focus:ring-2 focus:ring-primary-500"),value:t.status,onChange:e=>{return n=t.id,r=e.target.value,void s(e=>e.map(e=>e.id===n?(0,i.A)((0,i.A)({},e),{},{status:r}):e));var n,r},title:"\uccad\uad6c\uc11c \uc0c1\ud0dc \ubcc0\uacbd",children:[(0,k.jsx)("option",{value:"\ubc1c\uc1a1\ub300\uae30",children:"\ubc1c\uc1a1\ub300\uae30"}),(0,k.jsx)("option",{value:"\ubc1c\uc1a1\ub428",children:"\ubc1c\uc1a1\ub428"}),(0,k.jsx)("option",{value:"\ubbf8\uacb0\uc81c",children:"\ubbf8\uacb0\uc81c"}),(0,k.jsx)("option",{value:"\uacb0\uc81c\uc644\ub8cc",children:"\uacb0\uc81c\uc644\ub8cc"})]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("div",{className:"text-sm text-gray-900",children:t.date})}),(0,k.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,k.jsx)("button",{onClick:()=>(e=>{A(e)})(t),className:"text-blue-600 hover:text-blue-900 mr-2",children:"\uc0c1\uc138\ubcf4\uae30"}),(0,k.jsx)("button",{onClick:()=>(t=>{console.log("\uccad\uad6c\uc11c PDF \uc0c8 \ud0ed\uc5d0\uc11c \uc5f4\uae30 \uc2dc\uc791:",t.id);try{const s=window.open("","_blank","width=1200,height=900,scrollbars=yes,resizable=yes");if(!s)return console.error("\ud31d\uc5c5\uc774 \ucc28\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4"),void alert("\ud31d\uc5c5\uc774 \ucc28\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ube0c\ub77c\uc6b0\uc800 \uc124\uc815\uc5d0\uc11c \ud31d\uc5c5\uc744 \ud5c8\uc6a9\ud574\uc8fc\uc138\uc694.");const n=e.find(e=>String(e.id)===String(t.clientId||""))||e.find(e=>e.name===t.client)||null,a=(()=>{if(!n)return"\n            <p><strong>\uac74\ucd95\uc8fc\uba85:</strong> ".concat(t.client,"</p>\n            <p><strong>\ud504\ub85c\uc81d\ud2b8\uba85:</strong> ").concat(t.project,"</p>\n            <p><strong>\uc791\uc5c5\uc7a5 \uc8fc\uc18c:</strong> ").concat(t.workplaceAddress,"</p>\n          ");if("BUSINESS"===n.type){const e=n.business||{};return"\n            <p><strong>\uc0c1\ud638:</strong> ".concat(e.businessName||n.name||"-","</p>\n            <p><strong>\ub300\ud45c\uc790:</strong> ").concat(e.representative||"-","</p>\n            <p><strong>\uc0ac\uc5c5\uc790\ub4f1\ub85d\ubc88\ud638:</strong> ").concat(e.businessNumber||"-","</p>\n            <p><strong>\ubc1c\ud589 \uc774\uba54\uc77c:</strong> ").concat(e.taxEmail||n.email||"-","</p>\n            <p><strong>\uc0ac\uc5c5\uc7a5 \uc8fc\uc18c:</strong> ").concat(e.businessAddress||n.address||"-","</p>\n            <p><strong>\ud504\ub85c\uc81d\ud2b8\uba85:</strong> ").concat(t.project,"</p>\n            <p><strong>\uc791\uc5c5\uc7a5 \uc8fc\uc18c:</strong> ").concat(t.workplaceAddress,"</p>\n          ")}return"\n          <p><strong>\uc131\uba85:</strong> ".concat(n.name,"</p>\n          ").concat(n.phone?"<p><strong>\uc5f0\ub77d\ucc98:</strong> ".concat(n.phone,"</p>"):"","\n          ").concat(n.email?"<p><strong>\uc774\uba54\uc77c:</strong> ".concat(n.email,"</p>"):"","\n          <p><strong>\uc8fc\uc18c:</strong> ").concat(n.address||"-","</p>\n          <p><strong>\ud504\ub85c\uc81d\ud2b8\uba85:</strong> ").concat(t.project,"</p>\n          <p><strong>\uc791\uc5c5\uc7a5 \uc8fc\uc18c:</strong> ").concat(t.workplaceAddress,"</p>\n        ")})(),i=(t.workItems||[]).reduce((e,t)=>e+(Number(t.laborPersonsGeneral)||0)*(Number(t.laborUnitRateGeneral)||0)+(Number(t.laborPersons)||0)*(Number(t.laborUnitRate)||0),0),d='\n        <!DOCTYPE html>\n        <html lang="ko">\n          <head>\n            <title>\uccad\uad6c\uc11c '.concat(t.id,' - \uac74\uc124\uc5c5 \uccad\uad6c\uc11c \uad00\ub9ac \uc2dc\uc2a4\ud15c</title>\n            <meta charset="UTF-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1.0">\n            <style>\n              @import url(\'https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap\');\n              \n              * {\n                box-sizing: border-box;\n                margin: 0;\n                padding: 0;\n              }\n              \n              body { \n                font-family: \'Noto Sans KR\', sans-serif; \n                margin: 0; \n                padding: 0;\n                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n                min-height: 100vh;\n                color: #374151;\n                line-height: 1.5;\n              }\n              \n              .container {\n                max-width: 1000px;\n                margin: 20px auto;\n                background-color: #ffffff;\n                border-radius: 16px;\n                box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);\n                overflow: hidden;\n              }\n              \n              .header {\n                background: linear-gradient(135deg, #1e40af 0%, #3730a3 100%);\n                color: white;\n                padding: 30px;\n                text-align: center;\n              }\n              \n              .header h1 {\n                font-size: 36px;\n                font-weight: 700;\n                margin-bottom: 10px;\n                letter-spacing: 8px;\n              }\n              \n              .invoice-meta {\n                display: flex;\n                justify-content: space-between;\n                margin-top: 20px;\n                font-size: 14px;\n              }\n              \n              .content {\n                padding: 40px;\n              }\n              \n              .section {\n                margin-bottom: 40px;\n              }\n              \n              .section-title {\n                font-size: 18px;\n                font-weight: 700;\n                color: #1f2937;\n                border-left: 4px solid #3b82f6;\n                padding-left: 12px;\n                margin-bottom: 20px;\n              }\n              \n              .grid {\n                display: grid;\n                grid-template-columns: 1fr 1fr;\n                gap: 30px;\n                margin-bottom: 30px;\n              }\n              \n              .info-box {\n                background-color: #f8fafc;\n                padding: 20px;\n                border-radius: 12px;\n                border: 1px solid #e2e8f0;\n              }\n              \n              .info-box h4 {\n                font-size: 16px;\n                font-weight: 600;\n                color: #1e40af;\n                margin-bottom: 15px;\n              }\n              \n              .info-box p {\n                margin: 8px 0;\n                font-size: 14px;\n              }\n              \n              .amount-highlight {\n                background: linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%);\n                padding: 20px;\n                border-radius: 12px;\n                border-left: 4px solid #3b82f6;\n                text-align: left;\n                margin: 30px 0;\n              }\n              \n              .amount-highlight p {\n                margin: 0;\n                font-size: 20px;\n                font-weight: 700;\n                color: #1e3a8a;\n              }\n              \n              .work-table {\n                width: 100%;\n                border-collapse: collapse;\n                background-color: white;\n                border-radius: 12px;\n                overflow: hidden;\n                box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n              }\n              \n              .work-table th {\n                background: linear-gradient(135deg, #f1f5f9 0%, #e2e8f0 100%);\n                padding: 15px 12px;\n                text-align: center;\n                font-weight: 700;\n                font-size: 13px;\n                color: #1f2937;\n                border-bottom: 2px solid #e2e8f0;\n              }\n              \n              .work-table td {\n                padding: 12px;\n                border-bottom: 1px solid #f1f5f9;\n                font-size: 13px;\n                vertical-align: top;\n              }\n              \n              .work-table tr:hover {\n                background-color: #f8fafc;\n              }\n              \n              .work-table tfoot {\n                background: linear-gradient(135deg, #f0f0f0 0%, #e5e5e5 100%);\n                font-weight: 700;\n              }\n              \n              .work-table tfoot td {\n                padding: 15px 12px;\n                border-top: 2px solid #cbd5e1;\n                font-size: 14px;\n              }\n              \n              .signature-section {\n                margin-top: 40px;\n                text-align: right;\n              }\n              \n              .signature-box {\n                display: inline-block;\n                background-color: #f8fafc;\n                border: 1px solid #e2e8f0;\n                border-radius: 12px;\n                padding: 20px;\n                margin-top: 20px;\n              }\n              \n              .signature-company {\n                font-size: 16px;\n                font-weight: 700;\n                margin-bottom: 15px;\n              }\n              \n              .signature-representative {\n                display: flex;\n                align-items: center;\n                justify-content: flex-end;\n                gap: 8px;\n              }\n              \n              .signature-representative span {\n                font-size: 16px;\n                font-weight: 700;\n              }\n              \n              .stamp-container {\n                position: relative;\n                display: inline-block;\n              }\n              \n              .stamp-container img {\n                width: 60px;\n                height: 60px;\n                object-fit: contain;\n                position: absolute;\n                top: 50%;\n                left: 50%;\n                transform: translate(-50%, -50%);\n              }\n              \n              .footer-message {\n                text-align: center;\n                margin-top: 40px;\n                padding-top: 20px;\n                border-top: 1px solid #e2e8f0;\n                font-size: 12px;\n                color: #6b7280;\n              }\n              \n              .controls {\n                position: fixed;\n                top: 20px;\n                right: 20px;\n                z-index: 1000;\n                display: flex;\n                gap: 10px;\n              }\n              \n              .btn {\n                padding: 12px 20px;\n                border: none;\n                border-radius: 8px;\n                cursor: pointer;\n                font-weight: 600;\n                font-size: 14px;\n                transition: all 0.3s ease;\n                display: flex;\n                align-items: center;\n                gap: 8px;\n              }\n              \n              .btn-print {\n                background: linear-gradient(135deg, #10b981 0%, #059669 100%);\n                color: white;\n              }\n              \n              .btn-print:hover {\n                transform: translateY(-2px);\n                box-shadow: 0 8px 15px rgba(16, 185, 129, 0.4);\n              }\n              \n              .btn-close {\n                background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\n                color: white;\n              }\n              \n              .btn-close:hover {\n                transform: translateY(-2px);\n                box-shadow: 0 8px 15px rgba(239, 68, 68, 0.4);\n              }\n              \n              .loading {\n                display: none;\n                text-align: center;\n                padding: 20px;\n                font-style: italic;\n                color: #6b7280;\n              }\n              \n              @media print {\n                body {\n                  background: white !important;\n                }\n                .container {\n                  box-shadow: none !important;\n                  border-radius: 0 !important;\n                  margin: 0 !important;\n                }\n                .controls, .no-print {\n                  display: none !important;\n                }\n                .header {\n                  background: #1e40af !important;\n                  -webkit-print-color-adjust: exact !important;\n                  print-color-adjust: exact !important;\n                }\n              }\n              \n              @media (max-width: 768px) {\n                .container {\n                  margin: 10px;\n                  border-radius: 12px;\n                }\n                .content {\n                  padding: 20px;\n                }\n                .grid {\n                  grid-template-columns: 1fr;\n                  gap: 20px;\n                }\n                .controls {\n                  position: static;\n                  justify-content: center;\n                  margin: 20px;\n                }\n              }\n            </style>\n          </head>\n          <body>\n            <div class="controls no-print">\n              <button class="btn btn-print" onclick="handlePrint()">\n                \ud83d\udda8\ufe0f \uc778\uc1c4\ud558\uae30\n              </button>\n              <button class="btn btn-close" onclick="window.close()">\n                \u2715 \ucc3d \ub2eb\uae30\n              </button>\n            </div>\n            \n            <div class="container">\n              <div class="header">\n                <h1>\uccad \uad6c \uc11c</h1>\n                <div class="invoice-meta">\n                  <div>\uccad\uad6c\uc11c \ubc88\ud638: <strong>').concat(t.id,"</strong></div>\n                  <div>\uc791\uc131\uc77c: <strong>").concat(t.date,'</strong></div>\n                </div>\n              </div>\n              \n              <div class="content">\n                <div class="grid">\n                  <div class="info-box">\n                    <h4>\ud83c\udfe2 \ubc1c\uc8fc\uc790 \uc815\ubcf4</h4>\n                    ').concat(a,'\n                  </div>\n                  \n                  <div class="info-box">\n                    <h4>\ud83c\udfd7\ufe0f \uc2dc\uacf5\uc5c5\uccb4 \uc815\ubcf4</h4>\n                    <p><strong>\uc0c1\ud638:</strong> ').concat(r.name,"</p>\n                    <p><strong>\uc0ac\uc5c5\uc790\ub4f1\ub85d\ubc88\ud638:</strong> ").concat(r.businessNumber,"</p>\n                    <p><strong>\ub300\ud45c\uc790:</strong> ").concat(r.representative,"</p>\n                    <p><strong>\uc8fc\uc18c:</strong> ").concat(r.address,"</p>\n                    <p><strong>\uc5f0\ub77d\ucc98:</strong> ").concat(r.phone,"</p>\n                    ").concat(r.email?"<p><strong>\uc774\uba54\uc77c:</strong> ".concat(r.email,"</p>"):"",'\n                  </div>\n                </div>\n                \n                <div class="amount-highlight">\n                  <p>\ucd1d \uccad\uad6c\uae08\uc561 : \uae08 ').concat(ee(t.amount),' \uc6d0\uc815</p>\n                </div>\n                \n                <div class="section">\n                  <div class="info-box">\n                    <p><strong>\uc778\ubd80\uc784:</strong> ').concat(i.toLocaleString(),'\uc6d0</p>\n                  </div>\n                </div>\n                \n                <div class="section">\n                  <h3 class="section-title">\ud83d\udccb \uc138\ubd80 \uc791\uc5c5 \ub0b4\uc5ed</h3>\n                  <table class="work-table">\n                    <thead>\n                      <tr>\n                        <th style="width: 50px;">\uc5f0\ubc88</th>\n                        <th style="width: 110px;">\uc791\uc5c5\uc77c\uc790</th>\n                        <th>\ub0b4\uc6a9</th>\n                        <th style="width: 100px;">\uaddc\uaca9</th>\n                        <th style="width: 80px;">\uc218\ub7c9</th>\n                        <th style="width: 60px;">\ub2e8\uc704</th>\n                        <th style="width: 120px;">\ub2e8\uac00</th>\n                        <th style="width: 120px;">\uacf5\uae09\uac00\uc561</th>\n                        <th style="width: 120px;">\ube44\uace0</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      ').concat(t.workItems.map((e,t)=>'\n                        <tr>\n                          <td style="text-align: center;">'.concat(t+1,'</td>\n                          <td style="text-align: center;">').concat(e.date||"-",'</td>\n                          <td style="text-align: left;">\n                            <strong>').concat(e.name,"</strong>\n                            ").concat(e.description?'<div style="font-size: 12px; color: #6b7280; margin-top: 4px;">'.concat(e.description,"</div>"):"",'\n                          </td>\n                          <td style="text-align: center;">').concat(e.category||"-",'</td>\n                          <td style="text-align: center;">').concat(e.quantity,'</td>\n                          <td style="text-align: center;">').concat(e.unit||"-",'</td>\n                          <td style="text-align: right;">').concat(e.unitPrice.toLocaleString(),'\uc6d0</td>\n                          <td style="text-align: right;">').concat(e.total.toLocaleString(),'\uc6d0</td>\n                          <td style="text-align: left;">').concat(e.notes||"-","</td>\n                        </tr>\n                      ")).join(""),'\n                    </tbody>\n                    <tfoot>\n                      <tr>\n                        <td colspan="8" style="text-align: right; font-size: 16px;">\ud569\uacc4:</td>\n                        <td style="text-align: center; font-size: 16px; font-weight: 700;">\n                          ').concat(t.amount.toLocaleString(),"\uc6d0\n                        </td>\n                      </tr>\n                    </tfoot>\n                  </table>\n                </div>\n                \n                ").concat(r.bankAccount?'\n                <div class="section">\n                  <h3 class="section-title">\ud83d\udcb3 \uacb0\uc81c \uc815\ubcf4</h3>\n                  <div class="info-box">\n                    <p><strong>\uacc4\uc88c\uc815\ubcf4:</strong> '.concat(r.bankAccount,"</p>\n                    <p><strong>\uc608\uae08\uc8fc:</strong> ").concat(r.accountHolder,"</p>\n                  </div>\n                </div>\n                "):"",'\n                \n                <div class="signature-section">\n                  <p style="margin-bottom: 20px; font-size: 16px;">\uc704\uc640 \uac19\uc774 \uccad\uad6c\ud569\ub2c8\ub2e4.</p>\n                  \n                  <div class="signature-box">\n                    <div class="signature-company">\n                      ').concat(r.name,'\n                    </div>\n                    <div class="signature-representative">\n                      <span>\ub300\ud45c : ').concat(r.representative.split("").join(" "),'</span>\n                      <div class="stamp-container">\n                        <span>(\uc778)</span>\n                        ').concat(l?'<img src="'.concat(l,'" alt="\ub3c4\uc7a5" />'):"","\n                      </div>\n                    </div>\n                  </div>\n                </div>\n                \n                <div class=\"footer-message\">\n                  <p>\uc774 \uccad\uad6c\uc11c\uc5d0 \ub300\ud55c \ubb38\uc758\uc0ac\ud56d\uc774 \uc788\uc73c\uc2dc\uba74 \uc5f0\ub77d \uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4.</p>\n                  <p style=\"font-weight: 700; margin-top: 8px;\">\uac10\uc0ac\ud569\ub2c8\ub2e4.</p>\n                </div>\n              </div>\n            </div>\n            \n            <div class=\"loading\" id=\"loadingMessage\">\n              \ud83d\udda8\ufe0f \uc778\uc1c4 \uc900\ube44 \uc911...\n            </div>\n            \n            <script>\n              function handlePrint() {\n                const loading = document.getElementById('loadingMessage');\n                loading.style.display = 'block';\n                \n                // Hide loading after a short delay\n                setTimeout(() => {\n                  loading.style.display = 'none';\n                }, 2000);\n                \n                // Trigger print\n                window.print();\n              }\n              \n              // Keyboard shortcuts\n              document.addEventListener('keydown', function(e) {\n                // Ctrl+P or Cmd+P for print\n                if ((e.ctrlKey || e.metaKey) && e.key === 'p') {\n                  e.preventDefault();\n                  handlePrint();\n                }\n                \n                // Escape to close\n                if (e.key === 'Escape') {\n                  if (confirm('\ucc3d\uc744 \ub2eb\uc73c\uc2dc\uaca0\uc2b5\ub2c8\uae4c?')) {\n                    window.close();\n                  }\n                }\n              });\n              \n              // Auto-focus for better keyboard navigation\n              window.onload = function() {\n                document.body.focus();\n                console.log('\uccad\uad6c\uc11c PDF\uac00 \uc0c8 \ud0ed\uc5d0\uc11c \uc131\uacf5\uc801\uc73c\ub85c \uc5f4\ub838\uc2b5\ub2c8\ub2e4.');\n                console.log('\ud0a4\ubcf4\ub4dc \ub2e8\ucd95\ud0a4: Ctrl+P (\uc778\uc1c4), Esc (\ucc3d \ub2eb\uae30)');\n              };\n            <\/script>\n          </body>\n        </html>\n      ");s.document.write(d),s.document.close(),s.focus(),console.log("\uccad\uad6c\uc11c PDF\uac00 \uc0c8 \ud0ed\uc5d0\uc11c \uc131\uacf5\uc801\uc73c\ub85c \uc5f4\ub838\uc2b5\ub2c8\ub2e4:",t.id)}catch(s){console.error("\uccad\uad6c\uc11c PDF \uc0dd\uc131 \uc911 \uc624\ub958 \ubc1c\uc0dd:",s),alert("\uccad\uad6c\uc11c PDF \uc0dd\uc131 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+s.message)}})(t),className:"text-green-600 hover:text-green-900 mr-2",children:"\ud83d\udda8\ufe0f \ucd9c\ub825"}),(0,k.jsx)("button",{onClick:()=>{return e=t.id,void(window.confirm("Are you sure you want to delete this invoice?")&&s(t=>t.filter(t=>t.id!==e)));var e},className:"text-red-600 hover:text-red-900",children:"\uc0ad\uc81c"})]})]},t.id))})]})}),x&&(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\uc120\ud0dd \uc0ad\uc81c"}),(0,k.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["\uc120\ud0dd\ub41c ",o.length,"\uac1c\uc758 \uccad\uad6c\uc11c\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."]}),(0,k.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,k.jsx)("button",{className:"btn-secondary",onClick:()=>m(!1),children:"\ucde8\uc18c"}),(0,k.jsx)("button",{className:"btn-primary bg-red-600 hover:bg-red-700",onClick:()=>{0!==o.length&&(s(e=>e.filter(e=>!o.includes(e.id))),c([]),m(!1))},children:"\uc0ad\uc81c"})]})]})}),N&&(0,k.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,k.jsx)("div",{className:"relative top-10 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white",children:(0,k.jsxs)("div",{className:"mt-3",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\uc0c8 \uccad\uad6c\uc11c \uc0dd\uc131"}),(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault();const n=q(_.workItems),r=(0,i.A)((0,i.A)({},_),{},{id:"INV-2024-".concat(String(t.length+1).padStart(3,"0")),amount:n,status:"\ubc1c\uc1a1\ub300\uae30",date:(new Date).toISOString().split("T")[0],dueDate:new Date(Date.now()+12096e5).toISOString().split("T")[0]});s(e=>[...e,r]),E({clientId:"",client:"",workplaceId:"",project:"",workplaceAddress:"",workItems:[{name:"",quantity:1,unit:"",unitPrice:0,total:0,templateId:"",notes:""}]}),w(!1)},className:"space-y-4",children:[(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uac74\ucd95\uc8fc *"}),(0,k.jsxs)("select",{name:"clientId",value:_.clientId,onChange:R,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,children:[(0,k.jsx)("option",{value:"",children:"\uac74\ucd95\uc8fc\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),e.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\ud504\ub85c\uc81d\ud2b8\uba85 *"}),(0,k.jsx)("input",{type:"text",name:"project",value:_.project,onChange:R,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Enter project name",required:!0})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc791\uc5c5\uc7a5 *"}),(0,k.jsxs)("select",{name:"workplaceId",value:_.workplaceId,onChange:R,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0,disabled:!_.clientId,children:[(0,k.jsx)("option",{value:"",children:_.clientId?"\uc791\uc5c5\uc7a5\uc744 \uc120\ud0dd\ud558\uc138\uc694":"\uba3c\uc800 \uac74\ucd95\uc8fc\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),_.clientId&&(t=>{const s=e.find(e=>e.id===parseInt(t));return(null===s||void 0===s?void 0:s.workplaces)||[]})(_.clientId).map(e=>(0,k.jsxs)("option",{value:e.id,children:[e.name," - ",e.address]},e.id))]}),_.workplaceAddress&&(0,k.jsxs)("div",{className:"mt-2 p-2 bg-gray-50 rounded text-sm text-gray-600",children:[(0,k.jsx)("strong",{children:"\uc791\uc5c5\uc7a5 \uc8fc\uc18c:"})," ",_.workplaceAddress]})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc791\uc5c5 \ud56d\ubaa9"}),(0,k.jsx)("button",{type:"button",onClick:()=>{E(e=>(0,i.A)((0,i.A)({},e),{},{workItems:[...e.workItems,{name:"",quantity:1,unit:"",unitPrice:0,total:0,templateId:"",date:"",notes:""}]}))},className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ \ud56d\ubaa9 \ucd94\uac00"})]}),(0,k.jsx)("div",{className:"space-y-3",children:_.workItems.map((e,t)=>{var s;return(0,k.jsxs)("div",{className:"border border-gray-200 rounded-lg p-3 bg-gray-50",children:[(0,k.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uc791\uc5c5 \ud15c\ud50c\ub9bf \uc120\ud0dd"}),(0,k.jsxs)("select",{value:e.templateId||"",onChange:e=>U(t,"templateId",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",children:[(0,k.jsx)("option",{value:"",children:"\ud15c\ud50c\ub9bf \uc120\ud0dd \ub610\ub294 \uc9c1\uc811 \uc785\ub825"}),v.map(e=>(0,k.jsxs)("option",{value:e.id,children:[e.name," (",e.category,")"]},e.id))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ub0b4\uc6a9 (\uc9c1\uc811\uc785\ub825)"}),(0,k.jsx)("input",{type:"text",placeholder:"Or enter manually",value:e.templateId?"":e.name,onChange:e=>U(t,"name",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",disabled:!!e.templateId})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uc791\uc5c5\uc77c\uc790"}),(0,k.jsx)("input",{type:"date",placeholder:"YYYY-MM-DD",value:e.date||"",onChange:e=>U(t,"date",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500"})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-4 gap-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uc218\ub7c9"}),(0,k.jsx)("input",{type:"text",placeholder:"\uc608: 1,000",value:e.quantity?y(e.quantity):"",onChange:e=>U(t,"quantity",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ub2e8\uc704"}),(0,k.jsxs)("select",{value:e.unit||"",onChange:e=>U(t,"unit",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0,children:[(0,k.jsx)("option",{value:"",children:"\ub2e8\uc704 \uc120\ud0dd"}),(d||[]).map(e=>(0,k.jsx)("option",{value:e,children:e},e))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ub2e8\uac00 (\uc9c1\uc811\uc785\ub825)"}),(0,k.jsx)("input",{type:"text",placeholder:"\uc608: 1,000,000",value:e.unitPrice?y(e.unitPrice):"",onChange:e=>U(t,"unitPrice",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm focus:outline-none focus:ring-1 focus:ring-blue-500",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ud569\uacc4"}),(0,k.jsx)("input",{type:"text",value:e.total.toLocaleString()+"\uc6d0",readOnly:!0,className:"w-full border border-gray-300 rounded px-2 py-1 text-sm bg-gray-100 text-gray-700 font-medium"})]})]}),(0,k.jsxs)("div",{className:"mt-3",children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ube44\uace0"}),(0,k.jsx)("textarea",{value:e.notes||"",onChange:e=>U(t,"notes",e.target.value),rows:"2",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"\ucd94\uac00 \uba54\ubaa8\ub098 \ud2b9\uc774\uc0ac\ud56d\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),e.templateId&&(0,k.jsxs)("div",{className:"mt-2 text-xs text-gray-500 bg-blue-50 p-2 rounded",children:[(0,k.jsx)("strong",{children:"\uc120\ud0dd\ub41c \uc791\uc5c5:"})," ",null===(s=v.find(t=>t.id===e.templateId))||void 0===s?void 0:s.description]}),_.workItems.length>1&&(0,k.jsx)("div",{className:"mt-2 text-right",children:(0,k.jsx)("button",{type:"button",onClick:()=>{const e=_.workItems.filter((e,s)=>s!==t);E(t=>(0,i.A)((0,i.A)({},t),{},{workItems:e}))},className:"text-red-600 hover:text-red-800 text-xs",children:"\ud56d\ubaa9 \uc0ad\uc81c"})})]},t)})}),(0,k.jsx)("div",{className:"text-right mt-2",children:(0,k.jsxs)("span",{className:"text-lg font-bold",children:["\ucd1d\ud569: ",q(_.workItems).toLocaleString(),"\uc6d0"]})})]}),(0,k.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,k.jsx)("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 text-gray-500 hover:text-gray-700",children:"\ucde8\uc18c"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded",children:"\uccad\uad6c\uc11c \uc0dd\uc131"})]})]})]})})}),S&&(0,k.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,k.jsxs)("div",{className:"relative top-10 mx-auto p-5 border w-4/5 max-w-3xl shadow-lg rounded-md bg-white",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["\uccad\uad6c\uc11c \uc0c1\uc138 - ",S.id]}),(0,k.jsx)("button",{onClick:()=>A(null),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,k.jsxs)("div",{className:"border rounded-lg p-6 bg-gray-50",children:[(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\uac74\ucd95\uc8fc:"})," ",S.client]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\ud504\ub85c\uc81d\ud2b8:"})," ",S.project]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\uc791\uc5c5\uc7a5 \uc8fc\uc18c:"})," ",S.workplaceAddress]})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\ubc1c\ud589\uc77c:"})," ",S.date]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\uc9c0\ubd88 \uae30\ud55c:"})," ",S.dueDate]})]})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("h4",{className:"font-medium mb-2",children:"\uc791\uc5c5 \ub0b4\uc5ed"}),(0,k.jsxs)("table",{className:"w-full border",children:[(0,k.jsx)("thead",{className:"bg-white",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:"border px-3 py-2 text-left",children:"\ub0b4\uc6a9"}),(0,k.jsx)("th",{className:"border px-3 py-2 text-center",children:"\uc218\ub7c9"}),(0,k.jsx)("th",{className:"border px-3 py-2 text-center",children:"\ub2e8\uc704"}),(0,k.jsx)("th",{className:"border px-3 py-2 text-right",children:"\ub2e8\uac00"}),(0,k.jsx)("th",{className:"border px-3 py-2 text-right",children:"\ud569\uacc4"}),(0,k.jsx)("th",{className:"border px-3 py-2 text-left",children:"\ube44\uace0"})]})}),(0,k.jsx)("tbody",{children:S.workItems.map((e,t)=>(0,k.jsxs)("tr",{children:[(0,k.jsx)("td",{className:"border px-3 py-2",children:(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,k.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),e.category&&(0,k.jsx)("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-1 rounded-full ml-2",children:e.category})]}),e.description&&(0,k.jsx)("div",{className:"text-sm text-gray-600 leading-relaxed",children:e.description.split("\n")[0]})]})}),(0,k.jsx)("td",{className:"border px-3 py-2 text-center",children:e.quantity}),(0,k.jsx)("td",{className:"border px-3 py-2 text-center",children:e.unit||"-"}),(0,k.jsxs)("td",{className:"border px-3 py-2 text-right",children:[e.unitPrice.toLocaleString(),"\uc6d0"]}),(0,k.jsxs)("td",{className:"border px-3 py-2 text-right font-medium",children:[e.total.toLocaleString(),"\uc6d0"]}),(0,k.jsx)("td",{className:"border px-3 py-2 text-left text-sm align-top",children:e.notes||"-"})]},t))}),(0,k.jsxs)("tfoot",{children:[(()=>{const e=(S.workItems||[]).reduce((e,t)=>e+(Number(t.laborPersonsGeneral)||0)*(Number(t.laborUnitRateGeneral)||0)+(Number(t.laborPersons)||0)*(Number(t.laborUnitRate)||0),0);return e>0?(0,k.jsxs)("tr",{className:"bg-blue-50",children:[(0,k.jsx)("td",{colSpan:"5",className:"border px-3 py-2 text-right font-medium text-blue-800",children:"\uc778\ubd80\uc784 \uc18c\uacc4:"}),(0,k.jsxs)("td",{className:"border px-3 py-2 text-right font-medium text-blue-800",children:[e.toLocaleString(),"\uc6d0"]})]}):null})(),(0,k.jsxs)("tr",{className:"bg-gray-100",children:[(0,k.jsx)("td",{colSpan:"5",className:"border px-3 py-2 text-right font-bold",children:"\ucd1d \uae08\uc561:"}),(0,k.jsxs)("td",{className:"border px-3 py-2 text-right font-bold text-lg",children:[S.amount.toLocaleString(),"\uc6d0"]})]})]})]})]})]})]})}),(0,k.jsx)("div",{style:{display:"none"},children:(0,k.jsx)("div",{ref:z,style:{padding:"40px",fontFamily:"'Noto Sans KR', sans-serif",fontSize:"12px",lineHeight:"1.4",maxWidth:"800px",margin:"auto",backgroundColor:"#ffffff",color:"#374151"},children:C&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{style:{marginBottom:"24px",backgroundColor:"#f3f4f6",padding:"12px",borderRadius:"8px"},children:[(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"10px"},children:[(0,k.jsxs)("div",{style:{fontSize:"14px",color:"#374151"},children:[(0,k.jsx)("strong",{children:"\uccad\uad6c\uc11c \ubc88\ud638:"})," ",C.id]}),(0,k.jsxs)("div",{style:{fontSize:"14px",color:"#374151"},children:[(0,k.jsx)("strong",{children:"\uc791\uc131\uc77c:"})," ",C.date]})]}),(0,k.jsx)("div",{style:{textAlign:"center",borderBottom:"2px solid #9ca3af",paddingBottom:"8px"},children:(0,k.jsx)("h1",{style:{fontSize:"36px",margin:"0",fontWeight:"bold",color:"#1f2937",letterSpacing:"8px"},children:"\uccad   \uad6c   \uc11c"})})]}),(0,k.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"24px",marginBottom:"24px"},children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{style:{margin:"0 0 15px 0",fontSize:"18px",fontWeight:"bold",color:"#1f2937",borderLeft:"4px solid #4f46e5",paddingLeft:"12px"},children:"\ubc1c\uc8fc\uc790 \uc815\ubcf4"}),(0,k.jsx)("div",{style:{backgroundColor:"#f3f4f6",padding:"12px",borderRadius:"8px"},children:(()=>{const t=e.find(e=>String(e.id)===String(C.clientId||""))||e.find(e=>e.name===C.client);if(!t)return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uac74\ucd95\uc8fc\uba85:"})," ",C.client]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\ud504\ub85c\uc81d\ud2b8\uba85:"})," ",C.project]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc791\uc5c5\uc7a5 \uc8fc\uc18c:"})," ",C.workplaceAddress]})]});if("BUSINESS"===t.type){const e=t.business||{};return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc0c1\ud638:"})," ",e.businessName||t.name||"-"]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\ub300\ud45c\uc790:"})," ",e.representative||"-"]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc0ac\uc5c5\uc790\ub4f1\ub85d\ubc88\ud638:"})," ",e.businessNumber||"-"]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\ubc1c\ud589 \uc774\uba54\uc77c:"})," ",e.taxEmail||t.email||"-"]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc0ac\uc5c5\uc7a5 \uc8fc\uc18c:"})," ",e.businessAddress||t.address||"-"]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\ud504\ub85c\uc81d\ud2b8\uba85:"})," ",C.project]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc791\uc5c5\uc7a5 \uc8fc\uc18c:"})," ",C.workplaceAddress]})]})}return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc131\uba85:"})," ",t.name]}),t.phone&&(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc5f0\ub77d\ucc98:"})," ",t.phone]}),t.email&&(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc774\uba54\uc77c:"})," ",t.email]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc8fc\uc18c:"})," ",t.address||"-"]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\ud504\ub85c\uc81d\ud2b8\uba85:"})," ",C.project]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc791\uc5c5\uc7a5 \uc8fc\uc18c:"})," ",C.workplaceAddress]})]})})()})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{style:{margin:"0 0 15px 0",fontSize:"18px",fontWeight:"bold",color:"#1f2937",borderLeft:"4px solid #4f46e5",paddingLeft:"12px"},children:"\uc2dc\uacf5\uc5c5\uccb4 \uc815\ubcf4"}),(0,k.jsxs)("div",{style:{backgroundColor:"#f3f4f6",padding:"12px",borderRadius:"8px"},children:[(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"12px"},children:[(0,k.jsx)("strong",{children:"\uc0c1\ud638:"})," ",r.name]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"12px"},children:[(0,k.jsx)("strong",{children:"\uc0ac\uc5c5\uc790\ub4f1\ub85d\ubc88\ud638:"})," ",r.businessNumber]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"12px"},children:[(0,k.jsx)("strong",{children:"\ub300\ud45c\uc790:"})," ",r.representative]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"12px"},children:[(0,k.jsx)("strong",{children:"\uc8fc\uc18c:"})," ",r.address]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"12px"},children:[(0,k.jsx)("strong",{children:"\uc5f0\ub77d\ucc98:"})," ",r.phone]}),r.email&&(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"12px"},children:[(0,k.jsx)("strong",{children:"\uc774\uba54\uc77c:"})," ",r.email]})]})]})]}),(0,k.jsx)("div",{style:{marginBottom:"30px",padding:"15px",backgroundColor:"#dbeafe",borderRadius:"8px",borderLeft:"4px solid #3b82f6",textAlign:"left"},children:(0,k.jsxs)("p",{style:{margin:"0",fontSize:"18px",fontWeight:"bold",color:"#1e3a8a"},children:["\ucd1d \uccad\uad6c\uae08\uc561 : \uae08 ",ee(C.amount)," \uc6d0\uc815"]})}),(0,k.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,k.jsx)("h3",{style:{margin:"0 0 20px 0",fontSize:"18px",fontWeight:"bold",color:"#1f2937",borderLeft:"4px solid #4f46e5",paddingLeft:"12px"},children:"\uc138\ubd80 \uc791\uc5c5 \ub0b4\uc5ed"}),(0,k.jsx)("div",{style:{overflowX:"auto"},children:(0,k.jsxs)("table",{style:{width:"100%",minWidth:"600px",borderCollapse:"collapse",backgroundColor:"#fff",borderRadius:"8px",boxShadow:"0 1px 3px rgba(0, 0, 0, 0.1)"},children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{style:{backgroundColor:"#f9fafb"},children:[(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontWeight:"bold",color:"#1f2937",width:"40px",fontSize:"14px"},children:"\uc5f0\ubc88"}),(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontWeight:"bold",color:"#1f2937",width:"110px",fontSize:"14px"},children:"\uc791\uc5c5\uc77c\uc790"}),(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontWeight:"bold",color:"#1f2937",fontSize:"14px"},children:"\ub0b4\uc6a9"}),(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontWeight:"bold",color:"#1f2937",fontSize:"14px"},children:"\uaddc\uaca9"}),(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontWeight:"bold",color:"#1f2937",fontSize:"14px"},children:"\uc218\ub7c9"}),(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontWeight:"bold",color:"#1f2937",fontSize:"14px"},children:"\ub2e8\uc704"}),(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontWeight:"bold",color:"#1f2937",fontSize:"14px"},children:"\ub2e8\uac00"}),(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontWeight:"bold",color:"#1f2937",fontSize:"14px"},children:"\uacf5\uae09\uac00\uc561"}),(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontWeight:"bold",color:"#1f2937",fontSize:"14px"},children:"\ube44\uace0"})]})}),(0,k.jsx)("tbody",{children:C.workItems.map((e,t)=>(0,k.jsxs)("tr",{style:{":hover":{backgroundColor:"#f1f5f9"}},children:[(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontSize:"14px"},children:t+1}),(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontSize:"14px"},children:e.date||"-"}),(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"left",fontSize:"15px"},children:(0,k.jsxs)("div",{children:[(0,k.jsx)("strong",{children:e.name}),e.description&&(0,k.jsx)("div",{style:{fontSize:"14px",color:"#6b7280",marginTop:"4px"},children:e.description})]})}),(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontSize:"14px"},children:e.category||"-"}),(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontSize:"14px"},children:e.quantity}),(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontSize:"14px"},children:e.unit||"-"}),(0,k.jsxs)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"right",fontSize:"14px"},children:[e.unitPrice.toLocaleString(),"\uc6d0"]}),(0,k.jsxs)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"right",fontSize:"14px"},children:[e.total.toLocaleString(),"\uc6d0"]}),(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"left",fontSize:"14px",verticalAlign:"top"},children:e.notes||"-"})]},t))}),(0,k.jsxs)("tfoot",{children:[(()=>{const e=(C.workItems||[]).reduce((e,t)=>e+(Number(t.laborPersonsGeneral)||0)*(Number(t.laborUnitRateGeneral)||0)+(Number(t.laborPersons)||0)*(Number(t.laborUnitRate)||0),0);return e>0?(0,k.jsxs)("tr",{style:{backgroundColor:"#dbeafe",color:"#1e3a8a"},children:[(0,k.jsx)("td",{colSpan:"8",style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"right",fontSize:"16px",fontWeight:"600"},children:"\uc778\ubd80\uc784 \uc18c\uacc4:"}),(0,k.jsxs)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontSize:"16px",fontWeight:"600"},children:[e.toLocaleString(),"\uc6d0"]})]}):null})(),(0,k.jsxs)("tr",{style:{backgroundColor:"#f0f0f0",fontWeight:"bold",color:"#1f2937"},children:[(0,k.jsx)("td",{colSpan:"8",style:{padding:"15px 16px",border:"1px solid #e5e7eb",textAlign:"right",fontSize:"17px"},children:"\ud569\uacc4:"}),(0,k.jsxs)("td",{style:{padding:"15px 16px",border:"1px solid #e5e7eb",textAlign:"center",fontSize:"17px",fontWeight:"bold"},children:[C.amount.toLocaleString(),"\uc6d0"]})]})]})]})})]}),(0,k.jsxs)("div",{style:{marginTop:"20px",marginBottom:"20px"},children:[(0,k.jsx)("h3",{style:{margin:"0 0 10px 0",fontSize:"18px",fontWeight:"bold",color:"#1f2937",borderLeft:"4px solid #4f46e5",paddingLeft:"12px"},children:"\uacb0\uc81c \uc815\ubcf4"}),(0,k.jsx)("div",{style:{backgroundColor:"#f9fafb",padding:"12px",borderRadius:"8px"},children:r.bankAccount&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{style:{margin:"5px 0",fontSize:"14px"},children:(0,k.jsx)("strong",{children:"\uacc4\uc88c\uc815\ubcf4:"})}),(0,k.jsx)("p",{style:{margin:"3px 0",fontSize:"14px"},children:r.bankAccount}),(0,k.jsxs)("p",{style:{margin:"3px 0",fontSize:"14px"},children:["\uc608\uae08\uc8fc: ",r.accountHolder]})]})})]}),(0,k.jsxs)("div",{style:{textAlign:"right",marginBottom:"20px"},children:[(0,k.jsx)("p",{style:{margin:"0 0 15px 0",fontSize:"16px",lineHeight:"1.6"},children:"\uc704\uc640 \uac19\uc774 \uccad\uad6c\ud569\ub2c8\ub2e4."}),(0,k.jsxs)("div",{style:{marginTop:"20px",textAlign:"right",border:"1px solid #e5e7eb",padding:"15px",borderRadius:"8px",backgroundColor:"#f9fafb"},children:[(0,k.jsx)("div",{style:{textAlign:"right",marginBottom:"10px"},children:(0,k.jsx)("p",{style:{margin:"0",fontSize:"16px",fontWeight:"bold"},children:r.name})}),(0,k.jsxs)("div",{style:{display:"flex",alignItems:"center",justifyContent:"flex-end",gap:"8px"},children:[(0,k.jsxs)("span",{style:{fontSize:"16px",fontWeight:"bold"},children:["\ub300\ud45c : ",r.representative.split("").join(" ")]}),(0,k.jsxs)("div",{style:{position:"relative",display:"inline-block"},children:[(0,k.jsx)("span",{style:{fontSize:"16px",fontWeight:"bold"},children:"(\uc778)"}),l&&(0,k.jsx)("img",{src:l,alt:"\ub3c4\uc7a5",style:{width:"60px",height:"60px",objectFit:"contain",border:"none",position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)"}})]})]})]})]}),(0,k.jsx)("div",{style:{position:"relative",marginTop:"30px",paddingTop:"15px",borderTop:"1px solid #e5e7eb"},children:(0,k.jsxs)("div",{style:{textAlign:"center",fontSize:"12px",color:"#6b7280",marginBottom:"8px"},children:[(0,k.jsx)("p",{style:{margin:"0 0 5px 0",lineHeight:"1.5"},children:"\uc774 \uccad\uad6c\uc11c\uc5d0 \ub300\ud55c \ubb38\uc758\uc0ac\ud56d\uc774 \uc788\uc73c\uc2dc\uba74 \uc5f0\ub77d \uc8fc\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."}),(0,k.jsx)("p",{style:{margin:"0",fontWeight:"bold",fontSize:"13px"},children:"\uac10\uc0ac\ud569\ub2c8\ub2e4."})]})})]})})})]})};const xe=function(){var e,t,s,r,a,l,d;const{clients:o,setClients:c,invoices:x,workItems:m}=I(),[p,u]=(0,n.useState)([]),[h,g]=(0,n.useState)(!1),[b,f]=(0,n.useState)(null),[j,y]=(0,n.useState)(!1),[v,N]=(0,n.useState)(null),[w,S]=(0,n.useState)({type:"PERSON",name:"",phone:"",mobile:"",email:"",address:"",notes:"",business:{businessName:"",representative:"",businessNumber:"",businessType:"",businessItem:"",businessAddress:"",taxEmail:""},workplaces:[{name:"",address:"",description:""}]}),A=(0,n.useRef)(null),[C,P]=(0,n.useState)(!1),_=o.map(e=>e.id),E=p.length>0&&p.length===_.length,z=e=>{const{name:t,value:s}=e.target,n="phone"===t||"mobile"===t?function(e){const t=String(e||"").replace(/\D/g,"");return t.startsWith("02")?t.length<=2?t:t.length<=5?"".concat(t.slice(0,2),"-").concat(t.slice(2)):t.length<=9?"".concat(t.slice(0,2),"-").concat(t.slice(2,t.length-4),"-").concat(t.slice(t.length-4)):"".concat(t.slice(0,2),"-").concat(t.slice(2,6),"-").concat(t.slice(6,10)):t.length<=3?t:t.length<=7?"".concat(t.slice(0,3),"-").concat(t.slice(3)):t.length<=11?"".concat(t.slice(0,3),"-").concat(t.slice(3,t.length-4),"-").concat(t.slice(t.length-4)):"".concat(t.slice(0,3),"-").concat(t.slice(3,7),"-").concat(t.slice(7,11))}(s):s;S(e=>(0,i.A)((0,i.A)({},e),{},{[t]:n}))},R=e=>{const{name:t,value:s}=e.target,n="businessNumber"===t?(e=>{const t=String(e||"").replace(/\D/g,"").slice(0,10);return t.length<=3?t:t.length<=5?"".concat(t.slice(0,3),"-").concat(t.slice(3)):"".concat(t.slice(0,3),"-").concat(t.slice(3,5),"-").concat(t.slice(5))})(s):s;S(e=>(0,i.A)((0,i.A)({},e),{},{business:(0,i.A)((0,i.A)({},e.business),{},{[t]:n})}))},U=(e,t,s)=>{const n=[...w.workplaces];n[e][t]=s,S(e=>(0,i.A)((0,i.A)({},e),{},{workplaces:n}))},q=(0,n.useMemo)(()=>{const e=new Map;return o.forEach(t=>e.set(t.id,{total:0,outstanding:0})),(x||[]).forEach(t=>{const s=Number(t.amount)||0;let n=null!=t.clientId&&""!==t.clientId?parseInt(t.clientId):null;if(!n){const e=o.find(e=>e.name===t.client);n=e?e.id:null}if(!n)return;const r=e.get(n)||{total:0,outstanding:0};r.total+=s,"\uacb0\uc81c\uc644\ub8cc"!==t.status&&(r.outstanding+=s),e.set(n,r)}),e},[o,x]),D=(0,n.useMemo)(()=>{let e=0,t=0;return(x||[]).forEach(s=>{const n=Number(s.amount)||0;e+=n,"\uacb0\uc81c\uc644\ub8cc"!==s.status&&(t+=n)}),{total:e,outstanding:t}},[x]),W=(0,n.useMemo)(()=>{const e=new Map,t=t=>(e.has(t)||e.set(t,new Set),e.get(t));o.forEach(e=>{const s=t(e.id);(e.projects||[]).forEach(e=>{const t=(e||"").trim();t&&s.add(t)})}),(m||[]).forEach(e=>{if(!e)return;const s=e.clientId;if(!s)return;const n=(e.projectName||"").trim();n&&t(s).add(n)}),(x||[]).forEach(e=>{const s=(e.project||"").trim();if(!s)return;let n=null!=e.clientId&&""!==e.clientId?parseInt(e.clientId):null;if(!n){const t=o.find(t=>t.name===e.client);n=t?t.id:null}n&&t(n).add(s)});const s=new Map;for(const[n,r]of e.entries())s.set(n,r.size);return s},[o,m,x]);return(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uac74\ucd95\uc8fc \uad00\ub9ac"}),(0,k.jsx)("p",{className:"text-gray-600",children:"\uac74\ucd95\uc8fc \uc815\ubcf4\ub97c \uad00\ub9ac\ud558\uace0 \ud504\ub85c\uc81d\ud2b8 \uc774\ub825\uc744 \ucd94\uc801\ud558\uc138\uc694"})]}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[p.length>0&&(0,k.jsxs)("button",{onClick:()=>P(!0),className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-4 rounded flex items-center",title:"\uc120\ud0dd\ub41c \uac74\ucd95\uc8fc \uc77c\uad04 \uc0ad\uc81c",children:["\ud83d\uddd1\ufe0f \uc120\ud0dd \uc0ad\uc81c(",p.length,")"]}),(0,k.jsx)("button",{onClick:()=>{le()},className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded flex items-center",children:"\ud83d\udcc1 \ud15c\ud50c\ub9bf \ub2e4\uc6b4\ub85c\ub4dc"}),(0,k.jsx)("button",{onClick:()=>{var e;return null===(e=A.current)||void 0===e?void 0:e.click()},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex items-center",children:"\ud83d\udce4 Excel \uac00\uc838\uc624\uae30"}),(0,k.jsx)("button",{onClick:()=>{te(o)},className:"bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded flex items-center",children:"\ud83d\udce5 Excel \ub0b4\ubcf4\ub0b4\uae30"}),(0,k.jsx)("button",{onClick:()=>g(!0),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"+ \uc0c8 \uac74\ucd95\uc8fc"})]})]}),(0,k.jsx)("input",{type:"file",ref:A,onChange:async e=>{const t=e.target.files[0];if(t){try{const e=await ae.clients(t);c(t=>[...t,...e]),alert("".concat(e.length,"\uac1c\uc758 \uac74\ucd95\uc8fc \uc815\ubcf4\ub97c \uac00\uc838\uc654\uc2b5\ub2c8\ub2e4."))}catch(s){alert("Excel \ud30c\uc77c\uc744 \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+s.message)}e.target.value=""}},accept:".xlsx,.xls",style:{display:"none"}}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"\ucd1d \uac74\ucd95\uc8fc"}),(0,k.jsx)("p",{className:"text-xl font-bold text-gray-900",children:o.length})]}),(0,k.jsx)("div",{className:"bg-blue-500 rounded-full p-3 text-white text-2xl",children:"\ud83d\udc65"})]})}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"\ucd1d \uccad\uad6c\uae08\uc561 :"}),(0,k.jsxs)("p",{className:"text-xl font-bold text-green-600",children:[D.total.toLocaleString(),"\uc6d0"]})]}),(0,k.jsx)("div",{className:"bg-green-500 rounded-full p-3 text-white text-2xl",children:"\ud83d\udcb0"})]})}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"\ubbf8\uc218\uae08"}),(0,k.jsxs)("p",{className:"text-xl font-bold text-red-600",children:[D.outstanding.toLocaleString(),"\uc6d0"]})]}),(0,k.jsx)("div",{className:"bg-red-500 rounded-full p-3 text-white text-2xl",children:"\u26a0\ufe0f"})]})}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"\ubbf8\uc218\uae08 \uac74\uc218"}),(0,k.jsx)("p",{className:"text-xl font-bold text-orange-600",children:o.filter(e=>{var t;return((null===(t=q.get(e.id))||void 0===t?void 0:t.outstanding)||0)>0}).length})]}),(0,k.jsx)("div",{className:"bg-orange-500 rounded-full p-3 text-white text-2xl",children:"\ud83d\udccb"})]})})]}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,k.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,k.jsx)("thead",{className:"bg-gray-50",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,k.jsx)("input",{type:"checkbox",className:"rounded border-gray-300",checked:E,onChange:e=>{return t=e.target.checked,u(t?_:[]);var t},title:"\uc804\uccb4 \uc120\ud0dd"})}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc774\ub984"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc5f0\ub77d\ucc98"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc8fc\uc18c"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\ud504\ub85c\uc81d\ud2b8 \uc218"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\ucd1d \uccad\uad6c\uc561"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\ubbf8\uc218\uae08"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc791\uc5c5"})]})}),(0,k.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(e=>{var t,s,n,r;return(0,k.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("input",{type:"checkbox",className:"rounded border-gray-300",checked:p.includes(e.id),onChange:t=>{return s=e.id,n=t.target.checked,u(e=>n?Array.from(new Set([...e,s])):e.filter(e=>e!==s));var s,n},title:"\ud56d\ubaa9 \uc120\ud0dd"})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"h-10 w-10 bg-gray-300 rounded-full flex items-center justify-center",children:(0,k.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name.charAt(0)})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.name,"BUSINESS"===e.type&&(0,k.jsx)("span",{className:"ml-2 text-xs px-2 py-0.5 rounded bg-yellow-100 text-yellow-800",children:"\uc0ac\uc5c5\uc790"})]}),(0,k.jsxs)("div",{className:"text-sm text-gray-500",children:[e.email,"BUSINESS"===e.type&&(null===(t=e.business)||void 0===t?void 0:t.businessNumber)&&(0,k.jsxs)("span",{className:"ml-2",children:["\uc0ac\uc5c5\uc790\ub4f1\ub85d\ubc88\ud638: ",e.business.businessNumber]})]})]})]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"text-sm text-gray-900",children:[e.phone&&(0,k.jsxs)("div",{children:["\uc804\ud654: ",e.phone]}),e.mobile&&(0,k.jsxs)("div",{children:["\ud734\ub300\ud3f0: ",e.mobile]})]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("div",{className:"text-sm text-gray-900",children:e.address})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"text-sm text-gray-900",children:[W.get(e.id)||0,"\uac1c"]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[((null===(s=q.get(e.id))||void 0===s?void 0:s.total)||0).toLocaleString(),"\uc6d0"]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"text-sm font-medium ".concat(((null===(n=q.get(e.id))||void 0===n?void 0:n.outstanding)||0)>0?"text-red-600":"text-green-600"),children:[((null===(r=q.get(e.id))||void 0===r?void 0:r.outstanding)||0).toLocaleString(),"\uc6d0"]})}),(0,k.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,k.jsx)("button",{onClick:()=>(e=>{f(e)})(e),className:"text-blue-600 hover:text-blue-900 mr-2",children:"\uc0c1\uc138\ubcf4\uae30"}),(0,k.jsx)("button",{className:"text-green-600 hover:text-green-900 mr-2",onClick:()=>(e=>{y(!0),N(e.id),S({type:e.type||"PERSON",name:e.name,phone:e.phone,mobile:e.mobile||"",email:e.email,address:e.address,notes:e.notes,business:e.business||{businessName:"",representative:"",businessNumber:"",businessType:"",businessItem:"",businessAddress:"",taxEmail:""},workplaces:e.workplaces||[{name:"",address:"",description:""}]}),g(!0)})(e),children:"\ud3b8\uc9d1"}),(0,k.jsx)("button",{className:"text-red-600 hover:text-red-900",children:"\uc0ad\uc81c"})]})]},e.id)})})]})}),C&&(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\uc120\ud0dd \uc0ad\uc81c"}),(0,k.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["\uc120\ud0dd\ub41c ",p.length,"\uba85\uc758 \uac74\ucd95\uc8fc\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."]}),(0,k.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,k.jsx)("button",{className:"btn-secondary",onClick:()=>P(!1),children:"\ucde8\uc18c"}),(0,k.jsx)("button",{className:"btn-primary bg-red-600 hover:bg-red-700",onClick:()=>{0!==p.length&&(c(e=>e.filter(e=>!p.includes(e.id))),u([]),P(!1))},children:"\uc0ad\uc81c"})]})]})}),h&&(0,k.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,k.jsx)("div",{className:"relative top-10 mx-auto p-5 border w-4/5 max-w-2xl shadow-lg rounded-md bg-white",children:(0,k.jsxs)("div",{className:"mt-3",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:j?"\uac74\ucd95\uc8fc \uc815\ubcf4 \uc218\uc815":"\uc0c8 \uac74\ucd95\uc8fc \ucd94\uac00"}),(0,k.jsxs)("form",{onSubmit:e=>{e.preventDefault();const t=(0,i.A)({},w);if("BUSINESS"===t.type){var s,n;!t.name&&null!==(s=t.business)&&void 0!==s&&s.businessName&&(t.name=t.business.businessName);const e=String((null===(n=t.business)||void 0===n?void 0:n.businessNumber)||"").replace(/\D/g,"");if(e.length>0&&10!==e.length)return void alert("\uc0ac\uc5c5\uc790\ub4f1\ub85d\ubc88\ud638\ub294 \uc22b\uc790 10\uc790\ub9ac\uc5ec\uc57c \ud569\ub2c8\ub2e4.")}if(j){const e=(0,i.A)((0,i.A)({},t),{},{id:v,workplaces:w.workplaces.map((e,t)=>(0,i.A)((0,i.A)({},e),{},{id:e.id||t+1})),projects:Array.from(new Set((w.workplaces||[]).map(e=>(e.description||"").trim()).filter(Boolean)))});c(t=>t.map(t=>t.id===v?(0,i.A)((0,i.A)((0,i.A)({},t),e),{},{totalBilled:t.totalBilled,outstanding:t.outstanding}):t))}else{const e=(0,i.A)((0,i.A)({},t),{},{id:o.length+1,workplaces:w.workplaces.map((e,t)=>(0,i.A)((0,i.A)({},e),{},{id:t+1})),projects:Array.from(new Set((w.workplaces||[]).map(e=>(e.description||"").trim()).filter(Boolean))),totalBilled:0,outstanding:0});c(t=>[...t,e])}S({type:"PERSON",name:"",phone:"",mobile:"",email:"",address:"",notes:"",business:{businessName:"",representative:"",businessNumber:"",businessType:"",businessItem:"",businessAddress:"",taxEmail:""},workplaces:[{name:"",address:"",description:""}]}),g(!1),y(!1),N(null)},className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\uc720\ud615"}),(0,k.jsxs)("div",{className:"flex items-center gap-6",children:[(0,k.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm",children:[(0,k.jsx)("input",{type:"radio",name:"type",value:"PERSON",checked:"PERSON"===w.type,onChange:()=>S(e=>(0,i.A)((0,i.A)({},e),{},{type:"PERSON"}))}),"\uac1c\uc778"]}),(0,k.jsxs)("label",{className:"inline-flex items-center gap-2 text-sm",children:[(0,k.jsx)("input",{type:"radio",name:"type",value:"BUSINESS",checked:"BUSINESS"===w.type,onChange:()=>S(e=>(0,i.A)((0,i.A)({},e),{},{type:"BUSINESS"}))}),"\uc0ac\uc5c5\uc790"]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc774\ub984"}),(0,k.jsx)("input",{type:"text",name:"name",value:w.name,onChange:z,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),"BUSINESS"===w.type&&(0,k.jsx)("div",{className:"border rounded-md p-3 bg-yellow-50",children:(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc0c1\ud638"}),(0,k.jsx)("input",{type:"text",name:"businessName",value:w.business.businessName,onChange:R,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:"BUSINESS"===w.type})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\ub300\ud45c\uc790"}),(0,k.jsx)("input",{type:"text",name:"representative",value:w.business.representative,onChange:R,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:"BUSINESS"===w.type})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc0ac\uc5c5\uc790\ub4f1\ub85d\ubc88\ud638"}),(0,k.jsx)("input",{type:"text",name:"businessNumber",value:w.business.businessNumber,onChange:R,placeholder:"000-00-00000",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:"BUSINESS"===w.type})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\ubc1c\ud589 \uc774\uba54\uc77c"}),(0,k.jsx)("input",{type:"email",name:"taxEmail",value:w.business.taxEmail,onChange:R,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:"BUSINESS"===w.type})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc5c5\ud0dc"}),(0,k.jsx)("input",{type:"text",name:"businessType",value:w.business.businessType,onChange:R,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc5c5\uc885"}),(0,k.jsx)("input",{type:"text",name:"businessItem",value:w.business.businessItem,onChange:R,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,k.jsxs)("div",{className:"md:col-span-2",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc0ac\uc5c5\uc7a5 \uc8fc\uc18c"}),(0,k.jsx)("input",{type:"text",name:"businessAddress",value:w.business.businessAddress,onChange:R,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]})]})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc804\ud654\ubc88\ud638"}),(0,k.jsx)("input",{type:"tel",name:"phone",value:w.phone,onChange:z,placeholder:"02-1234-5678",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\ud734\ub300\uc804\ud654"}),(0,k.jsx)("input",{type:"tel",name:"mobile",value:w.mobile,onChange:z,placeholder:"010-1234-5678",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc774\uba54\uc77c"}),(0,k.jsx)("input",{type:"email",name:"email",value:w.email,onChange:z,placeholder:"\uc120\ud0dd\uc0ac\ud56d",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc8fc\uc18c"}),(0,k.jsx)("textarea",{name:"address",value:w.address,onChange:z,rows:"2",placeholder:"\uc120\ud0dd\uc0ac\ud56d",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uba54\ubaa8"}),(0,k.jsx)("textarea",{name:"notes",value:w.notes,onChange:z,rows:"3",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc791\uc5c5\uc7a5 \uc815\ubcf4"}),(0,k.jsx)("button",{type:"button",onClick:()=>{S(e=>(0,i.A)((0,i.A)({},e),{},{workplaces:[...e.workplaces,{name:"",address:"",description:""}]}))},className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ \uc791\uc5c5\uc7a5 \ucd94\uac00"})]}),w.workplaces.map((e,t)=>(0,k.jsxs)("div",{className:"border rounded-md p-3 mb-3 bg-gray-50",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,k.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["\uc791\uc5c5\uc7a5 ",t+1]}),w.workplaces.length>1&&(0,k.jsx)("button",{type:"button",onClick:()=>(e=>{if(w.workplaces.length>1){const t=w.workplaces.filter((t,s)=>s!==e);S(e=>(0,i.A)((0,i.A)({},e),{},{workplaces:t}))}})(t),className:"text-red-600 hover:text-red-800 text-sm",children:"\uc0ad\uc81c"})]}),(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsx)("input",{type:"text",placeholder:"\uc791\uc5c5\uc7a5\uba85 (\uc608: \uc2e0\ucd95 \uc8fc\ud0dd, \uce74\ud398 \uc778\ud14c\ub9ac\uc5b4 \ub4f1)",value:e.name,onChange:e=>U(t,"name",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0}),(0,k.jsx)("input",{type:"text",placeholder:"\uc791\uc5c5\uc7a5 \uc8fc\uc18c",value:e.address,onChange:e=>U(t,"address",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0}),(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\ud504\ub85c\uc81d\ud2b8"}),(0,k.jsx)("textarea",{placeholder:"\ud504\ub85c\uc81d\ud2b8 (\ud544\uc218\uc0ac\ud56d)",value:e.description,onChange:e=>U(t,"description",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",rows:"2",required:!0}),(0,k.jsx)("p",{className:"mt-1 text-xs text-red-600",children:"\ud544\uc218\uc0ac\ud56d: \ud504\ub85c\uc81d\ud2b8\uba85\uc744 \uc785\ub825\ud574\uc8fc\uc138\uc694."})]})]},t))]}),(0,k.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,k.jsx)("button",{type:"button",onClick:()=>{g(!1),y(!1),N(null),S({name:"",phone:"",mobile:"",email:"",address:"",notes:"",workplaces:[{name:"",address:"",description:""}]})},className:"px-4 py-2 text-gray-500 hover:text-gray-700",children:"\ucde8\uc18c"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded",children:j?"\uc218\uc815":"\ucd94\uac00"})]})]})]})})}),b&&(0,k.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,k.jsxs)("div",{className:"relative top-10 mx-auto p-5 border w-4/5 max-w-3xl shadow-lg rounded-md bg-white",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsxs)("h3",{className:"text-lg font-medium text-gray-900",children:["\uac74\ucd95\uc8fc \uc0c1\uc138 \uc815\ubcf4 - ",b.name]}),(0,k.jsx)("button",{onClick:()=>f(null),className:"text-gray-400 hover:text-gray-600",children:"\u2715"})]}),(0,k.jsxs)("div",{className:"border rounded-lg p-6 bg-gray-50",children:[(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-6 mb-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-medium mb-3",children:"\uae30\ubcf8 \uc815\ubcf4"}),(0,k.jsxs)("p",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"\uc774\ub984:"})," ",b.name]}),b.phone&&(0,k.jsxs)("p",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"\uc804\ud654\ubc88\ud638:"})," ",b.phone]}),b.mobile&&(0,k.jsxs)("p",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"\ud734\ub300\uc804\ud654:"})," ",b.mobile]}),b.email&&(0,k.jsxs)("p",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"\uc774\uba54\uc77c:"})," ",b.email]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\uc8fc\uc18c:"})," ",b.address]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-medium mb-3",children:"\uc7ac\ubb34 \uc815\ubcf4"}),(0,k.jsxs)("p",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"\ucd1d \uccad\uad6c\uc561:"})," ",b.totalBilled.toLocaleString(),"\uc6d0"]}),(0,k.jsxs)("p",{className:"mb-2",children:[(0,k.jsx)("strong",{children:"\ubbf8\uc218\uae08:"}),(0,k.jsxs)("span",{className:b.outstanding>0?"text-red-600 font-medium":"text-green-600",children:[b.outstanding.toLocaleString(),"\uc6d0"]})]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\uc644\ub8cc \ud504\ub85c\uc81d\ud2b8:"})," ",b.projects.length,"\uac1c"]})]})]}),"BUSINESS"===b.type&&(0,k.jsxs)("div",{className:"border rounded-md p-4 bg-yellow-50 mb-6",children:[(0,k.jsx)("h4",{className:"font-medium mb-3",children:"\uc0ac\uc5c5\uc790 \uc815\ubcf4"}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\uc0c1\ud638:"})," ",(null===(e=b.business)||void 0===e?void 0:e.businessName)||"-"]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\ub300\ud45c\uc790:"})," ",(null===(t=b.business)||void 0===t?void 0:t.representative)||"-"]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\uc0ac\uc5c5\uc790\ub4f1\ub85d\ubc88\ud638:"})," ",(null===(s=b.business)||void 0===s?void 0:s.businessNumber)||"-"]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\ubc1c\ud589 \uc774\uba54\uc77c:"})," ",(null===(r=b.business)||void 0===r?void 0:r.taxEmail)||"-"]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\uc5c5\ud0dc:"})," ",(null===(a=b.business)||void 0===a?void 0:a.businessType)||"-"]}),(0,k.jsxs)("p",{children:[(0,k.jsx)("strong",{children:"\uc5c5\uc885:"})," ",(null===(l=b.business)||void 0===l?void 0:l.businessItem)||"-"]}),(0,k.jsxs)("p",{className:"col-span-2",children:[(0,k.jsx)("strong",{children:"\uc0ac\uc5c5\uc7a5 \uc8fc\uc18c:"})," ",(null===(d=b.business)||void 0===d?void 0:d.businessAddress)||"-"]})]})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("h4",{className:"font-medium mb-2",children:"\uc791\uc5c5\uc7a5 \uc815\ubcf4"}),b.workplaces&&b.workplaces.length>0?(0,k.jsx)("div",{className:"space-y-3",children:b.workplaces.map((e,t)=>(0,k.jsxs)("div",{className:"bg-white rounded border p-3",children:[(0,k.jsxs)("div",{className:"flex justify-between items-start mb-2",children:[(0,k.jsx)("h5",{className:"font-medium text-gray-900",children:e.name}),(0,k.jsxs)("span",{className:"text-xs bg-blue-100 text-blue-600 px-2 py-1 rounded",children:["\uc791\uc5c5\uc7a5 ",t+1]})]}),(0,k.jsxs)("p",{className:"text-sm text-gray-600 mb-1",children:[(0,k.jsx)("strong",{children:"\uc8fc\uc18c:"})," ",e.address]}),e.description&&(0,k.jsxs)("p",{className:"text-sm text-gray-600",children:[(0,k.jsx)("strong",{children:"\ud504\ub85c\uc81d\ud2b8:"})," ",e.description]})]},t))}):(0,k.jsx)("p",{className:"text-gray-500 italic",children:"\ub4f1\ub85d\ub41c \uc791\uc5c5\uc7a5\uc774 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),(0,k.jsxs)("div",{className:"mb-4",children:[(0,k.jsx)("h4",{className:"font-medium mb-2",children:"\ud504\ub85c\uc81d\ud2b8 \uc774\ub825"}),b.projects.length>0?(0,k.jsx)("ul",{className:"bg-white rounded border p-3",children:b.projects.map((e,t)=>(0,k.jsxs)("li",{className:"py-1 border-b last:border-b-0",children:["\u2022 ",e]},t))}):(0,k.jsx)("p",{className:"text-gray-500 italic",children:"\uc9c4\ud589\ub41c \ud504\ub85c\uc81d\ud2b8\uac00 \uc5c6\uc2b5\ub2c8\ub2e4."})]}),b.notes&&(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"font-medium mb-2",children:"\uba54\ubaa8"}),(0,k.jsx)("p",{className:"bg-white rounded border p-3",children:b.notes})]})]})]})})]})};const me=function(){const{clients:e,setClients:t,workItems:s,setWorkItems:r,invoices:a,setInvoices:l,getCompletedWorkItemsByClient:d,addWorkItemToInvoice:o,units:c,categories:x}=I(),m=(0,L.Zp)(),[p,u]=(0,n.useState)(""),[h,g]=(0,n.useState)(""),[b,f]=(0,n.useState)([]),j=(0,n.useRef)(null),[y,v]=(0,n.useState)(!1),[N,w]=(0,n.useState)(!1),[S,A]=(0,n.useState)(null),[C,P]=(0,n.useState)({clientId:"",workplaceId:"",name:"",category:"",defaultPrice:0,quantity:1,unit:"",description:"",projectName:"",status:"\uc608\uc815",notes:"",date:(new Date).toISOString().split("T")[0],laborPersons:"",laborUnitRate:""}),[_,E]=(0,n.useState)(!1),[z,R]=(0,n.useState)([{name:"",category:"",defaultPrice:0,quantity:1,unit:"",description:"",status:"\uc608\uc815",notes:"",laborPersons:"",laborUnitRate:""}]),[U,q]=(0,n.useState)({clientId:"",workplaceId:"",projectName:"",date:(new Date).toISOString().split("T")[0],bulkLaborPersons:"",bulkLaborUnitRate:""}),[D,W]=(0,n.useState)(!1),B=["\uc608\uc815","\uc9c4\ud589\uc911","\uc644\ub8cc","\ubcf4\ub958"],[O,T]=(0,n.useState)(""),M=(0,n.useRef)(null),F=(0,n.useRef)(null),[Y,H]=(0,n.useState)(!1),[K,G]=(0,n.useState)(()=>new Date);(0,n.useEffect)(()=>{if(C.date){const[e,t]=C.date.split("-").map(Number);e&&t&&G(new Date(e,t-1,1))}},[C.date]),(0,n.useEffect)(()=>{const e=e=>{M.current&&!M.current.contains(e.target)&&H(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const J=e=>String(e).padStart(2,"0"),V=(0,n.useRef)(null),X=(0,n.useRef)(null),[Z,Q]=(0,n.useState)(!1),[$,ee]=(0,n.useState)(()=>new Date);(0,n.useEffect)(()=>{if(U.date){const[e,t]=U.date.split("-").map(Number);e&&t&&ee(new Date(e,t-1,1))}},[U.date]),(0,n.useEffect)(()=>{const e=e=>{V.current&&!V.current.contains(e.target)&&Q(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const te=t=>{if(!t)return[];const n=parseInt(t),r=s.filter(e=>e.clientId===n).map(e=>e.projectName).filter(Boolean),a=e.find(e=>e.id===n),l=((null===a||void 0===a?void 0:a.projects)||[]).filter(Boolean),i=((null===a||void 0===a?void 0:a.workplaces)||[]).map(e=>e.description).filter(Boolean);return Array.from(new Set([...r,...l,...i]))},ne=s.filter(e=>(!p||e.clientId===parseInt(p))&&(!h||e.projectName===h)),re=t=>{const s=e.find(e=>e.id===parseInt(t));return(null===s||void 0===s?void 0:s.workplaces)||[]},le=e=>e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),de=e=>{var t,s,n,r;return(parseInt(null!==(t=null===e||void 0===e?void 0:e.laborPersons)&&void 0!==t?t:0,10)||0)*(parseInt(null!==(s=null===e||void 0===e?void 0:e.laborUnitRate)&&void 0!==s?s:0,10)||0)+(parseInt(null!==(n=null===e||void 0===e?void 0:e.laborPersonsGeneral)&&void 0!==n?n:0,10)||0)*(parseInt(null!==(r=null===e||void 0===e?void 0:e.laborUnitRateGeneral)&&void 0!==r?r:0,10)||0)},oe=e=>{const{name:t,value:s}=e.target;if("defaultPrice"===t||"quantity"===t||"laborPersons"===t||"laborUnitRate"===t){const e=s.replace(/[^\d]/g,"");if(""===e)P(e=>(0,i.A)((0,i.A)({},e),{},{[t]:""}));else{const s=parseInt(e,10);P(e=>(0,i.A)((0,i.A)({},e),{},{[t]:s}))}}else{const e="clientId"===t||"workplaceId"===t?parseInt(s)||0:s;P(n=>{const r=(0,i.A)((0,i.A)({},n),{},{[t]:e});if("clientId"===t&&(r.workplaceId="",r.projectName="",E(!1)),"projectName"===t&&("custom"===s?(E(!0),r.projectName=""):E(!1)),"workplaceId"===t){const e=re(r.clientId).find(e=>e.id===parseInt(s)),t=((null===e||void 0===e?void 0:e.description)||"").trim();t&&(r.projectName=t)}return r})}},ce=()=>{P({clientId:"",workplaceId:"",name:"",category:"",defaultPrice:0,quantity:1,unit:"",description:"",projectName:"",status:"\uc608\uc815",notes:"",date:(new Date).toISOString().split("T")[0],laborPersons:"",laborUnitRate:""}),A(null),v(!1),E(!1)},xe=e=>{const{name:t,value:s}=e.target;q(e=>(0,i.A)((0,i.A)({},e),{},{[t]:"clientId"===t||"workplaceId"===t?parseInt(s)||"":"bulkLaborPersons"===t||"bulkLaborUnitRate"===t?""===s.replace(/[^\d]/g,"")?"":parseInt(s.replace(/[^\d]/g,""),10):s})),"clientId"===t&&q(e=>(0,i.A)((0,i.A)({},e),{},{workplaceId:""})),"projectName"===t&&("custom"===s?(W(!0),q(e=>(0,i.A)((0,i.A)({},e),{},{projectName:""}))):W(!1))},me=(e,t,s)=>{const n=[...z];if("defaultPrice"===t||"quantity"===t||"laborPersons"===t||"laborUnitRate"===t){const r=String(s).replace(/[^\d]/g,"");n[e][t]=""===r?"":parseInt(r,10)}else n[e][t]=s;R(n)},pe=e=>{const t=[...new Set(s.map(e=>e.projectName).filter(e=>e))].sort(),n=t.includes(e.projectName);P({clientId:e.clientId,workplaceId:e.workplaceId||"",name:e.name,category:e.category,defaultPrice:e.defaultPrice,quantity:e.quantity||1,unit:e.unit,description:e.description,projectName:e.projectName,status:e.status,notes:e.notes||"",date:e.date||(new Date).toISOString().split("T")[0],laborPersons:e.laborPersons||"",laborUnitRate:e.laborUnitRate||""}),A(e),E(!n),v(!0)};return(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"mb-8",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uc791\uc5c5 \ud56d\ubaa9 \uad00\ub9ac"}),(0,k.jsx)("p",{className:"text-gray-600",children:"\uac74\ucd95\uc8fc\ubcc4 \uc791\uc5c5 \ud56d\ubaa9\uc744 \uad00\ub9ac\ud558\uace0 \uc9c4\ud589 \uc0c1\ud669\uc744 \ucd94\uc801\ud558\uc138\uc694"})]}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("button",{onClick:()=>{ie()},className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded flex items-center",children:"\ud83d\udcc1 \ud15c\ud50c\ub9bf \ub2e4\uc6b4\ub85c\ub4dc"}),(0,k.jsx)("button",{onClick:()=>{var e;return null===(e=j.current)||void 0===e?void 0:e.click()},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded flex items-center",children:"\ud83d\udce4 Excel \uac00\uc838\uc624\uae30"}),(0,k.jsx)("button",{onClick:()=>{se(ne)},className:"bg-orange-600 hover:bg-orange-700 text-white font-bold py-2 px-4 rounded flex items-center",children:"\ud83d\udce5 Excel \ub0b4\ubcf4\ub0b4\uae30"}),(0,k.jsx)("button",{onClick:()=>w(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded",children:"+ \uc77c\uad04 \uc791\uc5c5 \ud56d\ubaa9 \ucd94\uac00"}),(0,k.jsx)("button",{onClick:()=>v(!0),className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded",children:"+ \uc0c8 \uc791\uc5c5 \ud56d\ubaa9"})]})]}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-4 flex-wrap",children:[(0,k.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"\ud544\ud130:"}),(0,k.jsxs)("select",{value:p,onChange:e=>{u(e.target.value),g("")},className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",style:{fontSize:"15px"},children:[(0,k.jsx)("option",{value:"",style:{fontSize:"15px"},children:"\uc804\uccb4 \uac74\ucd95\uc8fc"}),e.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,k.jsxs)("select",{value:h,onChange:e=>g(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-purple-500",style:{fontSize:"15px"},disabled:!p,children:[(0,k.jsx)("option",{value:"",style:{fontSize:"15px"},children:p?"\uc804\uccb4 \ud504\ub85c\uc81d\ud2b8":"\uba3c\uc800 \uac74\ucd95\uc8fc\ub97c \uc120\ud0dd\ud558\uc138\uc694"}),p&&te(p).map(e=>(0,k.jsx)("option",{value:e,children:e},e))]}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:p||h?"".concat(ne.length,"\uac1c \ud56d\ubaa9"):"\ucd1d ".concat(s.length,"\uac1c \ud56d\ubaa9")}),(p||h)&&(0,k.jsx)("button",{onClick:()=>{u(""),g("")},className:"text-xs text-purple-600 hover:text-purple-800",children:"\ud544\ud130 \ucd08\uae30\ud654"})]}),(0,k.jsx)("div",{className:"flex items-center space-x-2",children:b.length>0&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"flex items-center space-x-2 mr-2",children:[(0,k.jsx)("label",{className:"text-xs text-gray-600",children:"\uc0c1\ud0dc \uc77c\uad04 \ubcc0\uacbd"}),(0,k.jsxs)("select",{value:O,onChange:e=>T(e.target.value),className:"border border-gray-300 rounded-md px-2 py-1 text-xs focus:outline-none focus:ring-2 focus:ring-purple-500",children:[(0,k.jsx)("option",{value:"",children:"\uc0c1\ud0dc \uc120\ud0dd"}),B.map(e=>(0,k.jsx)("option",{value:e,children:e},e))]}),(0,k.jsx)("button",{onClick:()=>{O?(r(e=>e.map(e=>b.includes(e.id)?(0,i.A)((0,i.A)({},e),{},{status:O}):e)),T("")):alert("\ubcc0\uacbd\ud560 \uc0c1\ud0dc\ub97c \uc120\ud0dd\ud558\uc138\uc694.")},className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-3 rounded flex items-center text-xs",children:"\uc801\uc6a9"})]}),(0,k.jsxs)("button",{onClick:()=>{if(0===b.length)return void alert("\uccad\uad6c\uc11c\uc5d0 \ud3ec\ud568\ud560 \uc791\uc5c5 \ud56d\ubaa9\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.");const t=s.filter(e=>b.includes(e.id)).filter(e=>"\uc644\ub8cc"===e.status);if(0===t.length)return void alert("\uc120\ud0dd\ub41c \ud56d\ubaa9 \uc911 \uc644\ub8cc\ub41c \uc791\uc5c5 \ud56d\ubaa9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4. \uc644\ub8cc\ub41c \uc791\uc5c5 \ud56d\ubaa9\ub9cc \uccad\uad6c\uc11c\uc5d0 \ud3ec\ud568\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");if(t.length<b.length){const e=b.length-t.length;if(!window.confirm("\uc120\ud0dd\ub41c \ud56d\ubaa9 \uc911 ".concat(e,"\uac1c\ub294 \uc644\ub8cc\ub418\uc9c0 \uc54a\uc544 \uccad\uad6c\uc11c\uc5d0 \ud3ec\ud568\ub418\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4. \uc644\ub8cc\ub41c ").concat(t.length,"\uac1c \ud56d\ubaa9\uc73c\ub85c \uccad\uad6c\uc11c\ub97c \uc0dd\uc131\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")))return}const n=t[0].clientId;if(!t.every(e=>e.clientId===n))return void alert("\uac19\uc740 \uac74\ucd95\uc8fc\uc758 \uc791\uc5c5 \ud56d\ubaa9\ub9cc \ud558\ub098\uc758 \uccad\uad6c\uc11c\ub85c \uc0dd\uc131\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4.");const r=t.filter(e=>!a.some(t=>t.workItems.some(s=>s.name===e.name&&t.client===e.clientName)));if(0===r.length)return void alert("\uc120\ud0dd\ub41c \ud56d\ubaa9\ub4e4\uc774 \uc774\ubbf8 \uccad\uad6c\uc11c\uc5d0 \ud3ec\ud568\ub418\uc5b4 \uc788\uc2b5\ub2c8\ub2e4.");const i=r[0],d=e.find(e=>e.id===i.clientId),c=null===d||void 0===d?void 0:d.workplaces.find(e=>e.id===i.workplaceId),x="INV-".concat((new Date).getFullYear(),"-").concat(String(a.length+1).padStart(3,"0")),p=r.map(e=>o(e)),u=p.reduce((e,t)=>e+t.total,0),h={id:x,client:i.clientName,project:i.projectName,workplaceAddress:(null===c||void 0===c?void 0:c.address)||"",amount:u,status:"\ubc1c\uc1a1\ub300\uae30",date:(new Date).toISOString().split("T")[0],dueDate:new Date(Date.now()+12096e5).toISOString().split("T")[0],workItems:p};l(e=>[...e,h]),f([]),alert("\uccad\uad6c\uc11c ".concat(x,"\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4! (").concat(r.length,"\uac1c \ud56d\ubaa9 \ud3ec\ud568)")),m("/invoices")},className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-3 rounded flex items-center text-sm",children:["\ud83d\udcc8 \uccad\uad6c\uc11c \uc0dd\uc131 (",b.length,")"]}),(0,k.jsxs)("button",{onClick:()=>{0!==b.length?window.confirm("\uc120\ud0dd\ub41c ".concat(b.length,"\uac1c\uc758 \uc791\uc5c5 \ud56d\ubaa9\uc744 \uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))&&(r(e=>e.filter(e=>!b.includes(e.id))),f([]),alert("".concat(b.length,"\uac1c\uc758 \uc791\uc5c5 \ud56d\ubaa9\uc774 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))):alert("\uc0ad\uc81c\ud560 \uc791\uc5c5 \ud56d\ubaa9\uc744 \uc120\ud0dd\ud574\uc8fc\uc138\uc694.")},className:"bg-red-600 hover:bg-red-700 text-white font-bold py-2 px-3 rounded flex items-center text-sm",children:["\ud83d\uddd1\ufe0f \uc0ad\uc81c (",b.length,")"]})]})})]})}),(0,k.jsx)("input",{type:"file",ref:j,onChange:async e=>{const t=e.target.files[0];if(t){try{const e=await ae.workItems(t);r(t=>[...t,...e]),alert("".concat(e.length,"\uac1c\uc758 \uc791\uc5c5 \ud56d\ubaa9\uc744 \uac00\uc838\uc654\uc2b5\ub2c8\ub2e4."))}catch(s){alert("Excel \ud30c\uc77c\uc744 \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4: "+s.message)}e.target.value=""}},accept:".xlsx,.xls",style:{display:"none"}})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:p||h?"\ud544\ud130\ub41c \uc791\uc5c5":"\ucd1d \uc791\uc5c5 \ud56d\ubaa9"}),(0,k.jsx)("p",{className:"text-xl font-bold text-gray-900",children:ne.length})]}),(0,k.jsx)("div",{className:"bg-blue-500 rounded-full p-3 text-white text-2xl",children:"\ud83d\udd27"})]})}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"\uc644\ub8cc\ub41c \uc791\uc5c5"}),(0,k.jsx)("p",{className:"text-xl font-bold text-green-600",children:ne.filter(e=>"\uc644\ub8cc"===e.status).length})]}),(0,k.jsx)("div",{className:"bg-green-500 rounded-full p-3 text-white text-2xl",children:"\u2705"})]})}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"\uc9c4\ud589 \uc911\uc778 \uc791\uc5c5"}),(0,k.jsx)("p",{className:"text-xl font-bold text-purple-600",children:ne.filter(e=>"\uc9c4\ud589\uc911"===e.status).length})]}),(0,k.jsx)("div",{className:"bg-purple-500 rounded-full p-3 text-white text-2xl",children:"\ud83d\udea7"})]})}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"\ucd1d \uc791\uc5c5 \uae08\uc561"}),(0,k.jsxs)("p",{className:"text-xl font-bold text-orange-600",children:[ne.reduce((e,t)=>e+(t.defaultPrice||0)*(t.quantity||1)+de(t),0).toLocaleString(),"\uc6d0"]})]}),(0,k.jsx)("div",{className:"bg-orange-500 rounded-full p-3 text-white text-2xl",children:"\ud83d\udcb0"})]})})]}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:(0,k.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,k.jsx)("thead",{className:"bg-gray-50",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:(0,k.jsx)("input",{type:"checkbox",onChange:e=>{return t=e.target.checked,void f(t?ne.map(e=>e.id):[]);var t},checked:b.length>0&&b.length===ne.length,className:"rounded border-gray-300",title:"\uc804\uccb4 \uc120\ud0dd"})}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uac74\ucd95\uc8fc"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\ub0b4\uc6a9"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc791\uc5c5\uc7a5"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\ud504\ub85c\uc81d\ud2b8"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uce74\ud14c\uace0\ub9ac"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\ub2e8\uac00/\uc218\ub7c9"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc0c1\ud0dc"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\ub0a0\uc9dc"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc791\uc5c5"})]})}),(0,k.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:ne.map(t=>{return(0,k.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("input",{type:"checkbox",checked:b.includes(t.id),onChange:e=>{return s=t.id,n=e.target.checked,void f(n?e=>[...e,s]:e=>e.filter(e=>e!==s));var s,n},className:"rounded border-gray-300",title:"\ud56d\ubaa9 \uc120\ud0dd"})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,k.jsx)("span",{className:"text-xs font-medium text-gray-700",children:t.clientName.charAt(0)})}),(0,k.jsx)("div",{className:"ml-3",children:(0,k.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.clientName})})]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{children:[(0,k.jsx)("div",{className:"text-sm font-medium text-gray-900",children:t.name}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:t.description})]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("div",{className:"text-sm text-gray-900",children:t.workplaceName})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("div",{className:"text-sm text-gray-900",children:t.projectName})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat((s=t.category,{"\ud1a0\ubaa9\uacf5\uc0ac":"bg-brown-100 text-brown-800","\uad6c\uc870\uacf5\uc0ac":"bg-gray-100 text-gray-800","\ucca0\uac70\uacf5\uc0ac":"bg-red-100 text-red-800","\ub9c8\uac10\uacf5\uc0ac":"bg-blue-100 text-blue-800","\uc124\ube44\uacf5\uc0ac":"bg-yellow-100 text-yellow-800","\ub0b4\ubd80\uacf5\uc0ac":"bg-green-100 text-green-800","\uae30\ud0c0":"bg-purple-100 text-purple-800"}[s]||"bg-gray-100 text-gray-800")),children:t.category})}),(0,k.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,k.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[t.defaultPrice.toLocaleString(),"\uc6d0 \xd7 ",t.quantity||1]}),(0,k.jsxs)("div",{className:"text-xs text-gray-500",children:["= ",((t.defaultPrice||0)*(t.quantity||1)).toLocaleString(),"\uc6d0 / ",t.unit]}),de(t)>0&&(0,k.jsxs)("div",{className:"text-xs text-gray-500",children:["+ \uc778\ubd80 ",de(t).toLocaleString(),"\uc6d0"]}),(0,k.jsxs)("div",{className:"text-xs text-gray-700 font-medium",children:["\ud569\uacc4(\uc778\ubd80\ud3ec\ud568): ",((t.defaultPrice||0)*(t.quantity||1)+de(t)).toLocaleString(),"\uc6d0"]})]}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat("\uc644\ub8cc"===t.status?"bg-green-100 text-green-800":"\uc9c4\ud589\uc911"===t.status?"bg-blue-100 text-blue-800":"\ubcf4\ub958"===t.status?"bg-red-100 text-red-800":"bg-yellow-100 text-yellow-800"),children:t.status})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("div",{className:"text-sm text-gray-900",children:t.date})}),(0,k.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,k.jsx)("button",{onClick:()=>pe(t),className:"text-blue-600 hover:text-blue-900 mr-2",children:"\ud3b8\uc9d1"}),(0,k.jsx)("button",{onClick:()=>{return e=t.id,void(window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&r(t=>t.filter(t=>t.id!==e)));var e},className:"text-red-600 hover:text-red-900 mr-2",children:"\uc0ad\uc81c"}),"\uc644\ub8cc"===t.status&&(0,k.jsx)("button",{onClick:()=>(t=>{const s=d(t.clientId).filter(e=>!a.some(t=>t.workItems.some(s=>s.name===e.name&&t.client===e.clientName)));if(0===s.length)return void alert("\uccad\uad6c \uac00\ub2a5\ud55c \uc644\ub8cc\ub41c \uc791\uc5c5 \ud56d\ubaa9\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.");const n=e.find(e=>e.id===t.clientId),r=null===n||void 0===n?void 0:n.workplaces.find(e=>e.id===t.workplaceId),i="INV-".concat((new Date).getFullYear(),"-").concat(String(a.length+1).padStart(3,"0")),c=s.map(e=>o(e)),x=c.reduce((e,t)=>e+t.total,0),p={id:i,client:t.clientName,project:t.projectName,workplaceAddress:(null===r||void 0===r?void 0:r.address)||"",amount:x,status:"\ubc1c\uc1a1\ub300\uae30",date:(new Date).toISOString().split("T")[0],dueDate:new Date(Date.now()+12096e5).toISOString().split("T")[0],workItems:c};l(e=>[...e,p]),alert("\uccad\uad6c\uc11c ".concat(i,"\uac00 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4! \uccad\uad6c\uc11c \uad00\ub9ac \ud398\uc774\uc9c0\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4.")),m("/invoices")})(t),className:"text-green-600 hover:text-green-900",children:"\uccad\uad6c\uc11c \uc0dd\uc131"})]})]},t.id);var s})})]})}),y&&(0,k.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,k.jsx)("div",{className:"relative top-20 mx-auto p-5 border w-4/5 max-w-4xl shadow-lg rounded-md bg-white",children:(0,k.jsxs)("div",{className:"mt-3",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:S?"\uc791\uc5c5 \ud56d\ubaa9 \ud3b8\uc9d1":"\uc0c8 \uc791\uc5c5 \ud56d\ubaa9 \ucd94\uac00"}),(0,k.jsxs)("form",{onSubmit:n=>{n.preventDefault();const a=e.find(e=>e.id===C.clientId);if(S){const e=re(C.clientId).find(e=>e.id===C.workplaceId);r(t=>t.map(t=>t.id===S.id?(0,i.A)((0,i.A)((0,i.A)({},t),C),{},{clientName:(null===a||void 0===a?void 0:a.name)||t.clientName,workplaceName:(null===e||void 0===e?void 0:e.name)||t.workplaceName}):t)),C.projectName&&t(e=>e.map(e=>e.id===C.clientId?(0,i.A)((0,i.A)({},e),{},{projects:Array.from(new Set([...e.projects||[],C.projectName]))}):e))}else{const e=re(C.clientId).find(e=>e.id===C.workplaceId),n=(0,i.A)((0,i.A)({},C),{},{id:Math.max(...s.map(e=>e.id))+1,clientName:(null===a||void 0===a?void 0:a.name)||"",workplaceName:(null===e||void 0===e?void 0:e.name)||"",date:C.date||(new Date).toISOString().split("T")[0]});r(e=>[...e,n]),C.projectName&&t(e=>e.map(e=>e.id===C.clientId?(0,i.A)((0,i.A)({},e),{},{projects:Array.from(new Set([...e.projects||[],C.projectName]))}):e))}ce()},className:"space-y-4",children:[(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uac74\ucd95\uc8fc"}),(0,k.jsxs)("select",{name:"clientId",value:C.clientId,onChange:oe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,k.jsx)("option",{value:"",children:"\uac74\ucd95\uc8fc \uc120\ud0dd"}),e.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc791\uc5c5\uc7a5"}),(0,k.jsxs)("select",{name:"workplaceId",value:C.workplaceId,onChange:oe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0,disabled:!C.clientId,children:[(0,k.jsx)("option",{value:"",children:"\uc791\uc5c5\uc7a5 \uc120\ud0dd"}),C.clientId&&re(C.clientId).map(e=>(0,k.jsxs)("option",{value:e.id,children:[e.name," - ",e.address]},e.id))]}),!C.clientId&&(0,k.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"\uba3c\uc800 \uac74\ucd95\uc8fc\ub97c \uc120\ud0dd\ud558\uc138\uc694"})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\ud504\ub85c\uc81d\ud2b8\uba85"}),_?(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("input",{type:"text",name:"projectName",value:C.projectName,onChange:oe,placeholder:"\uc0c8 \ud504\ub85c\uc81d\ud2b8\uba85 \uc785\ub825",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0}),(0,k.jsx)("button",{type:"button",onClick:()=>{E(!1),P(e=>(0,i.A)((0,i.A)({},e),{},{projectName:""}))},className:"mt-1 px-2 py-2 text-gray-400 hover:text-gray-600",title:"\uae30\uc874 \ud504\ub85c\uc81d\ud2b8 \uc120\ud0dd\uc73c\ub85c \ub3cc\uc544\uac00\uae30",children:"\u21a9"})]}):(0,k.jsxs)("select",{name:"projectName",value:C.projectName,onChange:oe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0,disabled:!C.clientId,children:[(0,k.jsx)("option",{value:"",children:"\ud504\ub85c\uc81d\ud2b8 \uc120\ud0dd"}),C.clientId&&te(C.clientId).map(e=>(0,k.jsx)("option",{value:e,children:e},e)),(0,k.jsx)("option",{value:"custom",children:"+ \uc0c8 \ud504\ub85c\uc81d\ud2b8 \uc785\ub825"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uce74\ud14c\uace0\ub9ac"}),(0,k.jsxs)("select",{name:"category",value:C.category,onChange:oe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,k.jsx)("option",{value:"",children:"\uce74\ud14c\uace0\ub9ac \uc120\ud0dd"}),x.map(e=>(0,k.jsx)("option",{value:e,children:e},e))]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc791\uc5c5\uc77c\uc790"}),(0,k.jsxs)("div",{className:"mt-1 relative inline-block",ref:M,children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("input",{type:"text",name:"date",value:C.date||"",onChange:oe,placeholder:"YYYY-MM-DD",inputMode:"numeric",className:"block w-full border border-gray-300 rounded-md px-3 py-2",onFocus:()=>H(!0),required:!0}),(0,k.jsx)("button",{type:"button",className:"px-2 py-2 text-gray-600 hover:text-gray-800",onClick:()=>H(e=>!e),title:"\ub2ec\ub825 \uc5f4\uae30",children:"\ud83d\udcc5"})]}),Y&&(0,k.jsxs)("div",{ref:F,className:"absolute z-50 bg-white border border-gray-300 rounded-md shadow-lg mt-2 p-3",style:{transform:"scale(2)",transformOrigin:"top left"},children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsx)("button",{type:"button",className:"px-2 py-1 text-sm border rounded",onClick:()=>G(e=>new Date(e.getFullYear(),e.getMonth()-1,1)),children:"\u25c0"}),(0,k.jsxs)("div",{className:"text-sm font-medium",children:[K.getFullYear(),"\ub144 ",K.getMonth()+1,"\uc6d4"]}),(0,k.jsx)("button",{type:"button",className:"px-2 py-1 text-sm border rounded",onClick:()=>G(e=>new Date(e.getFullYear(),e.getMonth()+1,1)),children:"\u25b6"})]}),(0,k.jsxs)("table",{className:"text-xs select-none",children:[(0,k.jsx)("thead",{children:(0,k.jsx)("tr",{className:"text-center text-gray-600",children:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"].map((e,t)=>(0,k.jsx)("th",{className:"px-2 py-1 ".concat(0===t?"text-red-600":6===t?"text-blue-600":""),children:e},e))})}),(0,k.jsx)("tbody",{children:(()=>{const e=new Date(K.getFullYear(),K.getMonth(),1).getDay(),t=new Date(K.getFullYear(),K.getMonth()+1,0).getDate(),s=[];for(let r=0;r<e;r++)s.push(null);for(let r=1;r<=t;r++)s.push(r);const n=[];for(let r=0;r<s.length;r+=7)n.push(s.slice(r,r+7));return n.map((e,t)=>(0,k.jsx)("tr",{className:"text-center",children:e.map((e,t)=>{const s=0===t?"text-red-600":6===t?"text-blue-600":"";return(0,k.jsx)("td",{className:"px-2 py-1 ".concat(s," ").concat(e?"cursor-pointer hover:bg-gray-100 rounded":""),onClick:()=>(e=>{if(!e)return;const t=K.getFullYear(),s=K.getMonth()+1,n="".concat(t,"-").concat(J(s),"-").concat(J(e));P(e=>(0,i.A)((0,i.A)({},e),{},{date:n})),H(!1)})(e),children:e||""},t)})},t))})()})]})]})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\ub0b4\uc6a9"}),(0,k.jsx)("input",{type:"text",name:"name",value:C.name,onChange:oe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc218\ub7c9"}),(0,k.jsx)("input",{type:"text",name:"quantity",value:C.quantity||"",onChange:oe,placeholder:"1",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\ub2e8\uc704"}),(0,k.jsxs)("select",{name:"unit",value:C.unit,onChange:oe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,k.jsx)("option",{value:"",children:"\ub2e8\uc704 \uc120\ud0dd"}),c.map(e=>(0,k.jsx)("option",{value:e,children:e},e))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uae30\ubcf8 \ub2e8\uac00"}),(0,k.jsx)("input",{type:"text",name:"defaultPrice",value:C.defaultPrice?le(C.defaultPrice):"",onChange:oe,placeholder:"\uc608: 1,000,000",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc138\ubd80 \uc791\uc5c5"}),(0,k.jsx)("textarea",{name:"description",value:C.description,onChange:oe,rows:"3",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\ube44\uace0"}),(0,k.jsx)("textarea",{name:"notes",value:C.notes,onChange:oe,rows:"3",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\ucd94\uac00\uc801\uc778 \uba54\ubaa8\ub098 \ud2b9\uc774\uc0ac\ud56d\uc744 \uc785\ub825\ud558\uc138\uc694"})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc778\ubd80 \uc778\uc6d0(\uc120\ud0dd)"}),(0,k.jsx)("input",{type:"text",name:"laborPersons",value:C.laborPersons||"",onChange:oe,placeholder:"\uc608: 2",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc778\ubd80 \ub2e8\uac00(\uc120\ud0dd)"}),(0,k.jsx)("input",{type:"text",name:"laborUnitRate",value:C.laborUnitRate?le(C.laborUnitRate):"",onChange:oe,placeholder:"\uc608: 200,000",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]})]}),de(C)>0&&(0,k.jsxs)("div",{className:"text-sm text-gray-600",children:["\uc778\ubd80\ube44 \uc18c\uacc4: ",de(C).toLocaleString(),"\uc6d0"]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc0c1\ud0dc"}),(0,k.jsx)("select",{name:"status",value:C.status,onChange:oe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:B.map(e=>(0,k.jsx)("option",{value:e,children:e},e))})]}),(0,k.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,k.jsx)("button",{type:"button",onClick:ce,className:"px-4 py-2 text-gray-500 hover:text-gray-700",children:"\ucde8\uc18c"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 bg-purple-600 hover:bg-purple-700 text-white rounded",children:S?"\uc218\uc815":"\ucd94\uac00"})]})]})]})})}),N&&(0,k.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,k.jsx)("div",{className:"relative top-10 mx-auto p-5 border w-4/5 max-w-6xl shadow-lg rounded-md bg-white",children:(0,k.jsxs)("div",{className:"mt-3",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\uc77c\uad04 \uc791\uc5c5 \ud56d\ubaa9 \ucd94\uac00"}),(0,k.jsxs)("form",{onSubmit:n=>{n.preventDefault();const a=e.find(e=>e.id===U.clientId),l=re(U.clientId).find(e=>e.id===U.workplaceId),d=z.map((e,t)=>(0,i.A)((0,i.A)({},e),{},{id:Math.max(...s.map(e=>e.id))+t+1,clientId:U.clientId,clientName:(null===a||void 0===a?void 0:a.name)||"",workplaceId:U.workplaceId,workplaceName:(null===l||void 0===l?void 0:l.name)||"",projectName:U.projectName,date:U.date||(new Date).toISOString().split("T")[0],laborPersonsGeneral:""!==U.bulkLaborPersons&&null!=U.bulkLaborPersons?U.bulkLaborPersons:"",laborUnitRateGeneral:""!==U.bulkLaborUnitRate&&null!=U.bulkLaborUnitRate?U.bulkLaborUnitRate:"",laborPersons:""!==e.laborPersons&&null!=e.laborPersons?e.laborPersons:"",laborUnitRate:""!==e.laborUnitRate&&null!=e.laborUnitRate?e.laborUnitRate:""}));r(e=>[...e,...d]),U.projectName&&t(e=>e.map(e=>e.id===U.clientId?(0,i.A)((0,i.A)({},e),{},{projects:Array.from(new Set([...e.projects||[],U.projectName]))}):e)),R([{name:"",category:"",defaultPrice:0,quantity:1,unit:"",description:"",status:"\uc608\uc815",notes:"",laborPersons:"",laborUnitRate:""}]),q({clientId:"",workplaceId:"",projectName:"",date:(new Date).toISOString().split("T")[0],bulkLaborPersons:"",bulkLaborUnitRate:""}),w(!1),W(!1),alert("".concat(d.length,"\uac1c\uc758 \uc791\uc5c5 \ud56d\ubaa9\uc774 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))},className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-blue-50 p-4 rounded-lg",children:[(0,k.jsx)("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"\uacf5\ud1b5 \uc815\ubcf4"}),(0,k.jsxs)("div",{className:"grid grid-cols-4 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uac74\ucd95\uc8fc"}),(0,k.jsxs)("select",{name:"clientId",value:U.clientId,onChange:xe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,k.jsx)("option",{value:"",children:"\uac74\ucd95\uc8fc \uc120\ud0dd"}),e.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc791\uc5c5\uc7a5"}),(0,k.jsxs)("select",{name:"workplaceId",value:U.workplaceId,onChange:xe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0,disabled:!U.clientId,children:[(0,k.jsx)("option",{value:"",children:"\uc791\uc5c5\uc7a5 \uc120\ud0dd"}),U.clientId&&re(U.clientId).map(e=>(0,k.jsxs)("option",{value:e.id,children:[e.name," - ",e.address]},e.id))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\ud504\ub85c\uc81d\ud2b8\uba85"}),D?(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("input",{type:"text",name:"projectName",value:U.projectName,onChange:xe,placeholder:"\uc0c8 \ud504\ub85c\uc81d\ud2b8\uba85 \uc785\ub825",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0}),(0,k.jsx)("button",{type:"button",onClick:()=>{W(!1),q(e=>(0,i.A)((0,i.A)({},e),{},{projectName:""}))},className:"mt-1 px-2 py-2 text-gray-400 hover:text-gray-600",title:"\uae30\uc874 \ud504\ub85c\uc81d\ud2b8 \uc120\ud0dd\uc73c\ub85c \ub3cc\uc544\uac00\uae30",children:"\u21a9"})]}):(0,k.jsxs)("select",{name:"projectName",value:U.projectName,onChange:xe,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0,disabled:!U.clientId,children:[(0,k.jsx)("option",{value:"",children:"\ud504\ub85c\uc81d\ud2b8 \uc120\ud0dd"}),U.clientId&&te(U.clientId).map(e=>(0,k.jsx)("option",{value:e,children:e},e)),(0,k.jsx)("option",{value:"custom",children:"+ \uc0c8 \ud504\ub85c\uc81d\ud2b8 \uc785\ub825"})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc791\uc5c5\uc77c\uc790"}),(0,k.jsxs)("div",{className:"mt-1 relative inline-block",ref:V,children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("input",{type:"text",name:"date",value:U.date||"",onChange:xe,placeholder:"YYYY-MM-DD",inputMode:"numeric",className:"block w-full border border-gray-300 rounded-md px-3 py-2",onFocus:()=>Q(!0),required:!0}),(0,k.jsx)("button",{type:"button",className:"px-2 py-2 text-gray-600 hover:text-gray-800",onClick:()=>Q(e=>!e),title:"\ub2ec\ub825 \uc5f4\uae30",children:"\ud83d\udcc5"})]}),Z&&(0,k.jsxs)("div",{ref:X,className:"absolute z-50 bg-white border border-gray-300 rounded-md shadow-lg mt-2 p-3",style:{transform:"scale(2)",transformOrigin:"top left"},children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsx)("button",{type:"button",className:"px-2 py-1 text-sm border rounded",onClick:()=>ee(e=>new Date(e.getFullYear(),e.getMonth()-1,1)),children:"\u25c0"}),(0,k.jsxs)("div",{className:"text-sm font-medium",children:[$.getFullYear(),"\ub144 ",$.getMonth()+1,"\uc6d4"]}),(0,k.jsx)("button",{type:"button",className:"px-2 py-1 text-sm border rounded",onClick:()=>ee(e=>new Date(e.getFullYear(),e.getMonth()+1,1)),children:"\u25b6"})]}),(0,k.jsxs)("table",{className:"text-xs select-none",children:[(0,k.jsx)("thead",{children:(0,k.jsx)("tr",{className:"text-center text-gray-600",children:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"].map((e,t)=>(0,k.jsx)("th",{className:"px-2 py-1 ".concat(0===t?"text-red-600":6===t?"text-blue-600":""),children:e},e))})}),(0,k.jsx)("tbody",{children:(()=>{const e=new Date($.getFullYear(),$.getMonth(),1).getDay(),t=new Date($.getFullYear(),$.getMonth()+1,0).getDate(),s=[];for(let r=0;r<e;r++)s.push(null);for(let r=1;r<=t;r++)s.push(r);const n=[];for(let r=0;r<s.length;r+=7)n.push(s.slice(r,r+7));return n.map((e,t)=>(0,k.jsx)("tr",{className:"text-center",children:e.map((e,t)=>{const s=0===t?"text-red-600":6===t?"text-blue-600":"";return(0,k.jsx)("td",{className:"px-2 py-1 ".concat(s," ").concat(e?"cursor-pointer hover:bg-gray-100 rounded":""),onClick:()=>(e=>{if(!e)return;const t=$.getFullYear(),s=$.getMonth()+1,n="".concat(t,"-").concat(J(s),"-").concat(J(e));q(e=>(0,i.A)((0,i.A)({},e),{},{date:n})),Q(!1)})(e),children:e||""},t)})},t))})()})]})]})]})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uacf5\ud1b5 \uc778\ubd80 \uc778\uc6d0(\uc77c\ubc18\xb7\uc120\ud0dd)"}),(0,k.jsx)("input",{type:"text",name:"bulkLaborPersons",value:U.bulkLaborPersons||"",onChange:xe,placeholder:"\uc608: 2",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uacf5\ud1b5 \uc778\ubd80 \ub2e8\uac00(\uc77c\ubc18\xb7\uc120\ud0dd)"}),(0,k.jsx)("input",{type:"text",name:"bulkLaborUnitRate",value:U.bulkLaborUnitRate?le(U.bulkLaborUnitRate):"",onChange:xe,placeholder:"\uc608: 200,000",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2"})]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,k.jsx)("h4",{className:"text-md font-medium text-gray-800",children:"\uc791\uc5c5 \ud56d\ubaa9\ub4e4"}),(0,k.jsx)("button",{type:"button",onClick:()=>{R(e=>[...e,{name:"",category:"",defaultPrice:0,quantity:1,unit:"",description:"",status:"\uc608\uc815",notes:"",laborPersons:"",laborUnitRate:""}])},className:"text-blue-600 hover:text-blue-800 text-sm",children:"+ \ud56d\ubaa9 \ucd94\uac00"})]}),(0,k.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:z.map((e,t)=>{var s,n;return(0,k.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,k.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["\uc791\uc5c5 \ud56d\ubaa9 #",t+1]}),z.length>1&&(0,k.jsx)("button",{type:"button",onClick:()=>(e=>{z.length>1&&R(t=>t.filter((t,s)=>s!==e))})(t),className:"text-red-600 hover:text-red-800 text-sm",children:"\uc0ad\uc81c"})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ub0b4\uc6a9"}),(0,k.jsx)("input",{type:"text",value:e.name,onChange:e=>me(t,"name",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uce74\ud14c\uace0\ub9ac"}),(0,k.jsxs)("select",{value:e.category,onChange:e=>me(t,"category",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0,children:[(0,k.jsx)("option",{value:"",children:"\uce74\ud14c\uace0\ub9ac \uc120\ud0dd"}),x.map(e=>(0,k.jsx)("option",{value:e,children:e},e))]})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uc218\ub7c9"}),(0,k.jsx)("input",{type:"text",value:e.quantity||"",onChange:e=>me(t,"quantity",e.target.value),placeholder:"1",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ub2e8\uc704"}),(0,k.jsxs)("select",{value:e.unit,onChange:e=>me(t,"unit",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0,children:[(0,k.jsx)("option",{value:"",children:"\ub2e8\uc704 \uc120\ud0dd"}),c.map(e=>(0,k.jsx)("option",{value:e,children:e},e))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uae30\ubcf8 \ub2e8\uac00"}),(0,k.jsx)("input",{type:"text",value:e.defaultPrice?le(e.defaultPrice):"",onChange:e=>me(t,"defaultPrice",e.target.value),placeholder:"\uc608: 1,000,000",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uc0c1\ud0dc"}),(0,k.jsx)("select",{value:e.status,onChange:e=>me(t,"status",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",children:B.map(e=>(0,k.jsx)("option",{value:e,children:e},e))})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-3 mb-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uc778\ubd80 \uc778\uc6d0(\uae30\uc220\uc790\xb7\uc120\ud0dd)"}),(0,k.jsx)("input",{type:"text",value:e.laborPersons||"",onChange:e=>me(t,"laborPersons",e.target.value),placeholder:"\uc608: 2",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uc778\ubd80 \ub2e8\uac00(\uae30\uc220\uc790\xb7\uc120\ud0dd)"}),(0,k.jsx)("input",{type:"text",value:e.laborUnitRate?le(e.laborUnitRate):"",onChange:e=>me(t,"laborUnitRate",e.target.value),placeholder:"\uc608: 200,000",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"})]})]}),de(e)>0&&(0,k.jsxs)("div",{className:"text-xs text-gray-600",children:["\uc778\ubd80\ube44 \uc18c\uacc4: ",de((0,i.A)((0,i.A)({},e),{},{laborPersonsGeneral:null!==(s=e.laborPersonsGeneral)&&void 0!==s?s:U.bulkLaborPersons,laborUnitRateGeneral:null!==(n=e.laborUnitRateGeneral)&&void 0!==n?n:U.bulkLaborUnitRate})).toLocaleString(),"\uc6d0"]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 gap-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uc138\ubd80 \uc791\uc5c5"}),(0,k.jsx)("textarea",{value:e.description,onChange:e=>me(t,"description",e.target.value),rows:"2",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ube44\uace0"}),(0,k.jsx)("textarea",{value:e.notes,onChange:e=>me(t,"notes",e.target.value),rows:"2",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",placeholder:"\ucd94\uac00\uc801\uc778 \uba54\ubaa8\ub098 \ud2b9\uc774\uc0ac\ud56d\uc744 \uc785\ub825\ud558\uc138\uc694"})]})]})]},t)})})]}),(0,k.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,k.jsx)("button",{type:"button",onClick:()=>w(!1),className:"px-4 py-2 text-gray-500 hover:text-gray-700",children:"\ucde8\uc18c"}),(0,k.jsxs)("button",{type:"submit",className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 text-white rounded",children:[z.length,"\uac1c \ud56d\ubaa9 \uc77c\uad04 \ucd94\uac00"]})]})]})]})})})]})};const pe=function(){const{clients:e,estimates:t,setEstimates:s,convertEstimateToWorkItems:r,companyInfo:a,units:l,categories:d}=I(),o=(0,L.Zp)(),c=(0,n.useRef)(),[x,m]=(0,n.useState)(""),[p,u]=(0,n.useState)(""),[h,g]=(0,n.useState)(!1),[b,f]=(0,n.useState)(null),[j,y]=(0,n.useState)(null),[v,N]=(0,n.useState)(!1),[w,S]=(0,n.useState)([]),[A,C]=(0,n.useState)({clientId:"",workplaceId:"",projectName:"",title:"",validUntil:"",category:"",status:"\uac80\ud1a0\uc911",notes:"",items:[{category:"",name:"",description:"",quantity:1,unit:"",unitPrice:0,notes:""}]}),[P,_]=(0,n.useState)(!1),E=(0,n.useRef)(null),z=(0,n.useRef)(null),[R,U]=(0,n.useState)(!1),[q,D]=(0,n.useState)(()=>new Date);(0,n.useEffect)(()=>{if(A.validUntil){const[e,t]=A.validUntil.split("-").map(Number);e&&t&&D(new Date(e,t-1,1))}},[A.validUntil]),(0,n.useEffect)(()=>{const e=e=>{E.current&&!E.current.contains(e.target)&&U(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]);const W=e=>String(e).padStart(2,"0"),B=["\uac80\ud1a0\uc911","\uc2b9\uc778\ub428","\uac70\ubd80\ub428","\uc218\uc815 \uc694\uccad","\uc791\uc5c5 \uc804\ud658\ub428"];(0,n.useEffect)(()=>{if(j){const e=setTimeout(()=>{y(null),console.log("Auto-reset printEstimate state")},3e3);return()=>clearTimeout(e)}},[j]);const O=t=>{const s=e.find(e=>e.id===parseInt(t));return(null===s||void 0===s?void 0:s.workplaces)||[]},T=t.filter(e=>(!x||e.clientId===parseInt(x))&&(!p||e.status===p)),M=T.map(e=>e.id),F=w.length>0&&w.length===M.length,Y=t=>{const{name:s,value:n}=t.target,r="clientId"===s||"workplaceId"===s?parseInt(n)||0:n;C(t=>{const n=(0,i.A)((0,i.A)({},t),{},{[s]:r});if("clientId"===s&&(n.workplaceId=""),"workplaceId"===s){var a;const s=e.find(e=>e.id===("string"===typeof t.clientId?parseInt(t.clientId):t.clientId)),l=null===s||void 0===s||null===(a=s.workplaces)||void 0===a?void 0:a.find(e=>e.id===("string"===typeof r?parseInt(r):r));!n.projectName&&null!==l&&void 0!==l&&l.description&&(n.projectName=l.description)}return n})},H=(e,t,s)=>{const n=[...A.items];if("unitPrice"===t||"quantity"===t){const r=s.replace(/[^\d]/g,""),a=parseInt(r)||("quantity"===t?1:0);n[e][t]=a,n[e].total=n[e].quantity*n[e].unitPrice}else n[e][t]=s;C(e=>(0,i.A)((0,i.A)({},e),{},{items:n}))},K=()=>A.items.reduce((e,t)=>e+(t.unitPrice||0)*(t.quantity||1),0),G=()=>{C({clientId:"",workplaceId:"",projectName:"",title:"",validUntil:"",category:"",status:"\uac80\ud1a0\uc911",notes:"",items:[{category:"",name:"",description:"",quantity:1,unit:"",unitPrice:0,notes:""}]}),f(null),g(!1),_(!1)};return(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"mb-8",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\uacac\uc801\uc11c \uad00\ub9ac"}),(0,k.jsx)("p",{className:"text-gray-600",children:"\uac74\ucd95\uc8fc\ubcc4 \uacac\uc801\uc11c\ub97c \uad00\ub9ac\ud558\uace0 \uc791\uc5c5 \ud56d\ubaa9\uc73c\ub85c \ubcc0\ud658\ud558\uc138\uc694"})]}),(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("button",{onClick:()=>{de()},className:"bg-gray-600 hover:bg-gray-700 text-white font-bold py-2 px-4 rounded",children:"\ud83d\udcc1 \ud15c\ud50c\ub9bf \ub2e4\uc6b4\ub85c\ub4dc"}),(0,k.jsx)("button",{onClick:()=>{re(t)},className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"\ud83d\udce5 Excel \ub0b4\ubcf4\ub0b4\uae30"}),(0,k.jsxs)("label",{className:"bg-purple-600 hover:bg-purple-700 text-white font-bold py-2 px-4 rounded cursor-pointer",children:["\ud83d\udce4 Excel \uac00\uc838\uc624\uae30",(0,k.jsx)("input",{type:"file",accept:".xlsx,.xls",onChange:async e=>{const t=e.target.files[0];if(t){try{const e=await ae.estimates(t);s(t=>[...t,...e]),alert("".concat(e.length,"\uac1c\uc758 \uacac\uc801\uc11c\ub97c \uc131\uacf5\uc801\uc73c\ub85c \uac00\uc838\uc654\uc2b5\ub2c8\ub2e4."))}catch(n){alert("\ud30c\uc77c\uc744 \uac00\uc838\uc624\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4."),console.error("Import error:",n)}e.target.value=""}},className:"hidden"})]}),(0,k.jsx)("button",{onClick:()=>g(!0),className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"+ \uc0c8 \uacac\uc801\uc11c"})]})]}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-4",children:(0,k.jsxs)("div",{className:"flex items-center space-x-4 flex-wrap",children:[(0,k.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"\ud544\ud130:"}),(0,k.jsxs)("select",{value:x,onChange:e=>m(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",style:{fontSize:"15px"},children:[(0,k.jsx)("option",{value:"",children:"\uc804\uccb4 \uac74\ucd95\uc8fc"}),e.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))]}),(0,k.jsxs)("select",{value:p,onChange:e=>u(e.target.value),className:"border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",style:{fontSize:"15px"},children:[(0,k.jsx)("option",{value:"",children:"\uc804\uccb4 \uc0c1\ud0dc"}),B.map(e=>(0,k.jsx)("option",{value:e,children:e},e))]}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:x||p?"".concat(T.length,"\uac1c \uacac\uc801\uc11c"):"\ucd1d ".concat(t.length,"\uac1c \uacac\uc801\uc11c")}),(x||p)&&(0,k.jsx)("button",{onClick:()=>{m(""),u("")},className:"text-xs text-green-600 hover:text-green-800",children:"\ud544\ud130 \ucd08\uae30\ud654"})]})})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"\ucd1d \uacac\uc801\uc11c"}),(0,k.jsx)("p",{className:"text-xl font-bold text-gray-900",children:T.length})]}),(0,k.jsx)("div",{className:"bg-green-500 rounded-full p-3 text-white text-2xl",children:"\ud83d\udcc8"})]})}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"\uc2b9\uc778\ub41c \uacac\uc801\uc11c"}),(0,k.jsx)("p",{className:"text-xl font-bold text-green-600",children:T.filter(e=>"\uc2b9\uc778\ub428"===e.status).length})]}),(0,k.jsx)("div",{className:"bg-green-500 rounded-full p-3 text-white text-2xl",children:"\u2705"})]})}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"\uac80\ud1a0 \uc911\uc778 \uacac\uc801\uc11c"}),(0,k.jsx)("p",{className:"text-xl font-bold text-yellow-600",children:T.filter(e=>"\uac80\ud1a0\uc911"===e.status).length})]}),(0,k.jsx)("div",{className:"bg-yellow-500 rounded-full p-3 text-white text-2xl",children:"\u23f3"})]})}),(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"\ucd1d \uacac\uc801 \uae08\uc561"}),(0,k.jsxs)("p",{className:"text-xl font-bold text-blue-600",children:[T.reduce((e,t)=>e+t.totalAmount,0).toLocaleString(),"\uc6d0"]})]}),(0,k.jsx)("div",{className:"bg-blue-500 rounded-full p-3 text-white text-2xl",children:"\ud83d\udcb0"})]})})]}),(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[(0,k.jsxs)("div",{className:"flex items-center justify-between px-4 py-3 bg-gray-50 border-b",children:[(0,k.jsxs)("div",{className:"text-sm text-gray-600",children:["\uc120\ud0dd\ub428: ",w.length,"\uac1c"]}),w.length>0&&(0,k.jsxs)("button",{onClick:()=>N(!0),className:"text-white text-sm font-medium px-3 py-1 rounded bg-red-600 hover:bg-red-700",children:["\ud83d\uddd1\ufe0f \uc120\ud0dd \uc0ad\uc81c(",w.length,")"]})]}),(0,k.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,k.jsx)("thead",{className:"bg-gray-50",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:(0,k.jsx)("input",{type:"checkbox",className:"rounded border-gray-300",checked:F,onChange:e=>{return t=e.target.checked,S(t?M:[]);var t},title:"\uc804\uccb4 \uc120\ud0dd"})}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uacac\uc801\uc11c \ubc88\ud638"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uac74\ucd95\uc8fc"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\ud504\ub85c\uc81d\ud2b8"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc791\uc5c5\uc7a5"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uacac\uc801 \uae08\uc561"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc0c1\ud0dc"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc720\ud6a8\uae30\ud55c"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-base font-medium text-gray-500 uppercase tracking-wider",children:"\uc791\uc5c5"})]})}),(0,k.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:T.map(e=>{return(0,k.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("input",{type:"checkbox",className:"rounded border-gray-300",checked:w.includes(e.id),onChange:t=>{return s=e.id,n=t.target.checked,S(e=>n?Array.from(new Set([...e,s])):e.filter(e=>e!==s));var s,n},title:"\ud56d\ubaa9 \uc120\ud0dd"})}),(0,k.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,k.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.id}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:e.date})]}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"h-8 w-8 bg-gray-300 rounded-full flex items-center justify-center",children:(0,k.jsx)("span",{className:"text-xs font-medium text-gray-700",children:e.clientName.charAt(0)})}),(0,k.jsx)("div",{className:"ml-3",children:(0,k.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.clientName})})]})}),(0,k.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap",children:[(0,k.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.projectName}),(0,k.jsx)("div",{className:"text-sm text-gray-500",children:e.title})]}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("div",{className:"text-sm text-gray-900",children:e.workplaceName})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"text-sm font-medium text-gray-900",children:[e.totalAmount.toLocaleString(),"\uc6d0"]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("span",{className:"px-2 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ".concat((t=e.status,{"\uac80\ud1a0\uc911":"bg-yellow-100 text-yellow-800","\uc2b9\uc778\ub428":"bg-green-100 text-green-800","\uac70\ubd80\ub428":"bg-red-100 text-red-800","\uc218\uc815 \uc694\uccad":"bg-blue-100 text-blue-800","\uc791\uc5c5 \uc804\ud658\ub428":"bg-purple-100 text-purple-800"}[t]||"bg-gray-100 text-gray-800")),children:e.status})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("div",{className:"text-sm text-gray-900",children:e.validUntil})}),(0,k.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[(0,k.jsx)("button",{onClick:()=>(e=>{C({clientId:e.clientId,workplaceId:e.workplaceId||"",projectName:e.projectName,title:e.title,validUntil:e.validUntil,category:e.category||"",status:e.status,notes:e.notes||"",items:e.items.map(e=>({category:e.category,name:e.name,description:e.description,quantity:e.quantity,unit:e.unit,unitPrice:e.unitPrice,notes:e.notes||""}))}),f(e),g(!0),_(!e.validUntil)})(e),className:"text-blue-600 hover:text-blue-900 mr-2",children:"\ud3b8\uc9d1"}),(0,k.jsx)("button",{onClick:()=>(e=>{y(e),setTimeout(()=>{console.log("\uacac\uc801\uc11c PDF \uc0c8 \ud0ed\uc5d0\uc11c \uc5f4\uae30:",e.id);const t=c.current;if(!t)return console.error("\uc778\uc1c4 \ucf58\ud150\uce20\ub97c \ucc3e\uc744 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4"),void alert("\uc778\uc1c4 \ucf58\ud150\uce20\ub97c \uc900\ube44\ud558\ub294 \uc911\uc785\ub2c8\ub2e4. \uc7a0\uc2dc \ud6c4 \ub2e4\uc2dc \uc2dc\ub3c4\ud574\uc8fc\uc138\uc694.");const s=window.open("","_blank","width=1000,height=800,scrollbars=yes,resizable=yes");s?(s.document.write('\n        <!DOCTYPE html>\n        <html lang="ko">\n          <head>\n            <meta charset="UTF-8">\n            <meta name="viewport" content="width=device-width, initial-scale=1.0">\n            <title>\uacac\uc801\uc11c - '.concat(e.id,'</title>\n            <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;700&display=swap" rel="stylesheet">\n            <style>\n              * { box-sizing: border-box; }\n              body { \n                margin: 0; \n                padding: 20px; \n                font-family: \'Noto Sans KR\', sans-serif; \n                background: white;\n                line-height: 1.4;\n              }\n              @media print { \n                body { margin: 0; padding: 15px; }\n                .no-print { display: none; }\n              }\n              .toolbar { position: fixed; top: 10px; right: 10px; z-index: 1000; display: flex; gap: 10px; }\n              .print-header {\n                background: #3498db;\n                color: white;\n                padding: 10px 15px;\n                border-radius: 5px;\n                font-size: 14px;\n                cursor: pointer;\n              }\n              .print-header:hover {\n                background: #2980b9;\n              }\n              .close-header {\n                background: #e11d48; /* rose-600 */\n                color: white;\n                padding: 10px 15px;\n                border-radius: 5px;\n                font-size: 14px;\n                cursor: pointer;\n              }\n              .close-header:hover {\n                background: #be123c; /* rose-700 */\n              }\n              @media print {\n                .toolbar { display: none; }\n              }\n            </style>\n          </head>\n          <body>\n            <div class="toolbar no-print">\n              <div class="close-header" onclick="window.close()">\u2715 \ub2eb\uae30</div>\n              <div class="print-header" onclick="window.print()">\ud83d\udda8\ufe0f \uc778\uc1c4\ud558\uae30 (Ctrl+P)</div>\n            </div>\n            ').concat(t.innerHTML,"\n            <script>\n              // \ud398\uc774\uc9c0 \ub85c\ub4dc \uc644\ub8cc \ud6c4 \ud3ec\ucee4\uc2a4\n              window.onload = function() {\n                window.focus();\n                console.log('\uacac\uc801\uc11c PDF \uc900\ube44 \uc644\ub8cc');\n              };\n              \n              // \ud0a4\ubcf4\ub4dc \ub2e8\ucd95\ud0a4 \uc9c0\uc6d0\n              document.addEventListener('keydown', function(e) {\n                if (e.ctrlKey && e.key === 'p') {\n                  e.preventDefault();\n                  window.print();\n                }\n              });\n            <\/script>\n          </body>\n        </html>\n      ")),s.document.close(),setTimeout(()=>{try{s.focus(),console.log("\uacac\uc801\uc11c \uc0c8 \ud0ed\uc5d0\uc11c \uc5f4\uae30 \uc644\ub8cc")}catch(e){console.error("\uc0c8 \ud0ed \uc5f4\uae30 \uc624\ub958:",e),alert("\uc0c8 \ud0ed\uc5d0\uc11c \uacac\uc801\uc11c\ub97c \uc5ec\ub294 \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},300)):alert("\ud31d\uc5c5\uc774 \ucc28\ub2e8\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \ube0c\ub77c\uc6b0\uc800 \uc124\uc815\uc5d0\uc11c \ud31d\uc5c5\uc744 \ud5c8\uc6a9\ud574\uc8fc\uc138\uc694.")},100)})(e),className:"text-green-600 hover:text-green-900 mr-2",children:"\ud83d\udda8\ufe0f \ucd9c\ub825"}),(0,k.jsx)("button",{onClick:()=>{return t=e.id,void(window.confirm("\uc815\ub9d0 \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&s(e=>e.filter(e=>e.id!==t)));var t},className:"text-red-600 hover:text-red-900 mr-2",children:"\uc0ad\uc81c"}),"\uc2b9\uc778\ub428"===e.status&&(0,k.jsx)("button",{onClick:()=>(e=>{if(window.confirm("\uc774 \uacac\uc801\uc11c\ub97c \uc791\uc5c5 \ud56d\ubaa9\uc73c\ub85c \ubcc0\ud658\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){const t=r(e);alert("".concat(t.length,"\uac1c\uc758 \uc791\uc5c5 \ud56d\ubaa9\uc774 \uc0dd\uc131\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")),o("/work-items")}})(e.id),className:"text-purple-600 hover:text-purple-900",children:"\uc791\uc5c5 \ubcc0\ud658"})]})]},e.id);var t})})]})]}),v&&(0,k.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-30 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-lg w-full max-w-md p-6",children:[(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"\uc120\ud0dd \uc0ad\uc81c"}),(0,k.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["\uc120\ud0dd\ub41c ",w.length,"\uac1c\uc758 \uacac\uc801\uc11c\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c? \uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."]}),(0,k.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,k.jsx)("button",{className:"btn-secondary",onClick:()=>N(!1),children:"\ucde8\uc18c"}),(0,k.jsx)("button",{className:"btn-primary bg-red-600 hover:bg-red-700",onClick:()=>{0!==w.length&&(s(e=>e.filter(e=>!w.includes(e.id))),S([]),N(!1))},children:"\uc0ad\uc81c"})]})]})}),h&&(0,k.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50",children:(0,k.jsx)("div",{className:"relative top-5 mx-auto p-5 border w-4/5 max-w-6xl shadow-lg rounded-md bg-white",children:(0,k.jsxs)("div",{className:"mt-3",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:b?"\uacac\uc801\uc11c \ud3b8\uc9d1":"\uc0c8 \uacac\uc801\uc11c \uc791\uc131"}),(0,k.jsxs)("form",{onSubmit:n=>{n.preventDefault();const r=e.find(e=>e.id===A.clientId),a=O(A.clientId).find(e=>e.id===A.workplaceId),l=(0,i.A)((0,i.A)({},A),{},{id:b?b.id:"EST-".concat((new Date).getFullYear(),"-").concat(String(t.length+1).padStart(3,"0")),clientName:(null===r||void 0===r?void 0:r.name)||"",workplaceName:(null===a||void 0===a?void 0:a.name)||"",workplaceAddress:(null===a||void 0===a?void 0:a.address)||"",date:b?b.date:(new Date).toISOString().split("T")[0],totalAmount:K(),items:A.items.map((e,t)=>(0,i.A)((0,i.A)({},e),{},{id:t+1,total:(e.unitPrice||0)*(e.quantity||1)}))});s(b?e=>e.map(e=>e.id===b.id?l:e):e=>[...e,l]),G()},className:"space-y-6",children:[(0,k.jsxs)("div",{className:"bg-green-50 p-4 rounded-lg",children:[(0,k.jsx)("h4",{className:"text-md font-medium text-gray-800 mb-3",children:"\uae30\ubcf8 \uc815\ubcf4"}),(0,k.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uac74\ucd95\uc8fc"}),(0,k.jsxs)("select",{name:"clientId",value:A.clientId,onChange:Y,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0,children:[(0,k.jsx)("option",{value:"",children:"\uac74\ucd95\uc8fc \uc120\ud0dd"}),e.map(e=>(0,k.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc791\uc5c5\uc7a5"}),(0,k.jsxs)("select",{name:"workplaceId",value:A.workplaceId,onChange:Y,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0,disabled:!A.clientId,children:[(0,k.jsx)("option",{value:"",children:"\uc791\uc5c5\uc7a5 \uc120\ud0dd"}),A.clientId&&O(A.clientId).map(e=>(0,k.jsxs)("option",{value:e.id,children:[e.name," - ",e.address]},e.id))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\ud504\ub85c\uc81d\ud2b8\uba85"}),(0,k.jsx)("input",{type:"text",name:"projectName",value:A.projectName,onChange:Y,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uacac\uc801\uc11c \uc81c\ubaa9"}),(0,k.jsx)("input",{type:"text",name:"title",value:A.title,onChange:Y,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc720\ud6a8\uae30\ud55c"}),(0,k.jsxs)("div",{className:"mt-1 relative inline-block",ref:E,children:[(0,k.jsxs)("div",{className:"flex items-center gap-2",children:[(0,k.jsx)("input",{type:"text",name:"validUntil",value:A.validUntil,onChange:Y,placeholder:"YYYY-MM-DD",inputMode:"numeric",className:"block w-full border border-gray-300 rounded-md px-3 py-2",onFocus:()=>!P&&U(!0),disabled:P,required:!P}),(0,k.jsx)("button",{type:"button",className:"px-2 py-2 text-gray-600 hover:text-gray-800",onClick:()=>!P&&U(e=>!e),title:"\ub2ec\ub825 \uc5f4\uae30",disabled:P,children:"\ud83d\udcc5"}),(0,k.jsxs)("label",{className:"flex items-center gap-1 text-xs text-gray-600 select-none",children:[(0,k.jsx)("input",{type:"checkbox",checked:P,onChange:e=>{const t=e.target.checked;_(t),t&&(U(!1),C(e=>(0,i.A)((0,i.A)({},e),{},{validUntil:""})))}}),"\uc720\ud6a8\uae30\uac04 \uc120\ud0dd \uc548\ud568"]})]}),R&&(0,k.jsxs)("div",{ref:z,className:"absolute z-50 bg-white border border-gray-300 rounded-md shadow-lg mt-2 p-3",style:{transform:"scale(2)",transformOrigin:"top left"},children:[(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsx)("button",{type:"button",className:"px-2 py-1 text-sm border rounded",onClick:()=>D(e=>new Date(e.getFullYear(),e.getMonth()-1,1)),children:"\u25c0"}),(0,k.jsxs)("div",{className:"text-sm font-medium",children:[q.getFullYear(),"\ub144 ",q.getMonth()+1,"\uc6d4"]}),(0,k.jsx)("button",{type:"button",className:"px-2 py-1 text-sm border rounded",onClick:()=>D(e=>new Date(e.getFullYear(),e.getMonth()+1,1)),children:"\u25b6"})]}),(0,k.jsxs)("table",{className:"text-xs select-none",children:[(0,k.jsx)("thead",{children:(0,k.jsx)("tr",{className:"text-center text-gray-600",children:["\uc77c","\uc6d4","\ud654","\uc218","\ubaa9","\uae08","\ud1a0"].map((e,t)=>(0,k.jsx)("th",{className:"px-2 py-1 ".concat(0===t?"text-red-600":6===t?"text-blue-600":""),children:e},e))})}),(0,k.jsx)("tbody",{children:(()=>{const e=new Date(q.getFullYear(),q.getMonth(),1).getDay(),t=new Date(q.getFullYear(),q.getMonth()+1,0).getDate(),s=[];for(let r=0;r<e;r++)s.push(null);for(let r=1;r<=t;r++)s.push(r);const n=[];for(let r=0;r<s.length;r+=7)n.push(s.slice(r,r+7));return n.map((e,t)=>(0,k.jsx)("tr",{className:"text-center",children:e.map((e,t)=>{const s=0===t?"text-red-600":6===t?"text-blue-600":"";return(0,k.jsx)("td",{className:"px-2 py-1 ".concat(s," ").concat(e?"cursor-pointer hover:bg-gray-100 rounded":""),onClick:()=>(e=>{if(!e)return;const t=q.getFullYear(),s=q.getMonth()+1,n="".concat(t,"-").concat(W(s),"-").concat(W(e));C(e=>(0,i.A)((0,i.A)({},e),{},{validUntil:n})),U(!1)})(e),children:e||""},t)})},t))})()})]})]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\uc0c1\ud0dc"}),(0,k.jsx)("select",{name:"status",value:A.status,onChange:Y,className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",children:B.map(e=>(0,k.jsx)("option",{value:e,children:e},e))})]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,k.jsx)("h4",{className:"text-md font-medium text-gray-800",children:"\uacac\uc801 \ud56d\ubaa9"}),(0,k.jsx)("button",{type:"button",onClick:()=>{C(e=>(0,i.A)((0,i.A)({},e),{},{items:[...e.items,{category:"",name:"",description:"",quantity:1,unit:"",unitPrice:0,notes:""}]}))},className:"text-green-600 hover:text-green-800 text-sm",children:"+ \ud56d\ubaa9 \ucd94\uac00"})]}),(0,k.jsx)("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:A.items.map((e,t)=>{return(0,k.jsxs)("div",{className:"border border-gray-200 rounded-lg p-4 bg-gray-50",children:[(0,k.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,k.jsxs)("span",{className:"text-sm font-medium text-gray-700",children:["\ud56d\ubaa9 #",t+1]}),A.items.length>1&&(0,k.jsx)("button",{type:"button",onClick:()=>(e=>{A.items.length>1&&C(t=>(0,i.A)((0,i.A)({},t),{},{items:t.items.filter((t,s)=>s!==e)}))})(t),className:"text-red-600 hover:text-red-800 text-sm",children:"\uc0ad\uc81c"})]}),(0,k.jsxs)("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uce74\ud14c\uace0\ub9ac"}),(0,k.jsxs)("select",{value:e.category,onChange:e=>H(t,"category",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0,children:[(0,k.jsx)("option",{value:"",children:"\uce74\ud14c\uace0\ub9ac \uc120\ud0dd"}),d.map(e=>(0,k.jsx)("option",{value:e,children:e},e))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ub0b4\uc6a9"}),(0,k.jsx)("input",{type:"text",value:e.name,onChange:e=>H(t,"name",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uc124\uba85"}),(0,k.jsx)("input",{type:"text",value:e.description,onChange:e=>H(t,"description",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-4 gap-3 mb-3",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ub2e8\uac00"}),(0,k.jsx)("input",{type:"text",value:e.unitPrice?(s=e.unitPrice,s.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")):"",onChange:e=>H(t,"unitPrice",e.target.value),placeholder:"0",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\uc218\ub7c9"}),(0,k.jsx)("input",{type:"text",value:e.quantity||"",onChange:e=>H(t,"quantity",e.target.value),placeholder:"1",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ub2e8\uc704"}),(0,k.jsxs)("select",{value:e.unit,onChange:e=>H(t,"unit",e.target.value),className:"w-full border border-gray-300 rounded px-2 py-1 text-sm",required:!0,children:[(0,k.jsx)("option",{value:"",children:"\ub2e8\uc704 \uc120\ud0dd"}),l.map(e=>(0,k.jsx)("option",{value:e,children:e},e))]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ud569\uacc4"}),(0,k.jsxs)("div",{className:"w-full bg-gray-100 border border-gray-300 rounded px-2 py-1 text-sm",children:[((e.unitPrice||0)*(e.quantity||1)).toLocaleString(),"\uc6d0"]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-xs font-medium text-gray-600 mb-1",children:"\ube44\uace0"}),(0,k.jsx)("textarea",{value:e.notes,onChange:e=>H(t,"notes",e.target.value),rows:"2",className:"w-full border border-gray-300 rounded px-2 py-1 text-sm"})]})]},t);var s})}),(0,k.jsx)("div",{className:"mt-4 p-3 bg-gray-100 rounded",children:(0,k.jsx)("div",{className:"text-right",children:(0,k.jsxs)("span",{className:"text-lg font-bold text-gray-900",children:["\ucd1d \uacac\uc801 \uae08\uc561: ",K().toLocaleString(),"\uc6d0"]})})})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"\ud2b9\uc774\uc0ac\ud56d \ubc0f \uc870\uac74"}),(0,k.jsx)("textarea",{name:"notes",value:A.notes,onChange:Y,rows:"3",className:"mt-1 block w-full border border-gray-300 rounded-md px-3 py-2",placeholder:"\ubd80\uac00\uc138 \ubcc4\ub3c4, \uc124\uacc4 \ubcc0\uacbd \uc2dc \ucd94\uac00 \uacac\uc801 \ub4f1..."})]}),(0,k.jsxs)("div",{className:"flex justify-end space-x-2 pt-4",children:[(0,k.jsx)("button",{type:"button",onClick:G,className:"px-4 py-2 text-gray-500 hover:text-gray-700",children:"\ucde8\uc18c"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 bg-green-600 hover:bg-green-700 text-white rounded",children:b?"\uc218\uc815":"\uc791\uc131"})]})]})]})})}),(0,k.jsx)("div",{style:{display:"none"},children:(0,k.jsx)("div",{ref:c,style:{padding:"40px",fontFamily:"'Noto Sans KR', sans-serif",fontSize:"12px",lineHeight:"1.4",maxWidth:"800px",margin:"auto",backgroundColor:"#ffffff",color:"#374151"},children:j&&(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",marginBottom:"20px"},children:[(0,k.jsxs)("div",{style:{fontSize:"14px",color:"#374151"},children:[(0,k.jsx)("strong",{children:"\uacac\uc801\uc11c \ubc88\ud638:"})," ",j.id]}),(0,k.jsxs)("div",{style:{fontSize:"14px",color:"#374151"},children:[(0,k.jsx)("strong",{children:"\uc791\uc131\uc77c:"})," ",j.date]})]}),(0,k.jsx)("div",{style:{textAlign:"center",borderBottom:"3px solid #1f2937",paddingBottom:"20px"},children:(0,k.jsx)("h1",{style:{fontSize:"36px",margin:"0",fontWeight:"bold",color:"#1f2937",letterSpacing:"8px"},children:"\uacac   \uc801   \uc11c"})})]}),(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"30px"},children:[(0,k.jsx)("div",{children:(0,k.jsxs)("div",{style:{border:"2px solid #374151",padding:"20px",borderRadius:"8px",minWidth:"300px"},children:[(0,k.jsx)("h3",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"15px",color:"#1f2937",borderBottom:"1px solid #d1d5db",paddingBottom:"8px"},children:"\ubc1c\uc8fc\ucc98 \uc815\ubcf4"}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uac74\ucd95\uc8fc\uba85:"})," ",j.clientName]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\ud504\ub85c\uc81d\ud2b8\uba85:"})," ",j.projectName]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc791\uc5c5\uc7a5 \uc8fc\uc18c:"})," ",j.workplaceAddress]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc720\ud6a8\uae30\ud55c:"})," ",j.validUntil]})]})}),(0,k.jsx)("div",{children:(0,k.jsxs)("div",{style:{border:"2px solid #374151",padding:"20px",borderRadius:"8px",minWidth:"300px"},children:[(0,k.jsx)("h3",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"15px",color:"#1f2937",borderBottom:"1px solid #d1d5db",paddingBottom:"8px"},children:"\uc2dc\uacf5\uc5c5\uccb4 \uc815\ubcf4"}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc5c5\uccb4\uba85:"})," ",a.name]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\ub300\ud45c\uc790:"})," ",a.representative]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc5f0\ub77d\ucc98:"})," ",a.phone]}),(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc8fc\uc18c:"})," ",a.address]}),a.businessNumber&&(0,k.jsxs)("p",{style:{margin:"8px 0",fontSize:"14px"},children:[(0,k.jsx)("strong",{children:"\uc0ac\uc5c5\uc790\ubc88\ud638:"})," ",a.businessNumber]})]})})]}),(0,k.jsx)("div",{style:{textAlign:"left",marginBottom:"30px",padding:"15px",backgroundColor:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px"},children:(0,k.jsxs)("p",{style:{fontSize:"18px",fontWeight:"bold",margin:"0",color:"#1f2937"},children:["\ucd1d \uacac\uc801\uae08\uc561 : \uae08 ",ee(j.totalAmount)," \uc6d0\uc815"]})}),(0,k.jsxs)("div",{style:{marginBottom:"40px"},children:[(0,k.jsx)("h3",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"15px",color:"#1f2937",borderBottom:"2px solid #374151",paddingBottom:"8px"},children:"\uc138\ubd80 \uacac\uc801 \ub0b4\uc5ed"}),(0,k.jsx)("div",{style:{border:"2px solid #374151",borderRadius:"8px",overflow:"hidden"},children:(0,k.jsxs)("table",{style:{width:"100%",borderCollapse:"collapse",fontSize:"12px"},children:[(0,k.jsx)("thead",{children:(0,k.jsxs)("tr",{style:{backgroundColor:"#374151",color:"white"},children:[(0,k.jsx)("th",{style:{padding:"12px 8px",border:"1px solid #6b7280",textAlign:"center",fontWeight:"bold",width:"50px"},children:"\uc21c\ubc88"}),(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #6b7280",textAlign:"center",fontWeight:"bold",width:"120px"},children:"\uad6c\ubd84"}),(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #6b7280",textAlign:"center",fontWeight:"bold",width:"250px"},children:"\uacf5\uc885 \ubc0f \ub0b4\uc6a9"}),(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #6b7280",textAlign:"center",fontWeight:"bold",width:"80px"},children:"\uc218\ub7c9"}),(0,k.jsx)("th",{style:{padding:"12px 16px",border:"1px solid #6b7280",textAlign:"center",fontWeight:"bold",width:"80px"},children:"\ub2e8\uc704"}),(0,k.jsxs)("th",{style:{padding:"12px 16px",border:"1px solid #6b7280",textAlign:"center",fontWeight:"bold",width:"100px"},children:["\ub2e8\uac00",(0,k.jsx)("br",{}),(0,k.jsx)("span",{style:{fontSize:"10px",fontWeight:"normal"},children:"(\ucc9c\uc6d0)"})]}),(0,k.jsxs)("th",{style:{padding:"12px 16px",border:"1px solid #6b7280",textAlign:"center",fontWeight:"bold",width:"100px"},children:["\uae08\uc561",(0,k.jsx)("br",{}),(0,k.jsx)("span",{style:{fontSize:"10px",fontWeight:"normal"},children:"(\ucc9c\uc6d0)"})]}),(0,k.jsx)("th",{style:{padding:"12px 12px",border:"1px solid #6b7280",textAlign:"center",fontWeight:"bold",width:"120px"},children:"\ube44\uace0"})]})}),(0,k.jsx)("tbody",{children:j.items.map((e,t)=>(0,k.jsxs)("tr",{style:{":hover":{backgroundColor:"#f1f5f9"}},children:[(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center"},children:t+1}),(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center"},children:e.category}),(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb"},children:(0,k.jsxs)("div",{children:[(0,k.jsx)("strong",{children:e.name}),e.description&&(0,k.jsx)("div",{style:{fontSize:"11px",color:"#6b7280",marginTop:"4px",fontStyle:"italic"},children:e.description})]})}),(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center"},children:e.quantity}),(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"center"},children:e.unit}),(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"right"},children:Math.floor(e.unitPrice/1e3).toLocaleString()}),(0,k.jsx)("td",{style:{padding:"12px 16px",border:"1px solid #e5e7eb",textAlign:"right",fontWeight:"bold"},children:Math.floor(e.quantity*e.unitPrice/1e3).toLocaleString()}),(0,k.jsx)("td",{style:{padding:"12px 12px",border:"1px solid #e5e7eb",fontSize:"11px",color:"#374151"},children:e.notes||""})]},t))}),(0,k.jsx)("tfoot",{children:(0,k.jsx)("tr",{style:{backgroundColor:"#f8fafc",fontWeight:"bold",fontSize:"14px"},children:(0,k.jsxs)("td",{colSpan:"8",style:{padding:"16px",border:"1px solid #e5e7eb",textAlign:"right",fontSize:"16px",fontWeight:"bold",color:"#374151",backgroundColor:"#f3f4f6"},children:["\ucd1d \uacac\uc801\uae08\uc561: ",j.totalAmount.toLocaleString(),"\uc6d0"]})})})]})})]}),j.notes&&(0,k.jsxs)("div",{style:{marginBottom:"30px"},children:[(0,k.jsx)("h3",{style:{fontSize:"16px",fontWeight:"bold",marginBottom:"15px",color:"#1f2937",borderBottom:"2px solid #374151",paddingBottom:"8px"},children:"\ud2b9\uc774\uc0ac\ud56d \ubc0f \uc870\uac74"}),(0,k.jsx)("div",{style:{border:"1px solid #d1d5db",padding:"16px",borderRadius:"8px",backgroundColor:"#fefce8"},children:(0,k.jsx)("p",{style:{margin:"0",fontSize:"13px",lineHeight:"1.6",whiteSpace:"pre-line",color:"#374151"},children:j.notes})})]}),(0,k.jsx)("div",{style:{marginTop:"50px",borderTop:"1px solid #d1d5db",paddingTop:"30px"},children:(0,k.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[(0,k.jsxs)("div",{style:{textAlign:"center",minWidth:"200px"},children:[(0,k.jsx)("div",{style:{borderBottom:"1px solid #374151",marginBottom:"8px",paddingBottom:"40px"}}),(0,k.jsx)("p",{style:{fontSize:"14px",fontWeight:"bold",margin:"0",color:"#374151"},children:"\ubc1c\uc8fc\ucc98 \ud655\uc778"})]}),(0,k.jsxs)("div",{style:{textAlign:"center",minWidth:"200px"},children:[(0,k.jsx)("div",{style:{borderBottom:"1px solid #374151",marginBottom:"8px",paddingBottom:"40px"}}),(0,k.jsxs)("p",{style:{fontSize:"14px",fontWeight:"bold",margin:"0",color:"#374151"},children:["\uc2dc\uacf5\uc5c5\uccb4 (",a.name,")"]})]})]})})]})})})]})},ue="constructionApp_stampImage",he=()=>{let e=0;for(let t in localStorage)localStorage.hasOwnProperty(t)&&(e+=localStorage[t].length+t.length);return{used:Math.round(e/1024)+" KB",stampImageSize:localStorage.getItem(ue)?Math.round(localStorage.getItem(ue).length/1024)+" KB":"0 KB"}};const ge=function(){const{companyInfo:e,setCompanyInfo:t,units:s,setUnits:r,categories:a,setCategories:l,stampImage:d,setStampImage:o}=I(),[c,x]=(0,n.useState)(!1),[m,p]=(0,n.useState)((0,i.A)({},e)),[u,h]=(0,n.useState)(""),[g,b]=(0,n.useState)(""),[j,y]=(0,n.useState)({used:"0 KB",stampImageSize:"0 KB"}),[v,N]=(0,n.useState)(""),[w,S]=(0,n.useState)(""),A=(0,n.useRef)(null);(0,n.useEffect)(()=>{(()=>{try{const e="test";return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return console.error("localStorage \uc0ac\uc6a9 \ubd88\uac00:",e),!1}})()&&y(he()),(async()=>{try{if(window.cms&&"function"===typeof window.cms.getBaseDir){const e=await window.cms.getBaseDir();N(e)}}catch(t){}try{var e;const t=await(null===(e=f.getBrowserDirectoryInfo)||void 0===e?void 0:e.call(f));null!==t&&void 0!==t&&t.name&&S(t.name)}catch(t){}})()},[d]);const C=e=>{const{name:t,value:s}=e.target,n="phone"===t?(e=>{const t=e.replace(/[^\d]/g,"");if(0===t.length)return"";if(t.length<=3)return t;if(t.length<=7)return t.startsWith("02")?t.length<=2?t:"".concat(t.slice(0,2),"-").concat(t.slice(2)):(t.startsWith("0"),"".concat(t.slice(0,3),"-").concat(t.slice(3)));if(t.length<=11)return t.startsWith("02")?t.length<=9?"02-".concat(t.slice(2,5),"-").concat(t.slice(5)):"02-".concat(t.slice(2,6),"-").concat(t.slice(6)):t.startsWith("01")?"".concat(t.slice(0,3),"-").concat(t.slice(3,7),"-").concat(t.slice(7)):t.startsWith("0")?"".concat(t.slice(0,3),"-").concat(t.slice(3,6),"-").concat(t.slice(6)):"".concat(t.slice(0,3),"-").concat(t.slice(3,7),"-").concat(t.slice(7));{const e=t.slice(0,11);return e.startsWith("02")?"02-".concat(e.slice(2,6),"-").concat(e.slice(6)):e.startsWith("01")?"".concat(e.slice(0,3),"-").concat(e.slice(3,7),"-").concat(e.slice(7)):"".concat(e.slice(0,3),"-").concat(e.slice(3,6),"-").concat(e.slice(6))}})(s):s;p(e=>(0,i.A)((0,i.A)({},e),{},{[t]:n}))},P=()=>{u.trim()&&!s.includes(u.trim())?(r(e=>[...e,u.trim()]),h(""),alert("\uc0c8\ub85c\uc6b4 \ub2e8\uc704\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):s.includes(u.trim())&&alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \ub2e8\uc704\uc785\ub2c8\ub2e4.")},_=()=>{g.trim()&&!a.includes(g.trim())?(l(e=>[...e,g.trim()]),b(""),alert("\uc0c8\ub85c\uc6b4 \uce74\ud14c\uace0\ub9ac\uac00 \ucd94\uac00\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")):a.includes(g.trim())&&alert("\uc774\ubbf8 \uc874\uc7ac\ud558\ub294 \uce74\ud14c\uace0\ub9ac\uc785\ub2c8\ub2e4.")};return(0,k.jsxs)("div",{className:"p-6",children:[(0,k.jsxs)("div",{className:"mb-8",children:[(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"\ud658\uacbd\uc124\uc815"}),(0,k.jsx)("p",{className:"text-gray-600",children:"\uac74\ucd95\uc5c5\uccb4 \uc815\ubcf4\uc640 \uc2dc\uc2a4\ud15c \uc124\uc815\uc744 \uad00\ub9ac\ud558\uc138\uc694"})]}),(0,k.jsxs)("div",{className:"flex flex-col lg:flex-row lg:flex-wrap gap-8 mb-8",children:[(0,k.jsxs)("div",{className:"flex-1 bg-white rounded-lg shadow flex flex-col",children:[(0,k.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-100",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\uc5c5\uccb4 \uc815\ubcf4 \uad00\ub9ac"}),c?(0,k.jsxs)("div",{className:"space-x-2",children:[(0,k.jsx)("button",{onClick:()=>{t(m),x(!1),alert("\uac74\ucd95\uc5c5\uccb4 \uc815\ubcf4\uac00 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")},className:"bg-green-600 hover:bg-green-700 text-white font-bold py-2 px-4 rounded",children:"\uc800\uc7a5"}),(0,k.jsx)("button",{onClick:()=>{p((0,i.A)({},e)),x(!1)},className:"bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-4 rounded",children:"\ucde8\uc18c"})]}):(0,k.jsx)("button",{onClick:()=>x(!0),className:"bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded",children:"\uc218\uc815"})]}),(0,k.jsxs)("div",{className:"p-6 flex-1",children:[(0,k.jsxs)("div",{className:"grid grid-cols-1 gap-6",children:[(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uc5c5\uccb4\uba85 ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),c?(0,k.jsx)("input",{type:"text",name:"name",value:m.name,onChange:C,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}):(0,k.jsx)("p",{className:"text-gray-900 py-2",children:e.name})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uc0ac\uc5c5\uc790\ub4f1\ub85d\ubc88\ud638 ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),c?(0,k.jsx)("input",{type:"text",name:"businessNumber",value:m.businessNumber,onChange:C,placeholder:"000-00-00000",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}):(0,k.jsx)("p",{className:"text-gray-900 py-2",children:e.businessNumber})]})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\ub300\ud45c\uc790\uba85 ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),c?(0,k.jsx)("input",{type:"text",name:"representative",value:m.representative,onChange:C,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}):(0,k.jsx)("p",{className:"text-gray-900 py-2",children:e.representative})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uc804\ud654\ubc88\ud638 ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),c?(0,k.jsx)("input",{type:"tel",name:"phone",value:m.phone,onChange:C,placeholder:"02-0000-0000",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}):(0,k.jsx)("p",{className:"text-gray-900 py-2",children:e.phone})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc774\uba54\uc77c"}),c?(0,k.jsx)("input",{type:"email",name:"email",value:m.email,onChange:C,placeholder:"info@company.com",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,k.jsx)("p",{className:"text-gray-900 py-2",children:e.email||"-"})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["\uc8fc\uc18c ",(0,k.jsx)("span",{className:"text-red-500",children:"*"})]}),c?(0,k.jsx)("input",{type:"text",name:"address",value:m.address,onChange:C,placeholder:"\uc11c\uc6b8\uc2dc \uac15\ub0a8\uad6c \ud14c\ud5e4\ub780\ub85c 123",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0}):(0,k.jsx)("p",{className:"text-gray-900 py-2",children:e.address})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uacc4\uc88c\ubc88\ud638"}),c?(0,k.jsx)("input",{type:"text",name:"bankAccount",value:m.bankAccount,onChange:C,placeholder:"\uc740\ud589\uba85 000-000-000000",className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,k.jsx)("p",{className:"text-gray-900 py-2",children:e.bankAccount||"-"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"\uc608\uae08\uc8fc\uba85"}),c?(0,k.jsx)("input",{type:"text",name:"accountHolder",value:m.accountHolder,onChange:C,className:"w-full border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500"}):(0,k.jsx)("p",{className:"text-gray-900 py-2",children:e.accountHolder||"-"})]})]})]}),(0,k.jsx)("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),(0,k.jsx)("div",{className:"ml-3",children:(0,k.jsx)("p",{className:"text-sm text-blue-700",children:"\uc5ec\uae30\uc11c \uc124\uc815\ud55c \uc815\ubcf4\ub294 \uc0dd\uc131\ub418\ub294 \ubaa8\ub4e0 \uccad\uad6c\uc11c\uc5d0 \uc790\ub3d9\uc73c\ub85c \ud3ec\ud568\ub429\ub2c8\ub2e4. \uc815\ud655\ud55c \uc815\ubcf4\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694."})})]})})]})]}),(0,k.jsxs)("div",{className:"flex-1 bg-white rounded-lg shadow flex flex-col",children:[(0,k.jsxs)("div",{className:"px-6 py-4 border-b border-gray-200 flex justify-between items-center bg-gray-100",children:[(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\uc2dc\uc2a4\ud15c \uc124\uc815"}),(0,k.jsx)("div",{className:"h-10"})]}),(0,k.jsx)("div",{className:"p-6 flex-1",children:(0,k.jsxs)("div",{className:"space-y-8",children:[(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\ub2e8\uc704 \uad00\ub9ac"}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("input",{type:"text",value:u,onChange:e=>h(e.target.value),placeholder:"\uc0c8 \ub2e8\uc704 \uc785\ub825",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-blue-500 text-sm",onKeyPress:e=>"Enter"===e.key&&P()}),(0,k.jsx)("button",{onClick:P,className:"bg-blue-600 hover:bg-blue-700 text-white px-3 py-2 rounded-md text-sm",children:"\ucd94\uac00"})]}),(0,k.jsx)("div",{className:"border border-gray-200 rounded-md max-h-48 overflow-y-auto",children:(0,k.jsx)("div",{className:"p-2",children:s.map((e,t)=>(0,k.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[(0,k.jsx)("span",{className:"text-gray-900 text-sm",children:e}),(0,k.jsx)("button",{onClick:()=>(e=>{window.confirm("'".concat(e,"' \ub2e8\uc704\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))&&(r(t=>t.filter(t=>t!==e)),alert("\ub2e8\uc704\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))})(e),className:"text-red-600 hover:text-red-800 text-xs",children:"\uc0ad\uc81c"})]},t))})})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\uce74\ud14c\uace0\ub9ac \uad00\ub9ac"}),(0,k.jsxs)("div",{className:"space-y-4",children:[(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsx)("input",{type:"text",value:g,onChange:e=>b(e.target.value),placeholder:"\uc0c8 \uce74\ud14c\uace0\ub9ac \uc785\ub825",className:"flex-1 border border-gray-300 rounded-md px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 text-sm",onKeyPress:e=>"Enter"===e.key&&_()}),(0,k.jsx)("button",{onClick:_,className:"bg-green-600 hover:bg-green-700 text-white px-3 py-2 rounded-md text-sm",children:"\ucd94\uac00"})]}),(0,k.jsx)("div",{className:"border border-gray-200 rounded-md max-h-48 overflow-y-auto",children:(0,k.jsx)("div",{className:"p-2",children:a.map((e,t)=>(0,k.jsxs)("div",{className:"flex items-center justify-between p-2 hover:bg-gray-50 rounded",children:[(0,k.jsx)("span",{className:"text-gray-900 text-sm",children:e}),(0,k.jsx)("button",{onClick:()=>(e=>{window.confirm("'".concat(e,"' \uce74\ud14c\uace0\ub9ac\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?"))&&(l(t=>t.filter(t=>t!==e)),alert("\uce74\ud14c\uace0\ub9ac\uac00 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."))})(e),className:"text-red-600 hover:text-red-800 text-xs",children:"\uc0ad\uc81c"})]},t))})})]})]})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"\ub3c4\uc7a5 \uc774\ubbf8\uc9c0 \uad00\ub9ac"}),(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,k.jsx)("div",{children:(0,k.jsx)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6",children:(0,k.jsxs)("div",{className:"text-center",children:[(0,k.jsx)("svg",{className:"mx-auto h-12 w-12 text-gray-400",stroke:"currentColor",fill:"none",viewBox:"0 0 48 48",children:(0,k.jsx)("path",{d:"M28 8H12a4 4 0 00-4 4v20m32-12v8m0 0v8a4 4 0 01-4 4H12a4 4 0 01-4-4v-4m32-4l-3.172-3.172a4 4 0 00-5.656 0L28 28M8 32l9.172-9.172a4 4 0 015.656 0L28 28m0 0l4 4m4-24h8m-4-4v8m-12 4h.02",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})}),(0,k.jsxs)("div",{className:"mt-4",children:[(0,k.jsxs)("label",{htmlFor:"stamp-image",className:"cursor-pointer",children:[(0,k.jsx)("span",{className:"block text-sm font-medium text-gray-900",children:"\ub3c4\uc7a5 \uc774\ubbf8\uc9c0 \uc5c5\ub85c\ub4dc"}),(0,k.jsx)("span",{className:"block text-sm text-gray-500 mt-1",children:"PNG, JPG \ud30c\uc77c\ub9cc \uc9c0\uc6d0 (\ucd5c\ub300 2MB)"})]}),(0,k.jsx)("input",{id:"stamp-image",ref:A,type:"file",accept:"image/*",onChange:async e=>{const t=e.target.files[0];if(t)if(t.type.startsWith("image/"))try{if(t.size>5242880)return void alert("\uc774\ubbf8\uc9c0 \ud30c\uc77c \ud06c\uae30\ub294 5MB\ub97c \ucd08\uacfc\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.");const e=await(e=>new Promise((t,s)=>{const n=new FileReader;n.onload=e=>t(e.target.result),n.onerror=e=>s(e),n.readAsDataURL(e)}))(t),s=(e=>{try{return localStorage.setItem(ue,e),console.log("\ub3c4\uc7a5 \uc774\ubbf8\uc9c0\uac00 localStorage\uc5d0 \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),!0}catch(t){return console.error("\ub3c4\uc7a5 \uc774\ubbf8\uc9c0 \uc800\uc7a5 \uc2e4\ud328:",t),!1}})(e);s?(o(e),alert("\ub3c4\uc7a5 \uc774\ubbf8\uc9c0\uac00 \uc131\uacf5\uc801\uc73c\ub85c \uc800\uc7a5\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),console.log("\uc800\uc7a5\uc18c \uc0ac\uc6a9\ub7c9:",he())):alert("\uc774\ubbf8\uc9c0 \uc800\uc7a5\uc5d0 \uc2e4\ud328\ud588\uc2b5\ub2c8\ub2e4. \ud30c\uc77c \ud06c\uae30\ub97c \uc904\uc5ec\uc8fc\uc138\uc694.")}catch(s){console.error("\uc774\ubbf8\uc9c0 \ucc98\ub9ac \uc624\ub958:",s),alert("\uc774\ubbf8\uc9c0 \ucc98\ub9ac \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}else alert("\uc774\ubbf8\uc9c0 \ud30c\uc77c\ub9cc \uc5c5\ub85c\ub4dc \uac00\ub2a5\ud569\ub2c8\ub2e4.")},className:"hidden"})]}),(0,k.jsx)("button",{onClick:()=>{var e;return null===(e=A.current)||void 0===e?void 0:e.click()},className:"mt-4 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md text-sm",children:"\ud30c\uc77c \uc120\ud0dd"})]})})}),(0,k.jsxs)("div",{className:"space-y-4",children:[d?(0,k.jsxs)("div",{children:[(0,k.jsx)("h4",{className:"text-sm font-medium text-gray-900 mb-2",children:"\ubbf8\ub9ac\ubcf4\uae30"}),(0,k.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,k.jsx)("div",{className:"w-24 h-24 border border-gray-200 rounded-lg overflow-hidden",children:(0,k.jsx)("img",{src:d,alt:"\ub3c4\uc7a5 \ubbf8\ub9ac\ubcf4\uae30",className:"w-full h-full object-contain"})}),(0,k.jsx)("button",{onClick:()=>{if(window.confirm("\ub3c4\uc7a5 \uc774\ubbf8\uc9c0\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){(()=>{try{return localStorage.removeItem(ue),console.log("\ub3c4\uc7a5 \uc774\ubbf8\uc9c0\uac00 localStorage\uc5d0\uc11c \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),!0}catch(e){return console.error("\ub3c4\uc7a5 \uc774\ubbf8\uc9c0 \uc0ad\uc81c \uc2e4\ud328:",e),!1}})()?(o(null),A.current&&(A.current.value=""),alert("\ub3c4\uc7a5 \uc774\ubbf8\uc9c0\uac00 \uc644\uc804\ud788 \uc0ad\uc81c\ub418\uc5c8\uc2b5\ub2c8\ub2e4."),console.log("\uc800\uc7a5\uc18c \uc0ac\uc6a9\ub7c9:",he())):alert("\uc774\ubbf8\uc9c0 \uc0ad\uc81c \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"bg-red-600 hover:bg-red-700 text-white px-3 py-2 rounded text-sm",children:"\uc0ad\uc81c"})]})]}):(0,k.jsx)("div",{className:"text-center text-gray-500 py-8",children:(0,k.jsx)("p",{className:"text-sm",children:"\uc5c5\ub85c\ub4dc\ub41c \uc774\ubbf8\uc9c0\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"})}),(0,k.jsx)("div",{className:"p-4 bg-yellow-50 rounded-lg",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-5 w-5 text-yellow-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),(0,k.jsx)("div",{className:"ml-3",children:(0,k.jsx)("p",{className:"text-sm text-yellow-700",children:"\uc5c5\ub85c\ub4dc\ub41c \ub3c4\uc7a5 \uc774\ubbf8\uc9c0\ub294 \uccad\uad6c\uc11c \uc0dd\uc131 \uc2dc \uc790\ub3d9\uc73c\ub85c \ud3ec\ud568\ub429\ub2c8\ub2e4. \uc120\uba85\ud558\uace0 \ud22c\uba85 \ubc30\uacbd\uc758 \uc774\ubbf8\uc9c0\ub97c \uc0ac\uc6a9\ud558\uc2dc\uae30 \ubc14\ub78d\ub2c8\ub2e4."})})]})}),(0,k.jsx)("div",{className:"p-3 bg-blue-50 rounded-lg",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)("svg",{className:"h-4 w-4 text-blue-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,k.jsx)("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})}),(0,k.jsx)("div",{className:"ml-2",children:(0,k.jsxs)("p",{className:"text-xs text-blue-700",children:["\uc800\uc7a5\uc18c \uc0ac\uc6a9\ub7c9: ",j.used," | \ub3c4\uc7a5 \uc774\ubbf8\uc9c0: ",j.stampImageSize]})})]})})]})]})]})]})})]}),(0,k.jsxs)("div",{className:"w-full bg-white rounded-lg shadow h-max",children:[(0,k.jsx)("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-100",children:(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\ub370\uc774\ud130 \uc800\uc7a5 \uc704\uce58"})}),(0,k.jsx)("div",{className:"p-6 space-y-3",children:v?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"text-sm text-gray-600 mb-1",children:"\ud604\uc7ac \ub514\ub809\ud1a0\ub9ac"}),(0,k.jsx)("div",{className:"text-sm font-mono break-all bg-gray-50 border rounded p-2",children:v})]}),(0,k.jsx)("button",{onClick:async()=>{try{const e=await window.cms.chooseBaseDir();N(e),alert("\ub370\uc774\ud130 \uc800\uc7a5 \uc704\uce58\uac00 \ubcc0\uacbd\ub418\uc5c8\uc2b5\ub2c8\ub2e4.")}catch(e){alert("\ub514\ub809\ud1a0\ub9ac \uc120\ud0dd \uc911 \uc624\ub958\uac00 \ubc1c\uc0dd\ud588\uc2b5\ub2c8\ub2e4.")}},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded text-sm",children:"\ub514\ub809\ud1a0\ub9ac \ubcc0\uacbd"}),(0,k.jsx)("p",{className:"text-xs text-gray-500",children:"Electron \ud658\uacbd\uc5d0\uc11c\ub9cc \uc0ac\uc6a9\ud560 \uc218 \uc788\uc2b5\ub2c8\ub2e4."})]}):(0,k.jsxs)("div",{className:"space-y-2",children:[(0,k.jsx)("p",{className:"text-sm text-gray-600",children:"\ube0c\ub77c\uc6b0\uc800 \uc800\uc7a5 \ubc29\uc2dd"}),w?(0,k.jsxs)("div",{className:"text-sm",children:["\uc120\ud0dd\ub41c \ud3f4\ub354: ",(0,k.jsx)("span",{className:"font-mono bg-gray-50 border rounded px-2 py-1",children:w})]}):(0,k.jsx)("p",{className:"text-sm text-gray-500",children:"\uae30\ubcf8 \uc800\uc7a5\uc18c(localStorage)\ub97c \uc0ac\uc6a9 \uc911\uc785\ub2c8\ub2e4."}),"showDirectoryPicker"in window?(0,k.jsx)("button",{onClick:async()=>{var e;if(await(null===(e=f.chooseBrowserDirectory)||void 0===e?void 0:e.call(f))){var t;const e=await(null===(t=f.getBrowserDirectoryInfo)||void 0===t?void 0:t.call(f));S((null===e||void 0===e?void 0:e.name)||""),alert("\ube0c\ub77c\uc6b0\uc800\uc5d0\uc11c \uc0ac\uc6a9\ud560 \ud3f4\ub354\uac00 \uc124\uc815\ub418\uc5c8\uc2b5\ub2c8\ub2e4. \uc774\ud6c4 \ubcc0\uacbd \uc0ac\ud56d\uc740 \ud574\ub2f9 \ud3f4\ub354\uc758 store.json\uc5d0\ub3c4 \uc800\uc7a5\ub429\ub2c8\ub2e4.")}else alert("\ud3f4\ub354 \uc120\ud0dd\uc774 \ucde8\uc18c\ub418\uc5c8\uac70\ub098 \uad8c\ud55c\uc774 \uc5c6\uc2b5\ub2c8\ub2e4.")},className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded text-sm",children:"\ube0c\ub77c\uc6b0\uc800 \ud3f4\ub354 \uc120\ud0dd(Edge/Chrome)"}):(0,k.jsx)("p",{className:"text-xs text-gray-500",children:"\uc774 \ube0c\ub77c\uc6b0\uc800\ub294 \ud3f4\ub354 \uc120\ud0dd\uc744 \uc9c0\uc6d0\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4."})]})})]})]})]})};var be=s(373),fe=s(129),je=s(676),ye=s(777),ve=s(786);const Ne=()=>{const{getAllUsers:e,addUser:t,updateUser:s,deleteUser:r,currentUser:a}=O(),[l,d]=(0,n.useState)([]),[o,c]=(0,n.useState)(!1),[x,m]=(0,n.useState)(null),[p,u]=(0,n.useState)({username:"",password:"",name:"",role:"user"}),[h,g]=(0,n.useState)(""),[b,f]=(0,n.useState)(null),j=(0,n.useCallback)(()=>{d(e())},[e]);(0,n.useEffect)(()=>{j()},[j]);const y=()=>{u({username:"",password:"",name:"",role:"user"}),g(""),m(null)},v=e=>({admin:"\uad00\ub9ac\uc790",manager:"\ub9e4\ub2c8\uc800",user:"\uc0ac\uc6a9\uc790"}[e]||e);return(0,k.jsxs)("div",{className:"max-w-6xl mx-auto p-6",children:[(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,k.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,k.jsxs)("div",{className:"flex items-center justify-between",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)(be.A,{className:"h-6 w-6 text-gray-600"}),(0,k.jsx)("h1",{className:"text-xl font-semibold text-gray-900",children:"\uc0ac\uc6a9\uc790 \uad00\ub9ac"})]}),(0,k.jsxs)("button",{onClick:()=>{y(),c(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700 flex items-center space-x-2",children:[(0,k.jsx)(fe.A,{className:"h-5 w-5"}),(0,k.jsx)("span",{children:"\uc0ac\uc6a9\uc790 \ucd94\uac00"})]})]})}),(0,k.jsx)("div",{className:"p-6",children:0===l.length?(0,k.jsxs)("div",{className:"text-center py-8",children:[(0,k.jsx)(be.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,k.jsx)("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"\uc0ac\uc6a9\uc790\uac00 \uc5c6\uc2b5\ub2c8\ub2e4"}),(0,k.jsx)("p",{className:"mt-1 text-sm text-gray-500",children:"\uc0c8 \uc0ac\uc6a9\uc790\ub97c \ucd94\uac00\ud574\ubcf4\uc138\uc694."})]}):(0,k.jsx)("div",{className:"overflow-x-auto",children:(0,k.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,k.jsx)("thead",{className:"bg-gray-50",children:(0,k.jsxs)("tr",{children:[(0,k.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uc0ac\uc6a9\uc790 \uc815\ubcf4"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uc544\uc774\ub514"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uad8c\ud55c"}),(0,k.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"\uc791\uc5c5"})]})}),(0,k.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:l.map(e=>{return(0,k.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"h-10 w-10 rounded-full bg-gray-300 flex items-center justify-center",children:(0,k.jsx)("span",{className:"text-sm font-medium text-gray-700",children:e.name.charAt(0)})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("div",{className:"text-sm font-medium text-gray-900",children:e.name}),e.id===a.id&&(0,k.jsx)("div",{className:"text-sm text-gray-500",children:"(\ud604\uc7ac \ub85c\uadf8\uc778)"})]})]})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:e.username}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:(0,k.jsx)("span",{className:"inline-flex px-2 py-1 text-xs font-semibold rounded-full ".concat((t=e.role,{admin:"bg-red-100 text-red-800",manager:"bg-blue-100 text-blue-800",user:"bg-green-100 text-green-800"}[t]||"bg-gray-100 text-gray-800")),children:v(e.role)})}),(0,k.jsx)("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:(0,k.jsxs)("div",{className:"flex space-x-2",children:[(0,k.jsxs)("button",{onClick:()=>(e=>{m(e),u({username:e.username,password:"",name:e.name,role:e.role}),c(!0)})(e),className:"text-indigo-600 hover:text-indigo-900 flex items-center space-x-1",children:[(0,k.jsx)(je.A,{className:"h-4 w-4"}),(0,k.jsx)("span",{children:"\uc218\uc815"})]}),e.id!==a.id&&(0,k.jsxs)("button",{onClick:()=>(e=>{e.id!==a.id?f(e):g("\uc790\uc2e0\uc758 \uacc4\uc815\uc740 \uc0ad\uc81c\ud560 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4.")})(e),className:"text-red-600 hover:text-red-900 flex items-center space-x-1",children:[(0,k.jsx)(ye.A,{className:"h-4 w-4"}),(0,k.jsx)("span",{children:"\uc0ad\uc81c"})]})]})})]},e.id);var t})})]})})})]}),o&&(0,k.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:x?"\uc0ac\uc6a9\uc790 \uc218\uc815":"\uc0ac\uc6a9\uc790 \ucd94\uac00"}),(0,k.jsxs)("form",{onSubmit:e=>{if(e.preventDefault(),g(""),!p.username||!p.name||!x&&!p.password)return void g("\ubaa8\ub4e0 \ud544\ub4dc\ub97c \uc785\ub825\ud574\uc8fc\uc138\uc694.");let n;if(x){const e=(0,i.A)({},p);e.password||delete e.password,n=s(x.id,e)}else n=t(p);n.success?(c(!1),y(),j()):g(n.error)},className:"space-y-4",children:[(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\uc544\uc774\ub514"}),(0,k.jsx)("input",{type:"text",value:p.username,onChange:e=>u((0,i.A)((0,i.A)({},p),{},{username:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uc544\uc774\ub514\ub97c \uc785\ub825\ud558\uc138\uc694"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\uc774\ub984"}),(0,k.jsx)("input",{type:"text",value:p.name,onChange:e=>u((0,i.A)((0,i.A)({},p),{},{name:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"\uc774\ub984\uc744 \uc785\ub825\ud558\uc138\uc694"})]}),(0,k.jsxs)("div",{children:[(0,k.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["\ube44\ubc00\ubc88\ud638 ",x&&(0,k.jsx)("span",{className:"text-gray-500",children:"(\ubcc0\uacbd\uc2dc\uc5d0\ub9cc \uc785\ub825)"})]}),(0,k.jsx)("input",{type:"password",value:p.password,onChange:e=>u((0,i.A)((0,i.A)({},p),{},{password:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:x?"\uc0c8 \ube44\ubc00\ubc88\ud638 (\uc120\ud0dd\uc0ac\ud56d)":"\ube44\ubc00\ubc88\ud638\ub97c \uc785\ub825\ud558\uc138\uc694"})]}),(0,k.jsxs)("div",{children:[(0,k.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"\uad8c\ud55c"}),(0,k.jsxs)("select",{value:p.role,onChange:e=>u((0,i.A)((0,i.A)({},p),{},{role:e.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",children:[(0,k.jsx)("option",{value:"user",children:"\uc0ac\uc6a9\uc790"}),(0,k.jsx)("option",{value:"manager",children:"\ub9e4\ub2c8\uc800"}),(0,k.jsx)("option",{value:"admin",children:"\uad00\ub9ac\uc790"})]})]}),h&&(0,k.jsx)("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:(0,k.jsx)("p",{className:"text-red-700 text-sm",children:h})}),(0,k.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,k.jsx)("button",{type:"button",onClick:()=>{c(!1),y()},className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"\ucde8\uc18c"}),(0,k.jsx)("button",{type:"submit",className:"px-4 py-2 text-sm font-medium text-white bg-blue-600 rounded-md hover:bg-blue-700",children:x?"\uc218\uc815":"\ucd94\uac00"})]})]})]})}),b&&(0,k.jsx)("div",{className:"fixed inset-0 bg-gray-600 bg-opacity-50 flex items-center justify-center z-50",children:(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-6 w-full max-w-md",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,k.jsx)(ve.A,{className:"h-6 w-6 text-red-600"}),(0,k.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"\uc0ac\uc6a9\uc790 \uc0ad\uc81c"})]}),(0,k.jsxs)("p",{className:"text-sm text-gray-500 mb-6",children:[(0,k.jsx)("span",{className:"font-medium",children:b.name})," \uc0ac\uc6a9\uc790\ub97c \uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?",(0,k.jsx)("br",{}),"\uc774 \uc791\uc5c5\uc740 \ub418\ub3cc\ub9b4 \uc218 \uc5c6\uc2b5\ub2c8\ub2e4."]}),(0,k.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,k.jsx)("button",{onClick:()=>f(null),className:"px-4 py-2 text-sm font-medium text-gray-700 bg-gray-100 rounded-md hover:bg-gray-200",children:"\ucde8\uc18c"}),(0,k.jsx)("button",{onClick:()=>{if(b){r(b.id).success&&j(),f(null)}},className:"px-4 py-2 text-sm font-medium text-white bg-red-600 rounded-md hover:bg-red-700",children:"\uc0ad\uc81c"})]})]})})]})};var we=s(98),ke=s(628);const Se=()=>{const{isAdmin:e,getAllUsers:t}=O();if(!e())return(0,k.jsx)(L.C5,{to:"/",replace:!0});const s=t(),n={total:s.length,admins:s.filter(e=>"admin"===e.role).length,managers:s.filter(e=>"manager"===e.role).length,users:s.filter(e=>"user"===e.role).length},r=e=>{let{title:t,value:s,icon:n,color:r="blue"}=e;return(0,k.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,k.jsxs)("div",{className:"flex items-center",children:[(0,k.jsx)("div",{className:"".concat({blue:"bg-blue-500",green:"bg-green-500",yellow:"bg-yellow-500",red:"bg-red-500"}[r]," rounded-md p-3"),children:(0,k.jsx)(n,{className:"h-6 w-6 text-white"})}),(0,k.jsxs)("div",{className:"ml-4",children:[(0,k.jsx)("p",{className:"text-sm font-medium text-gray-600",children:t}),(0,k.jsx)("p",{className:"text-2xl font-semibold text-gray-900",children:s})]})]})})};return(0,k.jsxs)("div",{className:"max-w-7xl mx-auto p-6",children:[(0,k.jsx)("div",{className:"mb-8",children:(0,k.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,k.jsx)(X.A,{className:"h-8 w-8 text-blue-600"}),(0,k.jsx)("div",{children:(0,k.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"\uad00\ub9ac\uc790 \ud328\ub110"})})]}),(0,k.jsx)("div",{className:"flex items-center space-x-4"})]})}),(0,k.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[(0,k.jsx)(r,{title:"\uc804\uccb4 \uc0ac\uc6a9\uc790",value:n.total,icon:be.A,color:"blue"}),(0,k.jsx)(r,{title:"\uad00\ub9ac\uc790",value:n.admins,icon:X.A,color:"red"}),(0,k.jsx)(r,{title:"\uc77c\ubc18 \uc0ac\uc6a9\uc790",value:n.users,icon:be.A,color:"green"})]}),(0,k.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8",children:[(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,k.jsx)(we.A,{className:"h-6 w-6 text-gray-600"}),(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\uc2dc\uc2a4\ud15c \uc815\ubcf4"})]}),(0,k.jsxs)("div",{className:"space-y-3",children:[(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"\ubc84\uc804"}),(0,k.jsx)("span",{className:"font-medium",children:"v1.0.0"})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"\ub370\uc774\ud130 \uc800\uc7a5"}),(0,k.jsx)("span",{className:"font-medium",children:"LocalStorage"})]}),(0,k.jsxs)("div",{className:"flex justify-between",children:[(0,k.jsx)("span",{className:"text-gray-600",children:"\ubc31\uc5c5 \uc2dc\uac04"}),(0,k.jsx)("span",{className:"font-medium",children:"\uc2e4\uc2dc\uac04"})]})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,k.jsx)(ke.A,{className:"h-6 w-6 text-gray-600"}),(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\ucd5c\uadfc \ud65c\ub3d9"})]}),(0,k.jsxs)("div",{className:"space-y-3",children:[(0,k.jsxs)("div",{className:"text-sm",children:[(0,k.jsx)("p",{className:"text-gray-600",children:"\uc624\ub298 \ub85c\uadf8\uc778"}),(0,k.jsxs)("p",{className:"font-medium",children:[n.total,"\uba85"]})]}),(0,k.jsxs)("div",{className:"text-sm",children:[(0,k.jsx)("p",{className:"text-gray-600",children:"\ud65c\uc131 \uc138\uc158"}),(0,k.jsx)("p",{className:"font-medium",children:"1\uac1c"})]}),(0,k.jsxs)("div",{className:"text-sm",children:[(0,k.jsx)("p",{className:"text-gray-600",children:"\uc2dc\uc2a4\ud15c \uc0c1\ud0dc"}),(0,k.jsx)("p",{className:"font-medium text-green-600",children:"\uc815\uc0c1"})]})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,k.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,k.jsx)(V.A,{className:"h-6 w-6 text-gray-600"}),(0,k.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:"\ube60\ub978 \uc791\uc5c5"})]}),(0,k.jsxs)("div",{className:"space-y-3",children:[(0,k.jsx)("button",{className:"w-full text-left p-2 rounded-md hover:bg-gray-50 text-sm",children:"\ud83d\udcca \uc2dc\uc2a4\ud15c \ubcf4\uace0\uc11c \uc0dd\uc131"}),(0,k.jsx)("button",{className:"w-full text-left p-2 rounded-md hover:bg-gray-50 text-sm",children:"\ud83d\udd04 \ub370\uc774\ud130 \ubc31\uc5c5"}),(0,k.jsx)("button",{className:"w-full text-left p-2 rounded-md hover:bg-gray-50 text-sm",children:"\ud83e\uddf9 \uc2dc\uc2a4\ud15c \uc815\ub9ac"})]})]})]}),(0,k.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[(0,k.jsx)("div",{className:"px-6 py-4 border-b border-gray-200",children:(0,k.jsx)("h2",{className:"text-xl font-semibold text-gray-900",children:"\uc0ac\uc6a9\uc790"})}),(0,k.jsx)("div",{className:"p-0",children:(0,k.jsx)(Ne,{})})]}),(0,k.jsx)("div",{className:"mt-8 bg-yellow-50 border border-yellow-200 rounded-md p-4",children:(0,k.jsxs)("div",{className:"flex",children:[(0,k.jsx)("div",{className:"flex-shrink-0",children:(0,k.jsx)(X.A,{className:"h-5 w-5 text-yellow-400"})}),(0,k.jsxs)("div",{className:"ml-3",children:[(0,k.jsx)("h3",{className:"text-sm font-medium text-yellow-800",children:"\ubcf4\uc548 \uad8c\uc7a5\uc0ac\ud56d"}),(0,k.jsx)("div",{className:"mt-2 text-sm text-yellow-700",children:(0,k.jsxs)("ul",{className:"list-disc pl-5 space-y-1",children:[(0,k.jsx)("li",{children:"\uc815\uae30\uc801\uc73c\ub85c \uc0ac\uc6a9\uc790 \uacc4\uc815\uc744 \uac80\ud1a0\ud558\uc138\uc694"}),(0,k.jsx)("li",{children:"\uc0ac\uc6a9\ud558\uc9c0 \uc54a\ub294 \uacc4\uc815\uc740 \ube44\ud65c\uc131\ud654\ud558\uc138\uc694"}),(0,k.jsx)("li",{children:"\uac15\ub825\ud55c \ube44\ubc00\ubc88\ud638 \uc815\ucc45\uc744 \uc801\uc6a9\ud558\uc138\uc694"}),(0,k.jsx)("li",{children:"\uc2dc\uc2a4\ud15c \ub85c\uadf8\ub97c \uc815\uae30\uc801\uc73c\ub85c \ud655\uc778\ud558\uc138\uc694"})]})})]})]})})]})};function Ie(){const{isLoggedIn:e}=O();return e?(0,k.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,k.jsx)(Q,{}),(0,k.jsx)("main",{children:(0,k.jsxs)(L.BV,{children:[(0,k.jsx)(L.qh,{path:"/",element:(0,k.jsx)($,{})}),(0,k.jsx)(L.qh,{path:"/estimates",element:(0,k.jsx)(pe,{})}),(0,k.jsx)(L.qh,{path:"/invoices",element:(0,k.jsx)(ce,{})}),(0,k.jsx)(L.qh,{path:"/clients",element:(0,k.jsx)(xe,{})}),(0,k.jsx)(L.qh,{path:"/work-items",element:(0,k.jsx)(me,{})}),(0,k.jsx)(L.qh,{path:"/company-info",element:(0,k.jsx)(ge,{})}),(0,k.jsx)(L.qh,{path:"/admin",element:(0,k.jsx)(Se,{})}),(0,k.jsx)(L.qh,{path:"*",element:(0,k.jsx)(L.C5,{to:"/",replace:!0})})]})})]}):(0,k.jsx)(M,{})}const Ae=function(){return(0,k.jsx)(T,{children:(0,k.jsx)(Ie,{})})},Ce=new l.QueryClient({defaultOptions:{queries:{refetchOnWindowFocus:!1,retry:1,staleTime:3e5}}}),Pe=r.createRoot(document.getElementById("root")),_e=(()=>{const e={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_BASE_PATH;return e&&e.length>0?e:window.location.pathname.startsWith("/cms")?"/cms":"/"})(),Ee="1"==={NODE_ENV:"production",PUBLIC_URL:".",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.REACT_APP_USE_HASH_ROUTER?a.I9:a.Kd;Pe.render((0,k.jsx)(n.StrictMode,{children:(0,k.jsx)(l.QueryClientProvider,{client:Ce,children:(0,k.jsx)(W,{children:(0,k.jsx)(Ee,{basename:_e,children:(0,k.jsx)(Ae,{})})})})}))}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,s),a.exports}s.m=e,(()=>{var e=[];s.O=(t,n,r,a)=>{if(!n){var l=1/0;for(c=0;c<e.length;c++){n=e[c][0],r=e[c][1],a=e[c][2];for(var i=!0,d=0;d<n.length;d++)(!1&a||l>=a)&&Object.keys(s.O).every(e=>s.O[e](n[d]))?n.splice(d--,1):(i=!1,a<l&&(l=a));if(i){e.splice(c--,1);var o=r();void 0!==o&&(t=o)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,r,a]}})(),s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;s.t=function(n,r){if(1&r&&(n=this(n)),8&r)return n;if("object"===typeof n&&n){if(4&r&&n.__esModule)return n;if(16&r&&"function"===typeof n.then)return n}var a=Object.create(null);s.r(a);var l={};e=e||[null,t({}),t([]),t(t)];for(var i=2&r&&n;("object"==typeof i||"function"==typeof i)&&!~e.indexOf(i);i=t(i))Object.getOwnPropertyNames(i).forEach(e=>l[e]=()=>n[e]);return l.default=()=>n,s.d(a,l),a}})(),s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),s.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e={792:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var r,a,l=n[0],i=n[1],d=n[2],o=0;if(l.some(t=>0!==e[t])){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(d)var c=d(s)}for(t&&t(n);o<l.length;o++)a=l[o],s.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return s.O(c)},n=self.webpackChunkconstruction_management_frontend=self.webpackChunkconstruction_management_frontend||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=s.O(void 0,[96],()=>s(761));n=s.O(n)})();
//# sourceMappingURL=main.9b4d46c1.js.map
@echo off
REM ê±´ì„¤ ì²­êµ¬ì„œ ê´€ë¦¬ ì‹œìŠ¤í…œ - ì¢…ë£Œ ìŠ¤í¬ë¦½íŠ¸
REM ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë”ë¸”í´ë¦­í•˜ë©´ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì•ˆì „í•˜ê²Œ ì¢…ë£Œë©ë‹ˆë‹¤.

title ê±´ì„¤ ì²­êµ¬ì„œ ê´€ë¦¬ ì‹œìŠ¤í…œ - ì¢…ë£Œ
color 0C

echo ================================================
echo ðŸ›‘ ê±´ì„¤ ì²­êµ¬ì„œ ê´€ë¦¬ ì‹œìŠ¤í…œ ì¢…ë£Œ
echo ================================================
echo.

REM í˜„ìž¬ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd /d "%~dp0"

REM ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ í™•ì¸
echo [1/3] ì‹¤í–‰ ì¤‘ì¸ ì• í”Œë¦¬ì¼€ì´ì…˜ í™•ì¸...
docker-compose ps

REM ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ
echo.
echo [2/3] ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì¤‘...
docker-compose down
if errorlevel 1 (
    echo âŒ ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.
    echo âš ï¸  ê°•ì œ ì¢…ë£Œë¥¼ ì‹œë„í•©ë‹ˆë‹¤...
    docker-compose kill
    docker-compose rm -f
)
echo âœ… ì• í”Œë¦¬ì¼€ì´ì…˜ ì¢…ë£Œ ì™„ë£Œ

REM ë¦¬ì†ŒìŠ¤ ì •ë¦¬ (ì„ íƒì‚¬í•­)
echo.
echo [3/3] ë¦¬ì†ŒìŠ¤ ì •ë¦¬ ì¤‘...
docker system prune -f >nul 2>&1
echo âœ… ë¦¬ì†ŒìŠ¤ ì •ë¦¬ ì™„ë£Œ

echo.
echo ================================================
echo âœ… ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì•ˆì „í•˜ê²Œ ì¢…ë£Œë˜ì—ˆìŠµë‹ˆë‹¤.
echo ================================================
echo.
echo ðŸ“‹ ì •ë³´:
echo    - ëª¨ë“  ì»¨í…Œì´ë„ˆê°€ ì¤‘ì§€ë˜ì—ˆìŠµë‹ˆë‹¤
echo    - ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” Docker ë¦¬ì†ŒìŠ¤ê°€ ì •ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤
echo    - ë‹¤ìŒì— start-application.batì„ ì‹¤í–‰í•˜ë©´ ë‹¤ì‹œ ì‹œìž‘ë©ë‹ˆë‹¤
echo.
echo ðŸ’¾ ì°¸ê³ ì‚¬í•­:
echo    ë°ì´í„°ëŠ” ë¸Œë¼ìš°ì €ì— ìž„ì‹œ ì €ìž¥ë˜ë¯€ë¡œ ì •ê¸°ì ìœ¼ë¡œ
echo    Excel ë‚´ë³´ë‚´ê¸°ë¥¼ í†µí•´ ë°±ì—…í•˜ì‹œê¸° ë°”ëžë‹ˆë‹¤.
echo.
echo ì°½ì„ ë‹«ìœ¼ë ¤ë©´ ì•„ë¬´ í‚¤ë‚˜ ëˆ„ë¥´ì„¸ìš”...
pause >nul
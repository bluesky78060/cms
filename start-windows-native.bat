@echo off
REM ê±´ì„¤ ì²­êµ¬ì„œ ê´€ë¦¬ ì‹œìŠ¤í…œ - Windows ë„¤ì´í‹°ë¸Œ ì‹¤í–‰ (Docker ì—†ì´)
REM Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìžˆì–´ì•¼ í•©ë‹ˆë‹¤.

title ê±´ì„¤ ì²­êµ¬ì„œ ê´€ë¦¬ ì‹œìŠ¤í…œ - Native ì‹¤í–‰
color 0B

echo ================================================
echo ðŸ—ï¸  ê±´ì„¤ ì²­êµ¬ì„œ ê´€ë¦¬ ì‹œìŠ¤í…œ (Native ì‹¤í–‰)
echo ================================================
echo.

REM í˜„ìž¬ ë””ë ‰í† ë¦¬ë¡œ ì´ë™
cd /d "%~dp0"

REM Node.js ì„¤ì¹˜ í™•ì¸
echo [1/4] Node.js í™•ì¸ ì¤‘...
node --version >nul 2>&1
if errorlevel 1 (
    echo âŒ Node.jsê°€ ì„¤ì¹˜ë˜ì–´ ìžˆì§€ ì•ŠìŠµë‹ˆë‹¤.
    echo.
    echo ðŸ“‹ í•´ê²° ë°©ë²•:
    echo    1. https://nodejs.org ì—ì„œ Node.jsë¥¼ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”
    echo    2. LTS ë²„ì „ì„ ì„¤ì¹˜í•˜ì„¸ìš” (ê¶Œìž¥: 18.x ë˜ëŠ” 20.x)
    echo    3. ì»´í“¨í„°ë¥¼ ìž¬ì‹œìž‘í•˜ì„¸ìš”
    echo    4. ì´ ìŠ¤í¬ë¦½íŠ¸ë¥¼ ë‹¤ì‹œ ì‹¤í–‰í•˜ì„¸ìš”
    echo.
    pause
    exit /b 1
)
echo âœ… Node.js í™•ì¸ ì™„ë£Œ
echo.

REM frontend í´ë”ë¡œ ì´ë™
cd frontend

REM ì˜ì¡´ì„± ì„¤ì¹˜ í™•ì¸
echo [2/4] ì˜ì¡´ì„± íŒ¨í‚¤ì§€ í™•ì¸ ì¤‘...
if not exist "node_modules" (
    echo ðŸ“¦ í•„ìš”í•œ íŒ¨í‚¤ì§€ë“¤ì„ ì„¤ì¹˜í•©ë‹ˆë‹¤... (ì‹œê°„ì´ ê±¸ë¦´ ìˆ˜ ìžˆìŠµë‹ˆë‹¤)
    npm install
    if errorlevel 1 (
        echo âŒ íŒ¨í‚¤ì§€ ì„¤ì¹˜ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.
        echo ì¸í„°ë„· ì—°ê²°ì„ í™•ì¸í•˜ê³  ë‹¤ì‹œ ì‹œë„í•˜ì„¸ìš”.
        pause
        exit /b 1
    )
) else (
    echo âœ… íŒ¨í‚¤ì§€ í™•ì¸ ì™„ë£Œ
)
echo.

REM í¬íŠ¸ ì‚¬ìš© ì¤‘ì¸ì§€ í™•ì¸
echo [3/4] í¬íŠ¸ 3000 í™•ì¸ ì¤‘...
netstat -ano | findstr :3000 >nul 2>&1
if not errorlevel 1 (
    echo âš ï¸  í¬íŠ¸ 3000ì´ ì´ë¯¸ ì‚¬ìš© ì¤‘ìž…ë‹ˆë‹¤.
    echo ë‹¤ë¥¸ í”„ë¡œê·¸ëž¨ì„ ì¢…ë£Œí•˜ê±°ë‚˜ í¬íŠ¸ë¥¼ ë³€ê²½í•˜ì„¸ìš”.
    pause
)
echo âœ… í¬íŠ¸ í™•ì¸ ì™„ë£Œ
echo.

REM ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œìž‘
echo [4/4] ì• í”Œë¦¬ì¼€ì´ì…˜ ì‹œìž‘ ì¤‘...
echo.
echo ================================================
echo ðŸŽ‰ ì• í”Œë¦¬ì¼€ì´ì…˜ì´ ì‹œìž‘ë©ë‹ˆë‹¤!
echo ================================================
echo.
echo ðŸŒ ì›¹ ì£¼ì†Œ: http://localhost:3000
echo â¹ï¸  ì¢…ë£Œ: Ctrl + Cë¥¼ ëˆ„ë¥´ì„¸ìš”
echo.
echo ðŸ“‹ ì‚¬ìš© ë°©ë²•:
echo    1. ê±´ì¶•ì£¼ ê´€ë¦¬ - ê³ ê° ì •ë³´ ê´€ë¦¬
echo    2. ìž‘ì—… í•­ëª© ê´€ë¦¬ - ê³µì‚¬ ìž‘ì—… ê´€ë¦¬
echo    3. ì²­êµ¬ì„œ ê´€ë¦¬ - ì²­êµ¬ì„œ ìƒì„± ë° PDF ì¶œë ¥
echo.
echo ðŸ’¡ ë„ì›€ë§:
echo    - ë¸Œë¼ìš°ì €ê°€ ìžë™ìœ¼ë¡œ ì—´ë¦¬ì§€ ì•Šìœ¼ë©´ http://localhost:3000ì„ ì§ì ‘ ìž…ë ¥í•˜ì„¸ìš”
echo    - ëª¨ë“  ë°ì´í„°ëŠ” ë¸Œë¼ìš°ì €ì— ì €ìž¥ë©ë‹ˆë‹¤ (ì •ê¸° ë°±ì—… ê¶Œìž¥)
echo    - Excel ê°€ì ¸ì˜¤ê¸°/ë‚´ë³´ë‚´ê¸° ê¸°ëŠ¥ìœ¼ë¡œ ë°ì´í„°ë¥¼ ê´€ë¦¬í•˜ì„¸ìš”
echo.

REM ë¸Œë¼ìš°ì € ìžë™ ì—´ê¸° (3ì´ˆ í›„)
timeout /t 3 /nobreak >nul
start http://localhost:3000

REM React ê°œë°œ ì„œë²„ ì‹œìž‘
npm start
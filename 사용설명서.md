# 🏗️ 건축 견적/청구 시스템 사용 설명서

---

## 📋 목차

1. [시스템 개요](#1-시스템-개요)
2. [시작하기](#2-시작하기)
3. [보안 인증](#3-보안-인증)
4. [메인 대시보드](#4-메인-대시보드)
5. [고객사 관리](#5-고객사-관리)
6. [작업항목 관리](#6-작업항목-관리)
7. [청구서 작성](#7-청구서-작성)
8. [환경설정](#8-환경설정)
9. [데이터 관리](#9-데이터-관리)
10. [문제해결](#10-문제해결)

---

## 1. 시스템 개요

### 🎯 시스템 목적
- **건축업체**를 위한 종합적인 견적 및 청구 관리 솔루션
- 고객사 관리부터 청구서 발행까지 **원스톱 서비스**
- 엑셀 연동, PDF 생성 등 **실무 중심** 기능 제공

### ✨ 주요 기능
| 기능 영역 | 세부 기능 |
|----------|-----------|
| 🏢 **고객사 관리** | 고객 정보, 현장 관리, 연락처 관리 |
| 📝 **작업항목 관리** | 공사 내역, 진행 상황, 단가 관리 |
| 💰 **청구서 작성** | 자동 계산, PDF 출력, 한글 금액 표기 |
| ⚙️ **환경설정** | 업체 정보, 도장 이미지, 단위/카테고리 관리 |
| 📊 **데이터 관리** | 엑셀 가져오기/내보내기, 백업/복원 |

### 🏗️ 시스템 아키텍처
```
📱 웹 브라우저 애플리케이션
├── 💾 로컬 파일 시스템 (데스크톱)
├── 🌐 localStorage (웹 브라우저)
└── ☁️ 클라우드 백업 (선택사항)
```

---

## 2. 시작하기

### 💻 시스템 요구사항
- **웹 브라우저**: Chrome, Edge, Safari, Firefox (최신 버전)
- **운영체제**: Windows 10+, macOS 10.14+, Linux
- **메모리**: 최소 4GB RAM 권장
- **저장공간**: 100MB 이상 여유공간

### 🚀 접속 방법

#### 웹 브라우저 접속
1. 브라우저에서 시스템 URL 접속
2. 보안키 파일 업로드
3. 사용자 선택 후 로그인

#### 데스크톱 앱 (Electron)
1. 애플리케이션 다운로드 및 설치
2. 프로그램 실행
3. 보안키 인증 진행

### 📁 데이터 저장 방식
```
💾 하이브리드 저장 시스템
├── 🖥️ 데스크톱: ~/Documents/CMS-Data/
├── 🌐 웹브라우저: localStorage + 폴더 선택
└── ☁️ 백업: JSON 파일 다운로드
```

---

## 3. 보안 인증

### 🔐 보안키 시스템

#### 보안키 파일 형식 (.cmskey)
```json
{
  "keyId": "CMS-12345",
  "issuedTo": "하늘건설",
  "issuedDate": "2024-01-01",
  "expiryDate": "2024-12-31",
  "signature": "암호화된서명",
  "permissions": ["read", "write", "admin"]
}
```

#### 인증 프로세스
1. **파일 업로드**: `.cmskey` 파일을 드래그 앤 드롭
2. **유효성 검사**: 만료일, 서명 확인
3. **권한 확인**: 사용자별 접근 권한 검증
4. **세션 유지**: 브라우저 세션 동안 인증 상태 유지

### 👤 사용자 관리

#### 사용자 선택
- 보안키 인증 후 사용자명 입력
- 사용자별 **독립적인 데이터 공간** 제공
- `USER_{사용자명}_{데이터타입}` 형태로 데이터 분리

#### 로그아웃 옵션
| 로그아웃 유형 | 설명 | 적용 범위 |
|-------------|------|----------|
| 🔒 **가벼운 로그아웃** | 사용자만 로그아웃 | 보안키 유지 |
| 🚪 **완전 로그아웃** | 모든 인증 정보 삭제 | 보안키 포함 삭제 |

---

## 4. 메인 대시보드

### 📊 대시보드 구성

#### 상단 통계 카드
```
┌─────────────┬─────────────┬─────────────┬─────────────┐
│  월간 청구서  │   미수 금액   │   완료 작업   │   고객사 수   │
│     12건     │  1,500만원   │     45건     │     8곳      │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

#### 최근 청구서 목록
- **최신 5개** 청구서 표시
- 상태별 **색상 구분** (발행완료/미수금/수금완료)
- 원클릭으로 **청구서 상세보기** 가능

#### 백업 알림
```
💾 데이터 백업을 권장합니다
매일 정기적으로 데이터를 백업하여 안전하게 보관하세요.
[지금 백업하기] 버튼
```

### 🎨 UI/UX 특징
- **직관적인 네비게이션**: 좌측 사이드바 메뉴
- **반응형 디자인**: 데스크톱/태블릿 최적화
- **한국어 UI**: 모든 메뉴와 메시지 한국어 제공
- **색상 코딩**: 상태별 시각적 구분

---

## 5. 고객사 관리

### 🏢 고객사 정보 관리

#### 기본 정보 항목
```
고객사 기본정보
├── 📝 고객사명 (필수)
├── 👤 담당자명
├── 📞 연락처 (자동 하이픈 포맷팅)
├── 📧 이메일
├── 🏠 주소
└── 📝 비고사항
```

#### 전화번호 자동 포맷팅
- **입력 즉시** 한국 전화번호 형식으로 변환
- 지원 형식:
  - `010-1234-5678` (휴대폰)
  - `02-1234-5678` (서울 지역번호)
  - `031-123-4567` (기타 지역번호)
  - `070-1234-5678` (인터넷 전화)

### 🏗️ 현장(작업장) 관리

#### 현장 정보
```
현장 관리
├── 🏗️ 현장명
├── 📍 현장 주소
├── 👷 현장 담당자
├── 📅 공사 기간
└── 💰 계약 금액
```

#### 현장별 작업 현황
- 해당 현장의 **모든 작업항목** 조회
- **진행률 표시**: 완료/진행중/대기 상태
- **수금 현황**: 청구/수금 금액 집계

### 📊 엑셀 연동 기능

#### 템플릿 다운로드
```
고객사 엑셀 템플릿
├── 고객사명
├── 담당자명  
├── 연락처
├── 이메일
├── 주소
└── 비고
```

#### 대량 등록 프로세스
1. **템플릿 다운로드**: 표준 양식 제공
2. **데이터 입력**: 엑셀에서 고객 정보 작성
3. **파일 업로드**: 완성된 엑셀 파일 선택
4. **자동 변환**: 시스템이 자동으로 데이터 변환
5. **검증 및 저장**: 중복 확인 후 최종 저장

---

## 6. 작업항목 관리

### 📝 작업항목 구조

#### 작업항목 정보
```
작업항목 데이터
├── 🏢 고객사 (선택 필수)
├── 🏗️ 현장 (선택 필수)  
├── 📝 작업 내용
├── 📊 카테고리 (토목/구조/철거/마감/설비/기타)
├── 🔢 수량
├── 📏 단위 (식/m/㎡/kg/톤/개/회/일)
├── 💰 단가
├── 💰 금액 (자동 계산)
├── 📅 작업일
└── ✅ 완료 상태
```

#### 자동 계산 시스템
```
💰 금액 = 수량 × 단가
📊 고객사별 집계 = Σ(해당 고객사 모든 작업)
✅ 완료율 = 완료 작업 ÷ 전체 작업 × 100
```

### 🔍 필터링 및 검색

#### 다중 필터 시스템
```
필터 옵션
├── 🏢 고객사별 필터
├── 📊 카테고리별 필터  
├── ✅ 완료 상태 필터
├── 📅 기간별 필터
└── 🔍 텍스트 검색
```

#### 실시간 검색
- **즉시 검색**: 타이핑과 동시에 결과 표시
- **부분 일치**: 작업 내용, 고객사명 부분 검색
- **하이라이트**: 검색어 강조 표시

### ⚡ 대량 작업 기능

#### 벌크 입력 모달
```
대량 작업 등록
├── 🏢 공통 고객사 선택
├── 🏗️ 공통 현장 선택
└── 📝 작업항목 목록
    ├── 작업 1: [내용][카테고리][수량][단위][단가]
    ├── 작업 2: [내용][카테고리][수량][단위][단가]
    └── [+ 작업 추가] 버튼
```

#### 체크박스 다중 선택
- **다중 선택**: 여러 작업항목 동시 선택
- **일괄 작업**: 선택된 항목 일괄 삭제/수정
- **청구서 생성**: 선택된 완료 작업으로 청구서 생성

---

## 7. 청구서 작성

### 💰 청구서 생성 프로세스

#### 청구서 생성 단계
```
1️⃣ 작업항목 선택
   └── 완료된 작업 중 동일 고객사 선택

2️⃣ 청구서 정보 입력  
   ├── 📅 청구일
   ├── 📅 납기일
   └── 📝 비고사항

3️⃣ 자동 계산
   ├── 💰 공급가액 계산
   ├── 🧮 부가세 계산 (10%)
   └── 💰 총 금액 산출

4️⃣ 미리보기 및 저장
   └── PDF 생성 또는 인쇄
```

### 📄 청구서 양식

#### 청구서 헤더
```
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
                    청  구  서
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━

📋 청구서 번호: CMS-2024-001
📅 청구일: 2024년 3월 15일
📅 납기일: 2024년 3월 30일
```

#### 업체 정보 (자동 입력)
```
🏢 공급자 정보                    🏢 공급받는자 정보
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
업체명: 하늘건설                   업체명: 대한아파트
대표자: 김철수                     담당자: 이영희  
사업자번호: 123-45-67890           연락처: 02-1234-5678
주소: 서울시 강남구...              주소: 서울시 서초구...
연락처: 02-9876-5432
```

#### 작업 내역 테이블
```
┌──┬─────────────┬────┬────┬─────────┬─────────┐
│번호│   작업내용    │수량 │단위│   단가   │   금액   │
├──┼─────────────┼────┼────┼─────────┼─────────┤
│ 1 │ 터파기 작업   │ 50 │ m³ │ 15,000  │ 750,000 │
│ 2 │ 콘크리트 타설 │ 30 │ m³ │ 85,000  │2,550,000│
│ 3 │ 철근 가공설치 │2.5 │ 톤 │1,200,000│3,000,000│
└──┴─────────────┴────┴────┴─────────┴─────────┘
```

#### 금액 요약 (한글 표기)
```
💰 금액 요약
━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━
공급가액: 6,300,000원 (육백삼십만원)
부 가 세:   630,000원 (육십삼만원)  
총  금액: 6,930,000원 (육백구십삼만원)

💳 입금 계좌
하나은행 123-456789-001 (하늘건설)
```

### 🖨️ 출력 및 저장

#### PDF 생성 기능
- **브라우저 인쇄**: 깔끔한 A4 용지 최적화
- **한글 폰트**: Google Fonts 나눔고딕 사용
- **도장 이미지**: 업체 도장 자동 삽입
- **페이지 나누기**: 긴 목록 자동 페이지 분할

#### 청구서 상태 관리
```
청구서 생명주기
📝 임시저장 → 💰 발행완료 → 💸 수금완료 → 📁 보관
```

---

## 8. 환경설정

### 🏢 업체 정보 관리

#### 필수 정보 입력
```
업체 기본정보
├── 📝 업체명 ⭐(필수)
├── 🆔 사업자등록번호 ⭐(필수)  
├── 👤 대표자명 ⭐(필수)
├── 📞 전화번호 ⭐(필수) - 자동 포맷팅
├── 📧 이메일
├── 🏠 주소 ⭐(필수)
├── 💳 계좌번호
└── 👤 예금주명
```

#### 전화번호 자동 포맷팅
```javascript
입력 예시:
01012345678 → 010-1234-5678
0212345678  → 02-1234-5678  
0311234567  → 031-123-4567
```

### ⚙️ 시스템 설정

#### 단위 관리
```
기본 단위 목록
├── 식 (set)
├── m (미터)
├── ㎡ (제곱미터) 
├── kg (킬로그램)
├── 톤 (ton)
├── 개 (개수)
├── 회 (회차)
└── 일 (일수)
```

**단위 추가/삭제**
- 새 단위 추가: 텍스트 입력 후 [추가] 버튼
- 기존 단위 삭제: 각 단위별 [삭제] 버튼
- 중복 체크: 동일 단위 입력 시 경고 메시지

#### 카테고리 관리
```
작업 카테고리
├── 토목공사 (earthwork)
├── 구조공사 (structure) 
├── 철거공사 (demolition)
├── 마감공사 (finishing)
├── 설비공사 (facility)
└── 기타 (others)
```

### 🖼️ 도장 이미지 관리

#### 이미지 업로드
```
도장 이미지 요구사항
├── 📎 파일 형식: PNG, JPG
├── 📏 최대 크기: 5MB
├── 🎨 권장 사항: 투명 배경
└── 📐 권장 크기: 200x200px
```

#### 저장소 정보
- **실시간 용량 확인**: 저장소 사용량 표시
- **이미지 크기**: 업로드된 도장 이미지 크기
- **용량 최적화**: 자동 이미지 압축

### 💾 데이터 저장 위치

#### 환경별 저장 방식
```
🖥️ 데스크톱 앱 (Electron)
└── ~/Documents/CMS-Data/
    ├── users/ (사용자별 데이터)
    ├── backups/ (자동 백업)  
    └── security-keys/ (보안키)

🌐 웹 브라우저
└── localStorage + 폴더 선택 (Chrome/Edge)
    ├── 기본: localStorage
    └── 선택: File System Access API
```

---

## 9. 데이터 관리

### 📊 엑셀 연동 시스템

#### 지원 데이터 유형
```
엑셀 가져오기/내보내기
├── 🏢 고객사 정보
├── 📝 작업항목 목록
└── 💰 청구서 내역
```

#### 템플릿 시스템
```
템플릿 다운로드 프로세스
1️⃣ [템플릿 다운로드] 버튼 클릭
2️⃣ 표준 양식 엑셀 파일 다운로드
3️⃣ 엑셀에서 데이터 입력
4️⃣ [파일 선택] 후 업로드
5️⃣ 자동 데이터 변환 및 저장
```

#### 엑셀 파일 구조
```
고객사 템플릿 (customers_template.xlsx)
┌─────────────┬─────────────┬─────────────┬─────────────┐
│   고객사명   │   담당자명   │    연락처    │    이메일    │
├─────────────┼─────────────┼─────────────┼─────────────┤
│   대한건설   │    김부장    │010-1234-5678│kim@daehan.co│
│   서울아파트 │    이과장    │02-9876-5432 │lee@seoul.com │
└─────────────┴─────────────┴─────────────┴─────────────┘
```

### 💾 백업 및 복원

#### 백업 시스템
```
백업 유형
├── 👤 사용자별 백업
│   └── 현재 로그인 사용자 데이터만
├── 🌐 전체 백업  
│   └── 모든 사용자 데이터
└── 📅 자동 백업
    └── 시스템 종료 시 자동 백업
```

#### 백업 파일 형식
```json
{
  "createdAt": "2024-03-15T10:30:45.123Z",
  "type": "user", // "user" | "all"
  "version": "1.0.0",
  "data": {
    "COMPANY_INFO": {...},
    "CLIENTS": [...],
    "WORK_ITEMS": [...],
    "INVOICES": [...]
  }
}
```

#### 복원 프로세스
```
데이터 복원 단계
1️⃣ 백업 파일 선택 (.json)
2️⃣ 파일 유효성 검사
3️⃣ 기존 데이터 백업 (안전 조치)
4️⃣ 새 데이터 적용
5️⃣ 시스템 자동 새로고침
```

### 🔄 데이터 마이그레이션

#### 마이그레이션 체인
```
데이터 이동 경로
📱 localStorage → 📁 로컬 파일 → ☁️ 클라우드 DB

마이그레이션 도구
├── 🔍 데이터 검사: 무결성 확인
├── 📦 데이터 변환: 형식 변환
├── 🚀 일괄 전송: API 호출
└── ✅ 결과 확인: 성공/실패 리포트
```

---

## 10. 문제해결

### 🚨 일반적인 문제

#### 로그인 관련
```
❌ 문제: "보안키 파일이 유효하지 않습니다"
✅ 해결: 
   1. 파일 확장자가 .cmskey인지 확인
   2. 파일이 손상되지 않았는지 확인
   3. 만료일이 지나지 않았는지 확인
   4. 관리자에게 새 보안키 요청
```

```
❌ 문제: "사용자를 찾을 수 없습니다"  
✅ 해결:
   1. 사용자명 정확히 입력
   2. 띄어쓰기 및 특수문자 확인
   3. 이전에 사용한 이름과 동일한지 확인
```

#### 데이터 관련
```
❌ 문제: "데이터가 사라졌습니다"
✅ 해결:
   1. 브라우저 새로고침 (F5)
   2. 다른 사용자로 로그인했는지 확인  
   3. 백업 파일에서 복원
   4. localStorage 확인 (개발자 도구)
```

```
❌ 문제: "엑셀 파일을 불러올 수 없습니다"
✅ 해결:
   1. 파일이 올바른 템플릿인지 확인
   2. 파일이 열려있지 않은지 확인
   3. 한글이 깨지지 않았는지 확인
   4. 필수 컬럼이 있는지 확인
```

#### 성능 관련
```
❌ 문제: "시스템이 느려집니다"
✅ 해결:
   1. 브라우저 캐시 정리
   2. 불필요한 탭 닫기
   3. 데이터 백업 후 일부 삭제
   4. 브라우저 재시작
```

### 🔧 고급 문제해결

#### 브라우저별 이슈
```
Chrome/Edge
├── ✅ 모든 기능 완벽 지원
├── 📁 File System Access API 지원
└── 🔄 자동 업데이트 권장

Safari  
├── ⚠️ 일부 기능 제한
├── 🚫 폴더 선택 미지원
└── 💾 localStorage만 사용

Firefox
├── ✅ 대부분 기능 지원
├── ⚠️ 일부 고급 기능 제한
└── 🔄 최신 버전 권장
```

#### 데이터 손실 예방
```
예방 조치
├── 📅 정기 백업 (주 1회 이상)
├── 🔄 브라우저 북마크 저장
├── 📁 백업 파일 별도 보관
└── ☁️ 클라우드 저장소 활용
```

### 📞 지원 및 문의

#### 기술 지원
```
🆘 지원 채널
├── 📧 이메일: support@cms.com
├── 📞 전화: 1588-1234
├── 💬 온라인 채팅: 평일 9-18시
└── 📖 FAQ: 홈페이지 참조
```

#### 업데이트 안내
```
🔄 시스템 업데이트
├── 🚀 자동 업데이트: 웹 버전
├── 📱 수동 업데이트: 데스크톱 앱
├── 📋 업데이트 내역: 릴리스 노트 확인
└── 🔔 알림: 새 기능 및 버그 수정
```

---

## 📝 부록

### 🎯 사용 팁

#### 효율적인 작업 순서
```
권장 워크플로우
1️⃣ 환경설정 → 업체 정보 입력
2️⃣ 고객사 관리 → 고객/현장 등록
3️⃣ 작업항목 → 일일 작업 기록
4️⃣ 청구서 → 월말 청구서 발행
5️⃣ 데이터 관리 → 정기 백업
```

#### 키보드 단축키
```
⌨️ 단축키 모음
├── Ctrl + S: 저장
├── Ctrl + N: 새 항목 추가
├── Ctrl + F: 검색
├── Ctrl + P: 인쇄/PDF
└── F5: 새로고침
```

### 📊 데이터 예시

#### 샘플 고객사 데이터
```json
{
  "name": "대한아파트",
  "contact": "이부장",
  "phone": "02-1234-5678",
  "email": "lee@daehan.com",
  "address": "서울시 강남구 테헤란로 123",
  "workplaces": [
    {
      "name": "101동 신축공사",
      "address": "서울시 강남구 삼성동",
      "manager": "김현장",
      "startDate": "2024-01-15",
      "endDate": "2024-12-31"
    }
  ]
}
```

### 🔗 관련 문서
- **개발자 가이드**: API 연동 방법
- **관리자 매뉴얼**: 시스템 관리 가이드  
- **보안 정책**: 데이터 보호 및 개인정보처리방침
- **업데이트 로그**: 버전별 변경사항

---

## 📞 연락처

**🏢 개발사**: 하늘기술  
**📧 이메일**: contact@sky-tech.co.kr  
**📞 전화**: 02-1234-5678  
**🌐 웹사이트**: https://cms.sky-tech.co.kr  
**📅 문서 버전**: v1.0.0 (2024.03.15)

---

> 💡 **참고**: 이 문서는 건축 견적/청구 시스템 v1.0.0 기준으로 작성되었습니다.  
> 시스템 업데이트에 따라 일부 내용이 변경될 수 있습니다.